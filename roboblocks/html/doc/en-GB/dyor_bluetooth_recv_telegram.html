<html>
<head>
<style>.button_wrapper {
  text-align: center;
  color: red;
}
.button {
  background-color: #2e2efe;
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
}
.datagrid table {
  border-collapse: collapse;
  text-align: left;
  width: 100%;
}
.datagrid {
  font: normal 12px/150% Arial,Helvetica,sans-serif;
  background: #fff;
  overflow: hidden;
  border: 1px solid #006699;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
}
.datagrid table td, .datagrid table th {
  padding: 3px 10px;
}
.datagrid table thead th {
  background: -webkit-gradient(linear,left top,left bottom,color-stop(0.05,#006699),color-stop(1,#00557f));
  background: -moz-linear-gradient(center top,#006699 5%,#00557f 100%);
  background-color: #006699;
  color: #ffffff;
  font-size: 15px;
  font-weight: bold;
  border-left: 1px solid #0070a8;
}
.datagrid table thead th:first-child {
  border: none;
}
.datagrid table tbody td {
  color: #00496b;
  border-left: 1px solid #e1eef4;
  font-size: 12px;
  font-weight: normal;
}
.datagrid table tbody .alt td {
  background: #e1eef4;
  color: #00496b;
}
.datagrid table tbody td:first-child {
  border-left: none;
}
.datagrid table tbody tr:last-child td {
  border-bottom: none;
}
.datagrid table tfoot td div {
  border-top: 1px solid #006699;
  background: #e1eef4;
}
.datagrid table tfoot td {
  padding: 0;
  font-size: 12px;
}
.datagrid table tfoot td div {
  padding: 2px;
}
.datagrid table tfoot td ul {
  margin: 0;
  padding: 0;
  list-style: none;
  text-align: right;
}
.datagrid table tfoot li {
  display: inline;
}
.datagrid table tfoot li a {
  text-decoration: none;
  display: inline-block;
  padding: 2px 8px;
  margin: 1px;
  color: #ffffff;
  border: 1px solid #006699;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background: -webkit-gradient(linear,left top,left bottom,color-stop(0.05,#006699),color-stop(1,#00557f));
  background: -moz-linear-gradient(center top,#006699 5%,#00557f 100%);
  background-color: #006699;
}
.datagrid table tfoot ul.active, .datagrid table tfoot ul a:hover {
  text-decoration: none;
  border-color: #006699;
  color: #ffffff;
  background: none;
  background-color: #00557f;
}
div.dhtmlx_window_active, div.dhx_modal_cover_dv {
  position: fixed !important;
}
</style>
</head>
<body>
<h3 id="up">Receive a bluetooth telegram</h3>
<h4>Instruction</h4>
<p><image src="doc/en-GB/img/dyor_bluetooth_recv_telegram.png" title="dyor_bluetooth_recv_telegram" alt="dyor_bluetooth_recv_telegram"></image></p>
<h4>Description</h4>
<p>Receives bluetooth telegrams from an external application. It executes a set of instructions according to the received telegram. A telegram involves a bluetooth data transmission protocol as specified. Use in conjunction with instruction:</p>
<p><image src="doc/en-GB/img/dyor_bluetooth_def.png" title="dyor_bluetooth_def" alt="dyor_bluetooth_def" style="cursor: pointer;" onClick="$(function(){$('#doc').load('doc/en-GB/dyor_bluetooth_def.html');});"></image></p>
<h4>Requirements</h4>
<p>Facilino 's License</p>
<h5>Previous Versions</h5>
In previous versions of Facilino, this instruction TX and RX pins were configurable. This option has been removed to simplify the aspect of the instruction. You must make sure that you use the bluetooth module definition instruction for correct operation.
<h4>Mutator</h4>
Drag and drop telegrams to be decoded in the container:
<h5>Container</h5>
<p><image src="doc/en-GB/img/dyor_bluetooth_app_app.png" title="dyor_bluetooth_app_app" alt="dyor_bluetooth_app_app"></image></p>
<h5>Elements</h5>
<p><image src="doc/en-GB/img/dyor_bluetooth_telegram_item.png" title="dyor_bluetooth_telegram_item" alt="dyor_bluetooth_telegram_item"></image></p>	
<h4>Inputs</h4>
<ul>
   <li>Telegram: Type of telegram to receive.</li>
</ul>
<h4>Stacks</h4>
<ul>
  <li>Do: Set of instructions to execute in case of receiving the telegram.</li>
</ul>
<h5>Structure telegram</h5>
<div class="datagrid"><table>
<thead><tr><th>STX</th><th>CMD</th><th>Length</th><th>Data 0</th><th>...</th><th>Data N-1</th><th>END</th></tr></thead>
</table></div>
<p>STX being the '@' symbol in ASCII; CMD command (1 byte); Length the length of the data; Data 0 ... Data N-1 data and END the '*' symbol in ASCII.</p>
<h5>Predefined Telegrams</h5>
<div class="datagrid"><table>
<thead><tr><th>Command</th><th>Length</th><th>Data 0</th><th>Data 1</th><th>Data 2</th><th>Data 3 to Data 10</th></tr></thead>
<tbody><tr class="title"><td>Digital Output</td><td>2</td><td>Pin</td><td>Value</td><td>-</td><td>-</td></tr>
	<tr><td>Analog Output</td><td>2</td><td>Pin</td><td>Value</td><td>-</td><td>-</td></tr>
	<tr class="title"><td>Servo</td><td>2</td><td>Pin</td><td>Angle</td><td>-</td><td>-</td></tr>
	<tr><td>Servo 360º</td><td>2</td><td>Pin</td><td>Speed</td><td>-</td><td>-</td></tr>
	<tr class="title"><td>Audio</td><td>3</td><td>Pin</td><td>Frequency</td><td>               Duration</td><td>-</td></tr>
	<tr><td>LEDs matrix </td><td>4</td><td>Pin CS</td><td>DIN Pin</td><td>Pin CLK</td><td>Data (8 bytes)</td></tr>
</tbody>
</table></div>
<h4>Example</h4>
In this example, a telegram is received to remotely activate two leds connected to pins 5 and 6.
<div class="button_wrapper">
<p><button align="center" class="button" style="cursor: pointer;" onClick="openFunction('doc/examples/dyor_bluetooth_recv_telegram_example.bly')">Open</button></p>
All changes will be lost!
</div>
<h5>Circuit</h5>
<image src="doc/circuits/bluetooth_leds_example_bb.png" title="bluetooth_leds_example_bb" alt="bluetooth_leds_example_bb"></image>
<h5>Facilino Code</h5>
<image src="doc/en-GB/img/dyor_bluetooth_recv_telegram_example.png" title="dyor_bluetooth_recv_telegram_example" alt="dyor_bluetooth_recv_telegram_example"></image>
<script>
function openFunction(bly) {
    $.ajax({
        type: "GET" ,
        url: bly ,
        dataType: "xml" ,
        success: function(xml) {
			var txt = new XMLSerializer().serializeToString(xml);
			Blockly.mainWorkspace.clear();
			var xmlDOM = Blockly.Xml.textToDom(txt);
			Blockly.Xml.domToWorkspace(xmlDOM,Blockly.getMainWorkspace());
        }
    });
}
</script><p><image src="doc/common/home.png" title="home" alt="home" style="cursor: pointer;" onClick="$(function(){$('#doc').load('doc/en-GB/index.html');});"></image> | <a href="#up"><image src="doc/common/up.png" title="up"></image></a> | <image src="doc/common/category.png" title="category" alt="category" style="cursor: pointer;" onClick="$(function(){$('#doc').load('doc/en-GB/categories.html');});"></image> | <image src="doc/common/language.png" title="Language" alt="Language" style="cursor: pointer;" onClick="alert('Do you want to colaborate in translating Facilino to your language? Please, contact with soporte@roboticafacil.es')"></image> | <image src="doc/common/bug-fixing.png" title="bug-fixing" alt="bug-fixing" style="cursor: pointer;" onClick="alert('Have you found a bug? Please, contact with soporte@roboticafacil.es')"></image></p>
</body>
</html>