<html>
<head>
<style>.button_wrapper {
  text-align: center;
  color: red;
}
.button {
  background-color: #2e2efe;
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
}
</style>
</head>
<body>
<h3 id="up">State machine</h3>
<h4>Instruction</h4>
<p><image src="doc/en-GB/img/controls_statemachine.png" title="controls_statemachine" alt="controls_statemachine"></image></p>
<h4>Description</h4>
<p>It allows to define a state machine. You can add initial states (initialized from the beginning) or standard states (not initialized). Both will be activated and deactivated according to their activation and deactivation conditions when running the state machine. Use in combination the following instructions:</p>
<p><image src="doc/en-GB/img/controls_statemachine_transition_state_end.png" title="controls_statemachine_transition_state_end" alt="controls_statemachine_transition_state_end" style="cursor: pointer;" onClick="$(function(){$('#doc').load('doc/en-GB/controls_statemachine_transition_state_end.html');});"></image></p>
<p><image src="doc/en-GB/img/controls_statemachine_transition_state.png" title="controls_statemachine_transition_state" alt="controls_statemachine_transition_state" style="cursor: pointer;" onClick="$(function(){$('#doc').load('doc/en-GB/controls_statemachine_transition_state.html');});"></image></p>
<p><image src="doc/en-GB/img/controls_statemachine_transition_to.png" title="controls_statemachine_transition_to" alt="controls_statemachine_transition_to" style="cursor: pointer;" onClick="$(function(){$('#doc').load('doc/en-GB/controls_statemachine_transition_to.html');});"></image></p>
<p><image src="doc/en-GB/img/controls_statemachine_transition_from.png" title="controls_statemachine_transition_from" alt="controls_statemachine_transition_from" style="cursor: pointer;" onClick="$(function(){$('#doc').load('doc/en-GB/controls_statemachine_transition_from.html');});"></image></p>
<h4>Requirements</h4>
Facilino's License
<h4>Mutator</h4>
Adds new states to the state machine. The initial states are active at startup:
<h5>Container</h5>
<p><image src="doc/en-GB/img/controls_statemachine_ss.png" title="controls_statemachine_ss" alt="controls_statemachine_ss"></image></p>
<h5>Elements</h5>
<p><image src="doc/en-GB/img/controls_statemachine_initial_state.png" title="controls_statemachine_initial_state" alt="controls_statemachine_initial_state"></image></p>
<p><image src="doc/en-GB/img/controls_statemachine_state.png" title="controls_statemachine_state" alt="controls_statemachine_state"></image></p>
<h4>Stacks</h4>
<ul>
  <li>State: Set up instructions to execute in case the corresponding state is active.</li>
</ul>
<h4>Example 1</h4>
This example controls the activation or deactivation of a motor with a simple two-state START / STOP machine. In state 0 (initially active) the motor will be deactivated, while in state 1, the motor will be activated. The transition conditions from one state to another are defined by the transition instructions. Specifically, to move from state 0 to state 1, we must press the button connected to pin 2 (RUN), while to move from state 1 to 0, we will press the button connected to pin 3 (STOP).
<div class="button_wrapper">
<p><button align="center" class="button" style="cursor: pointer;" onClick="openFunction('doc/examples/controls_statemachine_example1.bly')">Open</button></p>
All changes will be lost!
</div>
<h5>Circuit</h5>
<image src="doc/circuits/relay_buttons_example_bb.png" title="relay_buttons_example_bb" alt="relay_buttons_example_bb"></image>
<h5>Grafcet</h5>
<image src="doc/common/controls_statemachine_grafcet1.png" title="controls_statemachine_grafcet1" alt="controls_statemachine_grafcet1"></image>
<h5>Facilino Code</h5>
<image src="doc/en-GB/img/controls_statemachine_example1.png" title="controls_statemachine_example1" alt="controls_statemachine_example1"></image>
<h4>Example 2</h4>
This example controls the activation or deactivation of a motor and an LED with a single four state state machine using an AND divergence and AND convergence. In state 0 (initially active) the motor will be deactivated and the LED will be off, while in state 1, the motor will be activated. On the other hand, in state 2 the LED will be on, while in state 3 the LED will be off. The transition conditions from one state to another are defined by the transition instructions. Specifically, to switch from state 0 to state 1, we must press the button connected to pin 2, which will also activate state 2. To switch to state 3 from state 2, we must press the button connected to pin 3. The transition with states 1 and 3 activated to state 0 is immediate, since it uses a "1" (always true).
<div class="button_wrapper">
<p><button align="center" class="button" style="cursor: pointer;" onClick="openFunction('doc/examples/controls_statemachine_example2.bly')">Open</button></p>
All changes will be lost!
</div>
<h5>Circuit</h5>
<image src="doc/circuits/relay_buttons_led_example_bb.png" title="relay_buttons_led_example_bb" alt="relay_buttons_led_example_bb"></image>
<h5>Grafcet</h5>
<image src="doc/common/controls_statemachine_grafcet2.png" title="controls_statemachine_grafcet2" alt="controls_statemachine_grafcet2"></image>
<h5>Facilino Code</h5>
<image src="doc/en-GB/img/controls_statemachine_example2.png" title="controls_statemachine_example2" alt="controls_statemachine_example2"></image>
<h4>Example 3</h4>
This example controls the activation or deactivation of two motors with a single three-state state machine using an OR divergence and OR convergence, so that only one of the two can be active. In state 0 (initially active) the motors will be deactivated, while in state 1, motor 1 will be activated (and motor 2 will be deactivated) and in state 2, motor 2 will be activated (and motor 1 will be deactivated). The transition conditions from one state to another are defined by the transition instructions. Specifically, to go from state 0 to state 1, we must press the button connected to pin 2. To go to state 2 we must press the button connected to pin 3. The button connected to pin 4 will disable either of the two previous states, that is state 1 or 2.
<div class="button_wrapper">
<p><button align="center" class="button" style="cursor: pointer;" onClick="openFunction('doc/examples/controls_statemachine_example3.bly')">Open</button></p>
All changes will be lost!
</div>
<h5>Circuit</h5>
<image src="doc/circuits/relay_buttons3_example_bb.png" title="relay_buttons3_example_bb" alt="relay_buttons3_example_bb"></image>
<h5>Grafcet</h5>
<image src="doc/common/controls_statemachine_grafcet3.png" title="controls_statemachine_grafcet3" alt="controls_statemachine_grafcet3"></image>
<h5>Facilino Code</h5>
<image src="doc/en-GB/img/controls_statemachine_example3.png" title="controls_statemachine_example3" alt="controls_statemachine_example3"></image>
<h4>Example 4</h4>
This example controls the activation or deactivation of two motors with a single four state machine (functionally identical to the previous example but with two independent state machines). In state 0 (initially active), motor 1 will be deactivated, while in state 1, motor 1 will be activated. On the other hand, in state 2 (initially active) the motor 2 will be deactivated, while in state 3 the motor will be active. The transition conditions from one state to another are defined by the transition instructions. Specifically, to go from state 0 to state 1, we must press the button connected to pin 2. To go to state 3 we must press the button connected to pin 3. The button connected to pin 4 will disable any of the two active states, either state 1 or 3.
<div class="button_wrapper">
<p><button align="center" class="button" style="cursor: pointer;" onClick="openFunction('doc/examples/controls_statemachine_example4.bly')">Open</button></p>
All changes will be lost!
</div>
<h5>Circuit</h5>
<image src="doc/circuits/relay_buttons3_example_bb.png" title="relay_buttons3_example_bb" alt="relay_buttons3_example_bb"></image>
<h5>Grafcet</h5>
<image src="doc/common/controls_statemachine_grafcet4.png" title="controls_statemachine_grafcet4" alt="controls_statemachine_grafcet4"></image>
<h5>Facilino Code</h5>
<image src="doc/en-GB/img/controls_statemachine_example4.png" title="controls_statemachine_example4" alt="controls_statemachine_example4"></image>
<script>
function openFunction(bly) {
    $.ajax({
        type: "GET" ,
        url: bly ,
        dataType: "xml" ,
        success: function(xml) {
			var txt = new XMLSerializer().serializeToString(xml);
			Blockly.mainWorkspace.clear();
			var xmlDOM = Blockly.Xml.textToDom(txt);
			Blockly.Xml.domToWorkspace(xmlDOM,Blockly.getMainWorkspace());
        }
    });
}
</script><p><image src="doc/common/home.png" title="home" alt="home" style="cursor: pointer;" onClick="$(function(){$('#doc').load('doc/en-GB/index.html');});"></image> | <a href="#up"><image src="doc/common/up.png" title="up"></image></a> | <image src="doc/common/category.png" title="category" alt="category" style="cursor: pointer;" onClick="$(function(){$('#doc').load('doc/en-GB/categories.html');});"></image> | <image src="doc/common/language.png" title="Language" alt="Language" style="cursor: pointer;" onClick="alert('Do you want to colaborate in translating Facilino to your language? Please, contact with soporte@roboticafacil.es')"></image> | <image src="doc/common/bug-fixing.png" title="bug-fixing" alt="bug-fixing" style="cursor: pointer;" onClick="alert('Have you found a bug? Please, contact with soporte@roboticafacil.es')"></image></p>
</body>
</html>