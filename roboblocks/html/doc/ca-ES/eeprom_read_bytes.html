<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'/>
<style>.button_wrapper {
  text-align: center;
  color: red;
}
.button {
  background-color: #2e2efe;
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
}
 h4 { margin-top: 20px; }
 h5 { margin-top: 10px;}

</style>
<script>
function openFunction(bly) {
    $.ajax({
        type: "GET" ,
        url: bly ,
        dataType: "xml" , async: false,
        success: function(xml) {
			var txt = new XMLSerializer().serializeToString(xml);
			Blockly.mainWorkspace.clear();
			var xmlDOM = Blockly.Xml.textToDom(txt);
			Blockly.Xml.domToWorkspace(xmlDOM,Blockly.getMainWorkspace());
        }
    });
}
function injectInstruction(block,blockDiv) {
	var instructionPreview = document.getElementById(blockDiv);
	var mainWorkspace = Blockly.inject(blockDiv, {readOnly:true, collapse: false});
	mainWorkspace.clear();
	var block = mainWorkspace.newBlock(block);
	block.initSvg();
	block.render();
	block.setMovable(false);
	block.setDeletable(false);
	block.moveBy(15, 10);
	var bbox = block.getHeightWidth();
	instructionPreview.style.height = (bbox.height+50)+ 'px';
	instructionPreview.style.width = (bbox.width+50) + 'px';
	window.dispatchEvent(new Event('resize'));
}
function injectExample(example,exampleDiv) {
  var instructionPreview = document.getElementById(exampleDiv);
	var mainWorkspace = Blockly.inject(exampleDiv, {readOnly:true, collapse: false});
	openFunction('doc/examples/'+example);
	var bbox = mainWorkspace.svgBlockCanvas_.getBBox();
instructionPreview.style.height = (bbox.height+25)+ 'px';
instructionPreview.style.width = (bbox.width+25) + 'px';

	window.dispatchEvent(new Event('resize'));
}
</script>
</head>
<body>
<h3 id="up">Llig octets de addreça EEPROM</h3>
<h4>Instrucció</h4>
<div id='blocklyInstruction'></div>
<script>injectInstruction('eeprom_read_bytes','blocklyInstruction');</script>
<h4>Descripció</h4>
<p>Arduino incluye una addreça EEPROM per a enmagatzemar dades de forma permanente. Esta instrucció lee octets a partir de la dirección de addreça indicada i almacena su valor en la variable tipus vector proporcionada. Dependiendo del tipus de variable, el nombre total de octets a leer puede variar. Así pues, si una variable tipus vector tiene una longitud de <em>n</em> elements, aleshores es llegiran <em>n</em>x<b>sizeof</b>(<em>tipus variable</em>). El tamany d'un 'octet' i 'caracter' es 1, el tamany d'un 'sencer curt' es 2, el tamany d'un 'sencer' es 4, el tamany d'un 'sencer llarg' es 8, el tamany d'un 'decimal' es 4.</p>
<h4>Entrades</h4>
<ul>
<li>Variable: Variable vector. La longitud i el tipus de variable determinan el núero total de octets a leer.</li>
<li>Dirección: Dirección del bloque de addreça. Dependiendo del MCU d'Arduino, el tamany de la addreça EEPROM puede variar, así pues se recomienda acceder a la documentación d'Arduino per a más información.</li>
</ul>
<h4>Exemple</h4>
Aquest exemple mostra alguna de les funcionalidades de les instruccions per al manejo de la addreça EEPROM. El exemple està dividido en dos programas diferents. El primero escribe unos dades en la addreça EEPROM a partir de la dirección 0. Una vez el código se ha subido i ejecutado, podemos subir el código per al segundo exemple per a leer els dades. En este sentido, el segundo exemple lee els quatre primeros octets (a partir de la dirección 0) i sus valores se almacenan en un vector i es mostren per la consola. Además, el dato en la dirección 0x04 se lee de forma individual i també se mostra.
<p><small><b>Primer programa</b></small></p>
<div class="button_wrapper">
<p><button align="center" class="button" style="cursor: pointer;" onClick="openFunction('doc/examples/demo_eeprom_write.bly')">Obrir</button></p>
Es perdran tots els canvis!
</div>
<p><small><b>Segon programa</b></small></p>
<div class="button_wrapper">
<p><button align="center" class="button" style="cursor: pointer;" onClick="openFunction('doc/examples/demo_eeprom_read.bly')">Obrir</button></p>
Es perdran tots els canvis!
</div>
<h5>Circuit</h5>
<image src="doc/circuits/nano_example_bb.png" title="nano_example" alt="nano_example"></image>
<h5>Codi Facilino</h5>
<p><small><b>Primer programa</b></small></p>
<div id='example1'></div>
<script>injectExample('demo_eeprom_write.bly','example1');</script>
<p><small><b>Segon programa</b></small></p>
<div id='example2'></div>
<script>injectExample('demo_eeprom_read.bly','example2');</script>
<p><image src="doc/common/home.png" title="inici" alt="home" style="cursor: pointer;" onClick='$(function(){$("#doc").load("doc/ca-ES/index.html");});'></image> | <image src="doc/common/category.png" title="categoria" alt="category" style="cursor: pointer;" onClick='$(function(){$("#doc").load("doc/ca-ES/categories.html");});'></image> | <image src="doc/common/settings.png" title="settings" alt="settings" style="cursor: pointer;" onClick='$(function(){$("#doc").load("doc/ca-ES/settings.html");});'></image> | <image src="doc/common/language.png" title="language" alt="language" style="cursor: pointer;" onClick='alert("Vols col·laborar en traduir Facilino al teu idioma? Per favor, contacta amb soporte@roboticafacil.es")'></image> | <image src="doc/common/bug-fixing.png" title="bug-fixing" alt="bug-fixing" style="cursor: pointer;" onClick='alert("Has trobat alguna errada? Per favor, contacta amb soporte@roboticafacil.es")'></image> | <image src="doc/common/info.png" title="al respecte de" alt="al respecte de" style="cursor: pointer;" onClick="$(function(){$('#doc').load('doc/ca-ES/about.html');});"></image></p>
</body>
</html>