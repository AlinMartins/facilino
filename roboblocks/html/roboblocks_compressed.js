!function(e){"function"==typeof define&&define.amd?define(["underscore","blockly-bq","blockly.blocks"],e):e(_,window.Blockly,window.Blocks)}(function(_,Blockly,Blocks){var load=function(options){RoboBlocks.locales={defaultLanguage:{},languages:[]},RoboBlocks.locales.getLang=function(){return this.defaultLanguage.lngCode},RoboBlocks.locales.getKey=function(e){return this.defaultLanguage[e]},RoboBlocks.getHelpUrl=function(e){return'<script>$(function(){var file = "doc/"+roboblocksLanguage+"/'+e+'.html"; $.ajax({url:file,async:false,type:"HEAD",error: function(){file="doc/en-GB/'+e+'.html";},success: function(){}}); $("#doc").load(file);});</script>'},RoboBlocks.locales.initialize=function(){var e,o,t=options.lang||window.roboblocksLanguage||"en-GB";return $.ajax({url:"lang/facilino.json",dataType:"text",async:!1}).done(function(l){e=$.parseJSON(l),o=e.langs[t].keys}),this.languages=e.langs,this.defaultLanguage=o,this.defaultLanguage.lngCode=t,this},RoboBlocks.locales.initialize(),RoboBlocks.variables={},RoboBlocks.isVariable=function(e){for(var o in Blockly.Variables.allUsedVariables)if(Blockly.Variables.allUsedVariables[o]===e)return!0;return void 0!==RoboBlocks.variables[e]?!0:e.search("digitalRead\\(")>=0||e.search("analogRead\\(")>=0?!0:!1},RoboBlocks.findPinMode=function(e){var o="";e=e.split(";\n");for(var t in e)e[t].search("pinMode")>=0?o+=e[t]+";\n":e=e[t];return{code:o,pin:e}},RoboBlocks.LANG_COLOUR_DISTANCE="#D04141",RoboBlocks.LANG_COLOUR_SOUND="#CC7B44",RoboBlocks.LANG_COLOUR_MOVEMENT="#CECE42",RoboBlocks.LANG_COLOUR_LCD="#ACCE42",RoboBlocks.LANG_COLOUR_CONTROL="#44CC44",RoboBlocks.LANG_COLOUR_LOGIC="#42CE91",RoboBlocks.LANG_COLOUR_MATH="#42CBCE",RoboBlocks.LANG_COLOUR_TEXT="#42A3CE",RoboBlocks.LANG_COLOUR_COMMUNICATION="#4263CE",RoboBlocks.LANG_COLOUR_ADVANCED="#9142CE",RoboBlocks.LANG_COLOUR_VARIABLES="#B244CC",RoboBlocks.LANG_COLOUR_PROCEDURES="#CE42B3",RoboBlocks.LANG_COLOUR_LIGHT="#FF8A00",RoboBlocks.LANG_COLOUR_AMBIENT="#99CCFF",RoboBlocks.LANG_COLOUR_HTML="#BDBDBD",RoboBlocks.LANG_COLOUR_BLOCKS="#FF00FF";var profiles={arduino:{description:"Standard-compatible board",digital:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"]],pwm:[["3","3"],["5","5"],["6","6"],["9","9"],["10","10"],["11","11"]],analog:[["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"],["A6","A6"],["A7","A7"]],serial:9600},arduino_mega:{description:"Mega-compatible board"}};profiles["default"]=profiles.arduino,Blockly.createToolbox=function(){var e={};for(var o in this.Blocks)if(this.Blocks.hasOwnProperty(o)&&this.Blocks[o]instanceof Object&&this.Blocks[o].category){var t=this.Blocks[o].category;e[t]=e[t]||[],e[t].push(o)}var l='<xml id="toolbox" style="display: none">',n=function(e){l+='<block type="'+e+'"></block>'};for(o in e)e.hasOwnProperty(o)&&(l+='<category id="'+o+'" name="'+o+'">',e[o].forEach(n),l+="</category>");return l+="</xml>"},Blockly.createToolboxColours=function(){var e={};for(var o in this.Blocks)if(this.Blocks.hasOwnProperty(o)&&this.Blocks[o]instanceof Object&&this.Blocks[o].category){var t=this.Blocks[o].category;e[t]=e[t]||[],void 0!==this.Blocks[o].colour&&e[t].push(this.Blocks[o].colour)}return e[t]},Blockly.exportAllBlocks=function(){function e(e){$.ajax({type:"GET",url:e,dataType:"xml",success:function(o){var t=(new XMLSerializer).serializeToString(o);t=t.replace('<xml xmlns="http://www.w3.org/1999/xhtml">',""),t=t.replace("</xml>",""),document.getElementById("startBlocks").innerHTML=t,Blockly.mainWorkspace.clear(),Blockly.Xml.domToWorkspace(document.getElementById("startBlocks"),Blockly.getMainWorkspace());var l=document.getElementsByClassName("blocklyBlockCanvas")[0].getBBox(),n=l.width+20,i=l.height+20,s=e;s=s.replace("bly","png"),s=s.replace("doc/examples/",""),u+="phantomjs rasterize.js file:///C:/Users/leoaran/Dropbox/DYOR/DYOR/Facilino/src/facilino/roboblocks/html/show_example.html?name="+e+" doc/"+roboblocksLanguage+"/img/"+s+" "+n+" "+i+"\n"},async:!1})}var o={},t=[],l=[],n=[];for(var i in this.Blocks)if(this.Blocks.hasOwnProperty(i)&&this.Blocks[i]instanceof Object&&this.Blocks[i].category){var s=this.Blocks[i].category;if(o[s]=o[s]||[],o[s].push(i),"undefined"!=typeof this.Blocks[i]&&"undefined"!=typeof this.Blocks[i].examples)for(example in this.Blocks[i].examples)""!==this.Blocks[i].examples[example]&&(n[this.Blocks[i].examples[example]]||(n[this.Blocks[i].examples[example]]=!0,l.push(this.Blocks[i].examples[example])))}else this.Blocks.hasOwnProperty(i)&&this.Blocks[i]instanceof Object&&t.push(i);var _,a="",c="file:///C:/Users/leoaran/Dropbox/DYOR/DYOR/Facilino/src/facilino/roboblocks/html/phantom_script.bat";makeTextFile=function(e){var o=new Blob([e],{type:"text/plain"});return null!==c&&window.URL.revokeObjectURL(c),c=window.URL.createObjectURL(o)};var r=function(e){a='<block type="'+e+'" deletable="true"></block>',_=e,console.log(e),document.getElementById("startBlocks").innerHTML=a,Blockly.Xml.domToWorkspace(document.getElementById("startBlocks"),Blockly.getMainWorkspace());var o=document.getElementsByClassName("blocklyBlockCanvas")[0].getBBox(),t=o.width+20,l=o.height+20;u+="phantomjs rasterize.js file:///C:/Users/leoaran/Dropbox/DYOR/DYOR/Facilino/src/facilino/roboblocks/html/show_block.html?name="+_+" doc/"+roboblocksLanguage+"/img/"+_+".png "+t+" "+l+"\n",Blockly.getMainWorkspace().clear()},u="";for(i in o)o.hasOwnProperty(i)&&o[i].forEach(r);for(i in t){try{r(t[i])}catch(p){}document.getElementById("startBlocks").innerHTML="",Blockly.getMainWorkspace().clear()}for(example in l)e("doc/examples/"+l[example]);return window.open(makeTextFile(u),"_blank"),a},this.JST=this.JST||{},this.JST.advanced_conversion=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=value_num)?"":__t)+","+(null==(__t=convertion)?"":__t);return __p},this.JST.advanced_map=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="map("+(null==(__t=num)?"":__t)+","+(null==(__t=from_min)?"":__t)+","+(null==(__t=from_max)?"":__t)+","+(null==(__t=to_min)?"":__t)+","+(null==(__t=to_max)?"":__t)+")";return __p},this.JST.base_delay=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="delay("+(null==(__t=delay_time)?"":__t)+");\n";return __p},this.JST.base_map=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="map("+(null==(__t=value_num)?"":__t)+",0,1023,0,"+(null==(__t=value_dmax)?"":__t)+")";return __p},this.JST.base_millis=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="millis()\n";return __p},this.JST.bq_bat=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="Distance("+(null==(__t=trigger_pin)?"":__t)+","+(null==(__t=echo_pin)?"":__t)+")";return __p},this.JST.bq_bat_definitions_distance=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="long Distance(int trigger_pin, int echo_pin)\n{\n  long microseconds = TP_init(trigger_pin, echo_pin);\n  long distance;\n  distance = microseconds/29/2;\n  if (distance == 0){\n    distance = 999;\n  }\n  return distance;\n}\n";return __p},this.JST.bq_bat_definitions_tp_init=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="//bqBAT\nlong TP_init(int trigger_pin, int echo_pin)\n{\n  digitalWrite(trigger_pin, LOW);\n  delayMicroseconds(2);\n  digitalWrite(trigger_pin, HIGH);\n  delayMicroseconds(10);\n  digitalWrite(trigger_pin, LOW);\n  long microseconds = pulseIn(echo_pin ,HIGH);\n  return microseconds;\n}\n";return __p},this.JST.bq_bat_setups_echo=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode( "+(null==(__t=echo_pin)?"":__t)+" , INPUT );\n";return __p},this.JST.bq_bat_setups_trigger=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode( "+(null==(__t=trigger_pin)?"":__t)+" , OUTPUT );\n";return __p},this.JST.bq_bluetooth_def_definitions=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="#include <SoftwareSerial.h>";return __p},this.JST.bq_bluetooth_def_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",INPUT);\n  pinMode("+(null==(__t=NextPIN)?"":__t)+", OUTPUT);\n  _blueToothSerial.begin("+(null==(__t=baud_rate)?"":__t)+");\n  _blueToothSerial.flush();\n";return __p},this.JST.bq_button=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.bq_button_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",INPUT_PULLUP);\n";return __p},this.JST.bq_buttons=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="  adc_key_in =analogRead("+(null==(__t=dropdown_pin)?"":__t)+");\n  key = get_key(adc_key_in);\n  if (key != oldkey)\n  {\n    delay(50);\n    adc_key_in = analogRead("+(null==(__t=dropdown_pin)?"":__t)+");\n    key = get_key(adc_key_in);\n    if (key != oldkey)\n    {\n      oldkey = key;\n      if (key >=0){\n        switch(key)\n        {\n          case 0:\n           "+(null==(__t=code_btn1)?"":__t)+"\n          break;\n          case 1:\n           "+(null==(__t=code_btn2)?"":__t)+"\n          break;\n          case 2:\n           "+(null==(__t=code_btn3)?"":__t)+"\n          break;\n          case 3:\n           "+(null==(__t=code_btn4)?"":__t)+"\n          break;  \n          case 4:\n           "+(null==(__t=code_btn5)?"":__t)+"\n          break;\n        }      \n      }\n    }\n  }\n";return __p},this.JST.bq_buttons_definitions=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="int get_key(unsigned int input)\n  {\n    int k;\n    for (k = 0; k < NUM_KEYS; k++)\n    {\n      if (input < adc_key_val[k])\n      {\n        return k;\n      }\n    }\n    if (k >= NUM_KEYS)k = -1;\n      return k;\n}\n";return __p},this.JST.bq_buttons_definitions_variables=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="//bqButtons\nint adc_key_val[5] ={20,50, 100, 200, 600 };\nint NUM_KEYS = 5;\nint adc_key_in;\nint key=-1;\nint oldkey=-1;\n";return __p},this.JST.bq_infrared=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.bq_infrared_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode( "+(null==(__t=dropdown_pin)?"":__t)+" , INPUT);\n";return __p},this.JST.bq_joystick=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="readJoystick_"+(null==(__t=name)?"":__t)+"()";return __p},this.JST.bq_joystick_definitions=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="int * readJoystick_"+(null==(__t=name)?"":__t)+"(){\n  _internal_readJoystick_array_"+(null==(__t=name)?"":__t)+"[0]=analogRead("+(null==(__t=pinx)?"":__t)+");\n  _internal_readJoystick_array_"+(null==(__t=name)?"":__t)+"[1]=analogRead("+(null==(__t=piny)?"":__t)+");\n  _internal_readJoystick_array_"+(null==(__t=name)?"":__t)+"[2]=digitalRead("+(null==(__t=pinbutton)?"":__t)+");\n  return _internal_readJoystick_array_"+(null==(__t=name)?"":__t)+";\n}";return __p},this.JST.bq_joystick_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode("+(null==(__t=pinbutton)?"":__t)+",INPUT_PULLUP);\n";return __p},this.JST.bq_led=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="digitalWrite("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=dropdown_stat)?"":__t)+");\n";return __p},this.JST.bq_led_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",OUTPUT);\n";return __p},this.JST.bq_photoresistor=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="analogRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.bq_piezo_buzzer=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="tone("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=dropdown_stat)?"":__t)+","+(null==(__t=delay_time)?"":__t)+");\ndelay("+(null==(__t=delay_time)?"":__t)+");\n";return __p},this.JST.bq_piezo_buzzerav=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="tone("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=Buzztone)?"":__t)+","+(null==(__t=delay_time)?"":__t)+");\ndelay("+(null==(__t=delay_time)?"":__t)+");\n\n";return __p},this.JST.bq_potentiometer=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="analogRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.bt_serial_available=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="if (_blueToothSerial.available()>0){\n"+(null==(__t=branch)?"":__t)+"\n}\n";return __p},this.JST.controls_doWhile=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="do {\n"+(null==(__t=branch)?"":__t)+"\n} while ("+(null==(__t=argument0)?"":__t)+");\n";return __p},this.JST.controls_execute=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=content)?"":__t)+"\n";return __p},this.JST.controls_else=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="else {\n"+(null==(__t=branch)?"":__t)+" }";return __p},this.JST.controls_elseif=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="else if ("+(null==(__t=argument)?"":__t)+") {\n"+(null==(__t=branch)?"":__t)+" }";return __p},this.JST.controls_if=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="if ("+(null==(__t=argument)?"":__t)+") {\n"+(null==(__t=branch)?"":__t)+" }";return __p},this.JST.controls_setupLoop=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=branch)?"":__t)+"\n";return __p},this.JST.controls_whileUntil=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="while ("+(null==(__t=argument0)?"":__t)+") {\n"+(null==(__t=branch)?"":__t)+" }\n";return __p},this.JST.inout_analog_read=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="analogRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.inout_analog_read_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",INPUT);\n";return __p},this.JST.inout_analog_write=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="analogWrite("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=value_num)?"":__t)+");\n";return __p},this.JST.inout_analog_write_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",OUTPUT);\n";return __p},this.JST.inout_builtin_led=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="digitalWrite(13,"+(null==(__t=dropdown_stat)?"":__t)+");\n";return __p},this.JST.inout_builtin_led_setups=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="pinMode(13,OUTPUT);\n";return __p},this.JST.inout_digital_read=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.inout_digital_read_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",INPUT);\n";return __p},this.JST.inout_digital_write=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="digitalWrite("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=dropdown_stat)?"":__t)+");\n";return __p},this.JST.inout_digital_write_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",OUTPUT);\n";return __p},this.JST.inout_highlow=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=null==(__t=bool_value)?"":__t;return __p},this.JST.lcd_clear=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="lcd.clear();\n";return __p},this.JST.lcd_def_declare=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="LiquidCrystal lcd("+(null==(__t=lcd_1)?"":__t)+", "+(null==(__t=lcd_2)?"":__t)+", "+(null==(__t=lcd_3)?"":__t)+", "+(null==(__t=lcd_4)?"":__t)+", "+(null==(__t=lcd_5)?"":__t)+", "+(null==(__t=lcd_6)?"":__t)+");\n";return __p},this.JST.lcd_def_definitions=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="#include <Wire.h>\n#include <LiquidCrystal.h>";return __p},this.JST.lcd_def_setups=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="lcd.begin(16, 2);\nlcd.clear();\n";return __p},this.JST.lcd_print=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="lcd.print("+(null==(__t=val)?"":__t)+");\n";return __p},this.JST.lcd_print_pos=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="lcd.setCursor("+(null==(__t=ycoor)?"":__t)+","+(null==(__t=xcoor)?"":__t)+");\nlcd.print("+(null==(__t=val)?"":__t)+");\n";return __p},this.JST.lcd_setBacklight=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="lcd.setBacklight("+(null==(__t=state)?"":__t)+");\n";return __p},this.JST.logic_compare=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=argument0)?"":__t)+" "+(null==(__t=operator)?"":__t)+" "+(null==(__t=argument1)?"":__t);return __p},this.JST.logic_negate=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="!"+(null==(__t=argument0)?"":__t);return __p},this.JST.logic_operation=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=argument0)?"":__t)+" "+(null==(__t=operator)?"":__t)+" "+(null==(__t=argument1)?"":__t);return __p},this.JST.math_arithmetic=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=argument0)?"":__t)+""+(null==(__t=operator)?"":__t)+(null==(__t=argument1)?"":__t);return __p},this.JST.math_arithmetic_pow=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pow("+(null==(__t=argument0)?"":__t)+","+(null==(__t=argument1)?"":__t)+")";return __p},this.JST.math_modulo=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=argument0)?"":__t)+"%"+(null==(__t=argument1)?"":__t);return __p},this.JST.math_random_bitOut=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="unsigned int bitOut(void)\n{\n  static unsigned long firstTime=1, prev=0;\n  unsigned long bit1=0, bit0=0, x=0, port=0, limit=99;\n  if (firstTime)\n  {\n    firstTime=0;\n    prev=analogRead(port);\n  }\n  while (limit--)\n  {\n    x=analogRead(port);\n    bit1=(prev!=x?1:0);\n    prev=x;\n    x=analogRead(port);\n    bit0=(prev!=x?1:0);\n    prev=x;\n    if (bit1!=bit0)\n      break;\n  }\n  return bit1;\n}\n";return __p},this.JST.math_random_seedOut=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="unsigned long seedOut(unsigned int noOfBits)\n{\n  unsigned long seed=0;\n  for (int i=0;i<noOfBits;++i)\n    seed = (seed<<1) | bitOut();\n  return seed;\n}\n";return __p},this.JST.math_random=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="random("+(null==(__t=value_num)?"":__t)+","+(null==(__t=value_dmax)?"":__t)+")";return __p},this.JST.procedures_callnoreturn=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=funcName)?"":__t)+"("+(null==(__t=funcArgs)?"":__t)+");\n";return __p},this.JST.procedures_callreturn=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=funcName)?"":__t)+"("+(null==(__t=funcArgs)?"":__t)+")";return __p},this.JST.procedures_defnoreturn=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=returnType)?"":__t)+" "+(null==(__t=funcName)?"":__t)+" ("+(null==(__t=args)?"":__t)+") {\n"+(null==(__t=branch)?"":__t)+" }\n";return __p},this.JST.procedures_defreturn=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=returnType)?"":__t)+" "+(null==(__t=funcName)?"":__t)+" ("+(null==(__t=args)?"":__t)+") {\n"+(null==(__t=branch)?"":__t)+"\n"+(null==(__t=returnValue)?"":__t)+" }\n";return __p},this.JST.serial_available=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="if (Serial.available()>0){\n"+(null==(__t=branch)?"":__t)+"\n}\n";return __p},this.JST.serial_parseint=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="Serial.parseInt()\n";return __p},this.JST.serial_parseint_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="Serial.begin("+(null==(__t=bitrate)?"":__t)+");\n";return __p},this.JST.serial_print=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="Serial.print("+(null==(__t=content)?"":__t)+");\n";return __p},this.JST.serial_print_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="Serial.begin("+(null==(__t=bitrate)?"":__t)+");\n";return __p},this.JST.serial_println=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="Serial.println("+(null==(__t=content)?"":__t)+");\n";return __p},this.JST.serial_println_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="Serial.begin("+(null==(__t=bitrate)?"":__t)+");\n";return __p},this.JST.serial_read=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="Serial.read()";return __p},this.JST.serial_read_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="Serial.begin("+(null==(__t=bitrate)?"":__t)+");\n";return __p},this.JST.serial_readstring=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="Serial.readString()";return __p},this.JST.serial_readstring_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="Serial.begin("+(null==(__t=bitrate)?"":__t)+");\n";return __p},this.JST.serial_special=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=null==(__t=char)?"":__t;return __p},this.JST.servo_move=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="servos["+(null==(__t=dropdown_pin)?"":__t)+"].write("+(null==(__t=value_degree)?"":__t)+");\ndelay("+(null==(__t=delay_time)?"":__t)+");\n";return __p},this.JST.servo_move_definitions_include=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="#include <Servo.h>\n\nServo servos[13];";return __p},this.JST.servo_move_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="servos["+(null==(__t=dropdown_pin)?"":__t)+"].attach("+(null==(__t=dropdown_pin)?"":__t)+");";return __p},this.JST.text_equalsIgnoreCase=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=string1)?"":__t)+".equalsIgnoreCase("+(null==(__t=string2)?"":__t)+")";return __p},this.JST.text_length=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=argument0)?"":__t)+".length()";return __p},this.JST.text_substring=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=string1)?"":__t)+".substring("+(null==(__t=from)?"":__t)+","+(null==(__t=to)?"":__t)+")";return __p},this.JST.variables_set=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=varName)?"":__t)+"="+(null==(__t=varValue)?"":__t)+";\n";return __p},this.JST.zum_button=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.zum_button_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=pullup)?"":__t)+");\n";return __p},this.JST.zum_follower=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="if(digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")==HIGH)\n{\n  "+(null==(__t=code_btn1)?"":__t)+"\n}\nif(digitalRead("+(null==(__t=NextPIN)?"":__t)+")==HIGH)\n{\n  "+(null==(__t=code_btn2)?"":__t)+"\n}\n";return __p},this.JST.zum_follower_setups_nextpin=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode( "+(null==(__t=NextPIN)?"":__t)+" , INPUT);\n";return __p},this.JST.zum_follower_setups_pin=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode( "+(null==(__t=dropdown_pin)?"":__t)+" , INPUT);\n";return __p},this.JST.zum_infrared=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.zum_infrared_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode( "+(null==(__t=dropdown_pin)?"":__t)+" , INPUT);\n";return __p},this.JST.zum_led=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="digitalWrite("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=dropdown_stat)?"":__t)+");\n";return __p},this.JST.zum_led_setups=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",OUTPUT);\n";return __p},this.JST.zum_photoresistor=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="analogRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.zum_piezo_buzzer=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="tone("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=dropdown_stat)?"":__t)+","+(null==(__t=delay_time)?"":__t)+");\ndelay("+(null==(__t=delay_time)?"":__t)+");\n";return __p},this.JST.zum_piezo_buzzerav=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="tone("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=Buzztone)?"":__t)+","+(null==(__t=delay_time)?"":__t)+");\ndelay("+(null==(__t=delay_time)?"":__t)+");\n\n";return __p},this.JST.zum_potentiometer=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="analogRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p};var JST=this.JST;Blockly.Arduino.procedures_callnoreturn=function(){var e,o=this.getFieldValue("PROCEDURES"),t=[],l="";try{for(var n=0;n<this.getVariables(o).length;n++)t[n]=Blockly.Arduino.valueToCode(this,"ARG"+n,Blockly.Arduino.ORDER_NONE)||"",e=RoboBlocks.findPinMode(t[n]),l+=e.code,t[n]=e.pin}catch(i){}var s=t.join(", ");return l+=JST.procedures_callnoreturn({funcName:o,funcArgs:s})},Blockly.Blocks.procedures_callnoreturn={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_callnoreturn"),examples:["procedures_callnoreturn_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.appendDummyInput("DUMMY").appendField(new Blockly.FieldDropdown(this.getProcedures()),"PROCEDURES"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_CALLNORETURN_TOOLTIP")),this.arguments_=this.getVariables(this.getFieldValue("PROCEDURES")),this.quarkConnections_=null,this.quarkArguments_=null,this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES")),this.setInputsInline(!1)},validName:function(e){if(e&&e.length>0){for(var o=0;o<e.length&&!isNaN(parseFloat(e[o]));)e=e.substring(1,e.length);for(e=e.replace(/([ ])/g,"_"),e=e.replace(/([áàâä])/g,"a"),e=e.replace(/([éèêë])/g,"e"),e=e.replace(/([íìîï])/g,"i"),e=e.replace(/([óòôö])/g,"o"),e=e.replace(/([úùûü])/g,"u"),e=e.replace(/([ñ])/g,"n"),e=e.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|<>\-\&\Ç\%\=\~\{\}\¿\¡\"\@\:\;\-\"\·\|\º\ª\¨\'\·\?\?\ç\`\´\¨\^])/g,""),o=0;o<e.length&&!isNaN(parseFloat(e[o]));)e=e.substring(1,e.length)}return e},getProcedures:function(){var e=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),o=[];if(e[0].length>0)for(var t in e[0]){var l=e[0][t][0];l=this.validName(l),o.push([l,l])}else o.push([RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFNORETURN_PROCEDURE"),RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFNORETURN_PROCEDURE")]);return o},maxVariableNumber:function(){var e=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),o=[],t=0;if(e[0].length>0||e[1].length>0){for(var l in e[0])e[0][l][1].length>t&&(t=e[0][l][1].length);return t}o.push(["",""])},getVariables:function(e){try{var o=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),t=[];if(o[0].length>0){for(var l in o[0])if(o[0][l][0]===e)return o[0][l][1]}else t.push(["",""])}catch(n){}},exists:function(){var e=Blockly.Procedures.allProcedures(Blockly.mainWorkspace);if(!(e[0].length>0))return!1;for(var o in e[0])if(e[0][o][0]===this.getFieldValue("PROCEDURES"))return!0},onchange:function(){if(this.workspace)if(this.getFieldValue("PROCEDURES")!==this.last_procedure&&this.getFieldValue("PROCEDURES")?(this.changeVariables(),this.last_procedure=this.getFieldValue("PROCEDURES"),this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES"))):this.getVariables(this.getFieldValue("PROCEDURES"))!==this.last_variables&&(this.addVariables(),this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES")),this.last_procedure=this.getFieldValue("PROCEDURES")),this.exists())try{this.setWarningText(null)}catch(e){}else try{this.setWarningText(RoboBlocks.locales.getKey("LANG_PROCEDURES_CALL_WITHOUT_DEFINITION"))}catch(e){}},addVariables:function(){var e=this.getVariables(this.getFieldValue("PROCEDURES")),o=0;if(e){if(this.last_variables||(this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES"))),e.length>=this.last_variables.length)o=e.length;else if(this.last_variables)try{o=this.last_variables.length}catch(t){}for(var l=0;o>l;l++)null===this.getInput("ARG"+l)?this.appendValueInput("ARG"+l).appendField(e[l],"ARG_NAME"+l).setAlign(Blockly.ALIGN_RIGHT):e[l]&&this.getFieldValue("ARG_NAME"+l)?this.setFieldValue(e[l],"ARG_NAME"+l):this.removeInput("ARG"+l);this.arguments_=e}},renameProcedure:function(e,o){if(this.last_procedure){var t=this.getProcedures();for(var l in t)Blockly.Names.equals(e,t[l][0])&&(this.removeInput("DUMMY"),this.appendDummyInput("DUMMY").appendField(new Blockly.FieldDropdown(this.getProcedures()),"PROCEDURES"),this.addVariables());this.last_procedure===e&&(this.last_procedure=o);try{this.setFieldValue(this.last_procedure,"PROCEDURES")}catch(n){}}},changeVariables:function(){for(var e=this.getVariables(this.getFieldValue("PROCEDURES")),o=0;o<this.maxVariableNumber()&&null!==this.getInput("ARG"+o);o++)this.removeInput("ARG"+o);for(var t in e)this.appendValueInput("ARG"+t).appendField(e[t]).setAlign(Blockly.ALIGN_RIGHT);this.arguments_=e},mutationToDom:function(){var e=document.createElement("mutation");e.setAttribute("name",this.getFieldValue("PROCEDURES")),"undefined"==typeof this.arguments_&&(this.arguments_=this.getVariables(this.getFieldValue("PROCEDURES"))),"undefined"==typeof this.arguments_&&(this.arguments_=[]);for(var o=0;o<this.arguments_.length;o++){var t=document.createElement("arg");t.setAttribute("name",this.arguments_[o]),e.appendChild(t)}return e},domToMutation:function(e){this.xmlElement=e;var o=e.getAttribute("name");this.last_procedure=o,this.setFieldValue(o,"PROCEDURES");for(var t=0;t<e.childNodes.length;t++)this.appendValueInput("ARG"+t).appendField(e.childNodes[t].getAttribute("name"),"ARG_NAME"+t).setAlign(Blockly.ALIGN_RIGHT)}},Blockly.Arduino.procedures_callreturn=function(){for(var e,o=this.getFieldValue("PROCEDURES"),t=[],l="",n=0;n<this.getVariables(o).length;n++)t[n]=Blockly.Arduino.valueToCode(this,"ARG"+n,Blockly.Arduino.ORDER_NONE)||"null",e=RoboBlocks.findPinMode(t[n]),l+=e.code,t[n]=e.pin;var i=t.join(", ");return l+=JST.procedures_callreturn({funcName:o,funcArgs:i}),[l,Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Blocks.procedures_callreturn={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_callreturn"),examples:["procedures_callreturn_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.appendDummyInput("DUMMY").appendField(new Blockly.FieldDropdown(this.getProcedures()),"PROCEDURES"),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_CALLRETURN_TOOLTIP")),this.arguments_=this.getVariables(this.getFieldValue("PROCEDURES")),this.quarkConnections_=null,this.quarkArguments_=null,this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES"))},validName:function(e){if(e&&e.length>0){for(var o=0;o<e.length&&!isNaN(parseFloat(e[o]));)e=e.substring(1,e.length);for(e=e.replace(/([ ])/g,"_"),e=e.replace(/([áàâä])/g,"a"),e=e.replace(/([éèêë])/g,"e"),
e=e.replace(/([íìîï])/g,"i"),e=e.replace(/([óòôö])/g,"o"),e=e.replace(/([úùûü])/g,"u"),e=e.replace(/([ñ])/g,"n"),e=e.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|<>\-\&\Ç\%\=\~\{\}\¿\¡\"\@\:\;\-\"\·\|\º\ª\¨\'\·\?\?\ç\`\´\¨\^])/g,""),o=0;o<e.length&&!isNaN(parseFloat(e[o]));)e=e.substring(1,e.length);for(var t in Blockly.Arduino.RESERVED_WORDS_){var l=Blockly.Arduino.RESERVED_WORDS_.split(",");if(e===l[t]){this.setWarningText(RoboBlocks.locales.getKey("LANG_RESERVED_WORDS")),e="";break}this.setWarningText(null)}}return e},getProcedures:function(){var e=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),o=[];if(e[1].length>0)for(var t in e[1]){var l=e[1][t][0];l=this.validName(l),o.push([l,l])}else o.push([RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_PROCEDURE"),RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_PROCEDURE")]);return o},maxVariableNumber:function(){var e=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),o=[],t=0;if(e[1].length>0){for(var l in e[1])e[1][l][1].length>t&&(t=e[1][l][1].length);return t}o.push(["",""])},getVariables:function(e){try{var o=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),t=[];if(o[1].length>0){for(var l in o[1])if(o[1][l][0]===e)return o[1][l][1]}else t.push(["",""])}catch(n){}},exists:function(){var e=Blockly.Procedures.allProcedures(Blockly.mainWorkspace);if(!(e[1].length>0))return!1;for(var o in e[1])if(e[1][o][0]===this.getFieldValue("PROCEDURES"))return!0},onchange:function(){if(this.workspace)if(this.getFieldValue("PROCEDURES")!==this.last_procedure&&this.getFieldValue("PROCEDURES")?(this.changeVariables(),this.last_procedure=this.getFieldValue("PROCEDURES"),this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES"))):this.getVariables(this.getFieldValue("PROCEDURES"))!==this.last_variables&&(this.addVariables(),this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES")),this.last_procedure=this.getFieldValue("PROCEDURES")),this.exists())try{this.setWarningText(null)}catch(e){}else try{this.setWarningText(RoboBlocks.locales.getKey("LANG_PROCEDURES_CALL_WITHOUT_DEFINITION"))}catch(e){}},addVariables:function(){var e=this.getVariables(this.getFieldValue("PROCEDURES")),o=0;if(e){if(this.last_variables||(this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES"))),e.length>=this.last_variables.length)o=e.length;else if(this.last_variables)try{o=this.last_variables.length}catch(t){}for(var l=0;o>l;l++)null===this.getInput("ARG"+l)?this.appendValueInput("ARG"+l).appendField(e[l],"ARG_NAME"+l).setAlign(Blockly.ALIGN_RIGHT):e[l]&&this.getFieldValue("ARG_NAME"+l)?this.setFieldValue(e[l],"ARG_NAME"+l):this.removeInput("ARG"+l);this.arguments_=e}},renameProcedure:function(e,o){if(this.last_procedure){var t=this.getProcedures();for(var l in t)Blockly.Names.equals(e,t[l][0])&&(this.removeInput("DUMMY"),this.appendDummyInput("DUMMY").appendField(new Blockly.FieldDropdown(this.getProcedures()),"PROCEDURES"));this.last_procedure===e&&(this.last_procedure=o);try{this.setFieldValue(this.last_procedure,"PROCEDURES")}catch(n){}}},changeVariables:function(){for(var e=this.getVariables(this.getFieldValue("PROCEDURES")),o=0;o<this.maxVariableNumber()&&null!==this.getInput("ARG"+o);o++)this.removeInput("ARG"+o);for(var t in e)this.appendValueInput("ARG"+t).appendField(e[t]).setAlign(Blockly.ALIGN_RIGHT);this.arguments_=e},mutationToDom:function(){var e=document.createElement("mutation");e.setAttribute("name",this.getFieldValue("PROCEDURES")),"undefined"==typeof this.arguments_&&(this.arguments_=this.getVariables(this.getFieldValue("PROCEDURES"))),"undefined"==typeof this.arguments_&&(this.arguments_=[]);for(var o=0;o<this.arguments_.length;o++){var t=document.createElement("arg");t.setAttribute("name",this.arguments_[o]),e.appendChild(t)}return e},domToMutation:function(e){this.xmlElement=e;var o=e.getAttribute("name");this.last_procedure=o,this.setFieldValue(o,"PROCEDURES");for(var t=0;t<e.childNodes.length;t++)this.appendValueInput("ARG"+t).appendField(e.childNodes[t].getAttribute("name"),"ARG_NAME"+t).setAlign(Blockly.ALIGN_RIGHT)}},Blockly.Arduino.procedures_defnoreturn=function(){var e=this.getFieldValue("NAME"),o=Blockly.Arduino.statementToCode(this,"STACK");o=o.replace(/&quot;/g,'"'),Blockly.Arduino.INFINITE_LOOP_TRAP&&(o=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+o);var t="void",l=this.paramString,n=JST.procedures_defnoreturn({returnType:t,funcName:e,args:l,branch:o});return n=Blockly.Arduino.scrub_(this,n),Blockly.Arduino.definitions_[e]=n,null},Blockly.Blocks.procedures_defnoreturn={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_defnoreturn"),examples:["procedures_callnoreturn_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES);var e=new Blockly.FieldTextInput("",Blockly.Procedures.rename);e.setSpellcheck(!1),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFNORETURN_PROCEDURE")).appendField(e,"NAME").appendField("","PARAMS"),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFNORETURN_TOOLTIP")),this.arguments_=[],this.type_arguments_=[],this.setStatements_(!0),this.setInputsInline(!1)},setStatements_:function(e){this.hasStatements_!==e&&(e?(this.appendStatementInput("STACK").appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFNORETURN_DO")),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=e)},updateParams_:function(){for(var e=!1,o={},t=0;t<this.arguments_.length;t++){if(o["arg_"+this.arguments_[t].toLowerCase()]){e=!0;break}o["arg_"+this.arguments_[t].toLowerCase()]=!0}e?this.setWarningText(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEF_DUPLICATE_WARNING")):this.setWarningText(null);var l=[];for(var t in this.arguments_)try{l.push(this.type_arguments_[t]+" "+this.arguments_[t])}catch(n){}this.paramString=l.join(", "),Blockly.Events.disable();try{this.setFieldValue(this.paramString,"PARAMS")}finally{Blockly.Events.enable()}},mutationToDom:function(e){var o=document.createElement("mutation");e&&o.setAttribute("name",this.getFieldValue("NAME"));for(var t=0;t<this.arguments_.length;t++){var l=document.createElement("arg_name");l.setAttribute("name",this.arguments_[t]),e&&this.paramIds_&&l.setAttribute("paramId",this.paramIds_[t]),o.appendChild(l),l=document.createElement("arg_type");try{l.setAttribute("name",this.type_arguments_[t]),e&&this.paramIds_&&l.setAttribute("paramId",this.paramIds_[t])}catch(n){}o.appendChild(l)}return this.hasStatements_||o.setAttribute("statements","false"),o},domToMutation:function(e){this.arguments_=[];for(var o,t=0;o=e.childNodes[t];t++)if("arg_name"===o.nodeName.toLowerCase()&&this.arguments_.push(o.getAttribute("name")),"arg_type"===o.nodeName.toLowerCase())try{this.type_arguments_.push(o.getAttribute("name"))}catch(l){}this.updateParams_(),Blockly.Procedures.mutateCallers(this),this.setStatements_("false"!==e.getAttribute("statements"))},decompose:function(e){var o=e.newBlock("procedures_mutatorcontainer");o.initSvg(),this.getInput("RETURN")?o.setFieldValue(this.hasStatements_?"TRUE":"FALSE","STATEMENTS"):o.getInput("STATEMENT_INPUT").setVisible(!1);for(var t=o.getInput("STACK").connection,l=0;l<this.arguments_.length;l++){var n=e.newBlock("procedures_mutatorarg");n.initSvg(),n.setFieldValue(this.type_arguments_[l],"TYPE"),n.setFieldValue(this.arguments_[l],"NAME"),n.oldLocation=l,t.connect(n.previousConnection),t=n.nextConnection}return Blockly.Procedures.mutateCallers(this),o},compose:function(e){this.arguments_=[],this.type_arguments_=[],this.paramIds_=[];for(var o=e.getInputTargetBlock("STACK");o;)this.arguments_.push(o.getFieldValue("NAME")),this.type_arguments_.push(o.getFieldValue("TYPE")),this.paramIds_.push(o.id),o=o.nextConnection&&o.nextConnection.targetBlock();this.updateParams_(),Blockly.Procedures.mutateCallers(this);var t=e.getFieldValue("STATEMENTS");if(null!==t&&(t="TRUE"==t,this.hasStatements_!=t))if(t)this.setStatements_(!0),Blockly.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null;else{var l=this.getInput("STACK").connection;if(this.statementConnection_=l.targetConnection,this.statementConnection_){var n=l.targetBlock();n.unplug(),n.bumpNeighbours_()}this.setStatements_(!1)}},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},renameVar:function(e,o){for(var t=!1,l=0;l<this.arguments_.length;l++)Blockly.Names.equals(e,this.arguments_[l])&&(this.arguments_[l]=o,t=!0);if(t&&(this.updateParams_(),this.mutator.isVisible()))for(var n,i=this.mutator.workspace_.getAllBlocks(),l=0;n=i[l];l++)"procedures_mutatorarg"==n.type&&Blockly.Names.equals(e,n.getFieldValue("NAME"))&&n.setFieldValue(o,"NAME")},validName:function(e){if(e&&e.length>0){for(var o=0;o<e.length&&!isNaN(parseFloat(e[o]));)e=e.substring(1,e.length);for(e=e.replace(/([ ])/g,"_"),e=e.replace(/([áàâä])/g,"a"),e=e.replace(/([éèêë])/g,"e"),e=e.replace(/([íìîï])/g,"i"),e=e.replace(/([óòôö])/g,"o"),e=e.replace(/([úùûü])/g,"u"),e=e.replace(/([ñ])/g,"n"),e=e.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|<>\-\&\Ç\%\=\~\{\}\¿\¡\"\@\:\;\-\"\·\|\º\ª\¨\'\·\?\?\ç\`\´\¨\^])/g,""),o=0;o<e.length&&!isNaN(parseFloat(e[o]));)e=e.substring(1,e.length);for(var t in Blockly.Arduino.RESERVED_WORDS_){if(this.reserved_words=Blockly.Arduino.RESERVED_WORDS_.split(","),e===this.reserved_words[t]){this.setWarningText(RoboBlocks.locales.getKey("LANG_RESERVED_WORDS")),e="";break}this.setWarningText(null)}}return e},customContextMenu:function(e){var o={enabled:!0},t=this.getFieldValue("NAME");o.text=Blockly.Msg.PROCEDURES_CREATE_DO.replace("%1",t);var l=goog.dom.createDom("mutation");l.setAttribute("name",t);for(var n=0;n<this.arguments_.length;n++){var i=goog.dom.createDom("arg");i.setAttribute("name",this.arguments_[n]),l.appendChild(i)}var s=goog.dom.createDom("block",null,l);if(s.setAttribute("type",this.callType_),o.callback=Blockly.ContextMenu.callbackFactory(this,s),e.push(o),!this.isCollapsed())for(var n=0;n<this.arguments_.length;n++){var o={enabled:!0},t=this.arguments_[n];o.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",t);var _=goog.dom.createDom("field",null,t);_.setAttribute("name","VAR");var s=goog.dom.createDom("block",null,_);s.setAttribute("type","variables_get"),o.callback=Blockly.ContextMenu.callbackFactory(this,s),e.push(o)}},callType_:"procedures_callnoreturn",onchange:function(){if(this.last_procedure!==this.getFieldValue("NAME")){var e=this.getFieldValue("NAME");e=this.validName(e);try{this.setFieldValue(e,"NAME")}catch(o){}this.last_procedure=e}}},Blockly.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_MUTATORCONTAINER_Field")),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new Blockly.FieldCheckbox("TRUE"),"STATEMENTS"),this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.setTooltip(""),this.contextMenu=!1}},Blockly.Blocks.procedures_mutatorarg={init:function(){var e=new Blockly.FieldTextInput("x",this.validator_);this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_MUTATORARG_Field")).appendField(new Blockly.FieldDropdown([["int","int"],["String","String"]]),"TYPE").appendField(e,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.setTooltip(""),this.contextMenu=!1,e.onFinishEditing_=this.createNewVar_,e.onFinishEditing_("x")},onchange:function(){if(this.last_variable!==this.getFieldValue("NAME")){var e=this.getFieldValue("NAME");e=this.validName(e);try{this.setFieldValue(e,"NAME")}catch(o){}this.last_variable=e}},validName:Blockly.Blocks.procedures_defnoreturn.validName,validator_:function(e){return e=e.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),e||null},createNewVar_:function(e){var o=this.sourceBlock_;o&&o.workspace&&o.workspace.options&&o.workspace.options.parentWorkspace&&o.workspace.options.parentWorkspace.createVariable(e)}},Blockly.Arduino.procedures_defreturn=function(){var e=this.getFieldValue("NAME"),o=Blockly.Arduino.statementToCode(this,"STACK");o=o.replace(/&quot;/g,'"'),Blockly.Arduino.INFINITE_LOOP_TRAP&&(o=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+o);var t=Blockly.Arduino.valueToCode(this,"RETURN",Blockly.Arduino.ORDER_NONE)||"",l="";t=t.replace(/&quot;/g,'"');var n=this.getReturnType();if(t){var i=RoboBlocks.findPinMode(t);t=i.code,t+="  return "+i.pin+";\n"}var s=this.paramString;return l+=JST.procedures_defreturn({returnType:n,funcName:e,args:s,branch:o,returnValue:t}),l=Blockly.Arduino.scrub_(this,l),Blockly.Arduino.definitions_[e]=l,null},Blockly.Blocks.procedures_defreturn={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_defreturn"),examples:["procedures_callreturn_example.bly"],init:function(){var e=new Blockly.FieldTextInput("",Blockly.Procedures.rename);e.setSpellcheck(!1),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_PROCEDURE")).appendField(e,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_RETURN")),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_TOOLTIP")),this.arguments_=[],this.setStatements_(!0),this.statementConnection_=null},isVariable:function(e){for(var o in Blockly.Variables.allUsedVariables)if(Blockly.Variables.allUsedVariables[o]===e)return!0;return!1},getReturnType:function(){var e,o=Blockly.Arduino.valueToCode(this,"RETURN",Blockly.Arduino.ORDER_NONE)||"",t=RoboBlocks.findPinMode(o);o=t.pin;var l=!1;for(var n in Blockly.Arduino.definitions_)if(Blockly.Arduino.definitions_[n].search(o+" \\(")>=0){l=!0;break}if(o||(e="void"),o.search('"')>=0)e="String";else if(l)for(n in Blockly.Arduino.definitions_)Blockly.Arduino.definitions_[n].search(o)>=0&&(e="int"===Blockly.Arduino.definitions_[n].substring(0,3)||"//b"===Blockly.Arduino.definitions_[n].substring(0,3)?"int *"===Blockly.Arduino.definitions_[n].substring(0,5)||"int _"===Blockly.Arduino.definitions_[n].substring(0,5)?"int *":"int":"Str"===Blockly.Arduino.definitions_[n].substring(0,3)?"String":"");else e=this.isVariable(o)?RoboBlocks.variables[o][0]:o.search("analogRead")>=0||o.search("digitalRead")>=0||o.search("Distanc")>=0||!isNaN(parseFloat(o))||o.search("random")>=0||o.search("map")>=0||o.search("\\[")>=0||o.search("abs")>=0||o.search("sqrt")>=0||o.search("log")>=0||o.search("log")>=0||o.search("exp")>=0||o.search("pow")>=0?"int":o.search("readJoystick")>=0||"{"===o[0]?"int *":"void";return e},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,renameVar:Blockly.Blocks.procedures_defnoreturn.renameVar,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},Blockly.Arduino.procedures_ifreturn=function(){var e=Blockly.Arduino.valueToCode(this,"CONDITION",Blockly.Arduino.ORDER_NONE)||"",o="",t=RoboBlocks.findPinMode(e);o+=t.code,e=t.pin,o+="if ("+e+") {\n";var l=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_NONE)||"";return t=RoboBlocks.findPinMode(l),o+=t.code,o+="  return ("+l+");\n",o+="}\n"},Blockly.Blocks.procedures_ifreturn={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_ifreturn"),examples:["procedures_ifreturn_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.appendValueInput("CONDITION").setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_IF")),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_RETURN")),this.appendValueInput("VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_IFRETURN_TOOLTIP")),this.hasReturnValue_=!0},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("value",Number(this.hasReturnValue_)),e},domToMutation:function(e){var o=e.getAttribute("value");this.hasReturnValue_=1===o},onchange:function(){if(this.workspace){var e=!1,o=this;do{if("procedures_defreturn"===o.type){e=!0;break}o=o.getSurroundParent()}while(o);if(e)this.setWarningText(null);else try{this.setWarningText(RoboBlocks.locales.getKey("LANG_PROCEDURES_IFRETURN_WARNING"))}catch(t){console.log("Captured error: ",t)}}}},Blockly.Arduino.procedures_return=function(){var e="",o=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_NONE)||"",t=RoboBlocks.findPinMode(o);return e+=t.code,e+="  return ("+o+");\n"},Blockly.Blocks.procedures_return={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_return"),examples:["procedures_return_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_RETURN")),this.appendValueInput("VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_RETURN_TOOLTIP")),this.hasReturnValue_=!0},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("value",Number(this.hasReturnValue_)),e},domToMutation:function(e){var o=e.getAttribute("value");this.hasReturnValue_=1===o},onchange:function(){if(this.workspace){var e=!1,o=this;do{if("procedures_defreturn"===o.type){e=!0;break}o=o.getSurroundParent()}while(o);if(e)this.setWarningText(null);else try{this.setWarningText(RoboBlocks.locales.getKey("LANG_PROCEDURES_IFRETURN_WARNING"))}catch(t){console.log("Captured error: ",t)}}}},Blockly.Arduino.base_delay=function(){var e=Blockly.Arduino.valueToCode(this,"DELAY_TIME",Blockly.Arduino.ORDER_ATOMIC),o="",t=RoboBlocks.findPinMode(e);return o+=t.code,e=t.pin,o+=JST.base_delay({delay_time:e})},Blockly.Blocks.base_delay={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),helpUrl:RoboBlocks.getHelpUrl("base_delay"),examples:["base_delay_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("DELAY_TIME",Number).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_BASE_DELAY_WAIT")).setCheck(Number),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_BASE_DELAY_TOOLTIP"))}},Blockly.Arduino.advanced_map=function(){var e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE),o=Blockly.Arduino.valueToCode(this,"FROM_MIN",Blockly.Arduino.ORDER_NONE),t=Blockly.Arduino.valueToCode(this,"FROM_MAX",Blockly.Arduino.ORDER_NONE),l=Blockly.Arduino.valueToCode(this,"TO_MIN",Blockly.Arduino.ORDER_NONE),n=Blockly.Arduino.valueToCode(this,"TO_MAX",Blockly.Arduino.ORDER_NONE),i="",s=RoboBlocks.findPinMode(e);return i+=s.code,e=s.pin,s=RoboBlocks.findPinMode(o),i+=s.code,o=s.pin,s=RoboBlocks.findPinMode(t),i+=s.code,t=s.pin,s=RoboBlocks.findPinMode(l),i+=s.code,l=s.pin,s=RoboBlocks.findPinMode(n),i+=s.code,n=s.pin,i+=JST.advanced_map({num:e,from_min:o,from_max:t,to_min:l,to_max:n}),[i,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.advanced_map={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("advanced_map"),examples:["advanced_map_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_MATH),this.appendValueInput("NUM",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_MAP")).setCheck(Number),this.appendValueInput("FROM_MIN",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_FROM")).setCheck(Number),this.appendValueInput("FROM_MAX",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_HYPHEN")).setCheck(Number),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_BRACKET")),this.appendValueInput("TO_MIN",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_TO")).setCheck(Number),this.appendValueInput("TO_MAX",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_HYPHEN")).setCheck(Number),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_BRACKET")),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_TOOLTIP"))}},Blockly.Arduino.base_map=function(){var e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE),o=Blockly.Arduino.valueToCode(this,"DMAX",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(e);return t+=l.code,e=l.pin,l=RoboBlocks.findPinMode(o),t+=l.code,o=l.pin,t+=JST.base_map({value_num:e,value_dmax:o}),[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.base_map={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("base_map"),examples:["base_map_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_MATH),this.appendValueInput("NUM",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_BASE_MAP")).setCheck(Number),this.appendValueInput("DMAX",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_BASE_MAP_VALUE_TO")).setCheck(Number),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_MATH_BASE_MAP_BRACKET")),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_MATH_BASE_MAP_TOOLTIP"))}},Blockly.Arduino.base_us=function(){var e="micros()";return[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.base_us={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),helpUrl:RoboBlocks.getHelpUrl("base_us"),examples:["base_us_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_BASE_US")),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_BASE_US_TOOLTIP"))}},Blockly.Arduino.controls_doWhile=function(){var e=Blockly.Arduino.valueToCode(this,"WHILE",Blockly.Arduino.ORDER_NONE)||"";e=e.replace(/&quot;/g,'"');var o=Blockly.Arduino.statementToCode(this,"DO");o=o.replace(/&quot;/g,'"');var t="";return Blockly.Arduino.INFINITE_LOOP_TRAP&&(o=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+o),"UNTIL"===this.getFieldValue("MODE")&&(e.match(/^\w+$/)||(e="("+e+")"),e="!"+e),t+=JST.controls_doWhile({argument0:e,branch:o})},Blockly.Blocks.controls_doWhile={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),helpUrl:RoboBlocks.getHelpUrl("controls_doWhile"),examples:["controls_doWhile_example1.bly","controls_doWhile_example2.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendStatementInput("DO").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_DOWHILE_OPERATOR_DO")),this.appendValueInput("WHILE").setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_TITLE_REPEAT")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_OPERATOR_WHILE"),"WHILE"],[RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL"),"UNTIL"]]),"MODE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_DOWHILE_TOOLTIP"))}},Blockly.Arduino.controls_execute=function(){var e=Blockly.Arduino.valueToCode(this,"CONTENT",Blockly.Arduino.ORDER_ATOMIC),o="";if(e=e.replace(/^"/,""),e=e.replace(/"$/g,""),e.match(/^#include /)){var t=JST.controls_execute({content:e});"define_include"in Blockly.Arduino.definitions_?Blockly.Arduino.definitions_.define_include+=t:Blockly.Arduino.definitions_.define_include=t}else o+=JST.controls_execute({content:e});return o},Blockly.Blocks.controls_execute={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),helpUrl:RoboBlocks.getHelpUrl("controls_execute"),examples:["controls_execute_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("CONTENT",String).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_EXECUTE")),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_EXECUTE_TOOLTIP"))}},Blockly.Arduino.controls_flow_statements=function(){switch(this.getFieldValue("FLOW")){case"BREAK":return"break;\n";case"CONTINUE":return"continue;\n"}throw"Unknown flow statement."},Blockly.Blocks.controls_flow_statements={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),helpUrl:RoboBlocks.getHelpUrl("controls_flow_statements"),examples:["controls_flow_statements_example1.bly","controls_flow_statements_example2.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL);var e=new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK")||"BREAK","BREAK"],[RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE")||"CONTINUE","CONTINUE"]]);this.appendDummyInput().appendField(e,"FLOW").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_INPUT_OFLOOP")),this.setPreviousStatement(!0);var o=this;this.setTooltip(function(){var e=o.getFieldValue("FLOW");return Blockly.Blocks.controls_flow_statements.TOOLTIPS[e]})},onchange:function(){if(this.workspace){var e=!1,o=this;do{if("controls_repeat"===o.type||"controls_forEach"===o.type||"controls_for"===o.type||"controls_whileUntil"===o.type){e=!0;break}o=o.getSurroundParent()}while(o);if(e)this.setWarningText(null);else try{this.setWarningText(RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_WARNING"))}catch(t){console.log("Captured error: ",t)}}}},Blockly.Blocks.controls_flow_statements.TOOLTIPS={BREAK:RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK"),CONTINUE:RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE")},Blockly.Arduino.controls_for=function(){var e=Blockly.Arduino.valueToCode(this,"VAR",Blockly.Arduino.ORDER_NONE)||"",o=Blockly.Arduino.valueToCode(this,"FROM",Blockly.Arduino.ORDER_ASSIGNMENT)||"",t=Blockly.Arduino.valueToCode(this,"TO",Blockly.Arduino.ORDER_ASSIGNMENT)||"",l=Blockly.Arduino.statementToCode(this,"DO");Blockly.Arduino.INFINITE_LOOP_TRAP&&(l=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+l);var n="",i=RoboBlocks.findPinMode(e);n+=i.code,e=i.pin,i=RoboBlocks.findPinMode(o),n+=i.code,o=i.pin,i=RoboBlocks.findPinMode(t),n+=i.code,t=i.pin;var s=parseFloat(o)<=parseFloat(t);return n+="for ("+e+" = "+o+"; "+e+(s?" <= ":" >= ")+t+"; "+e+(s?"++":"--")+") {\n"+l+"}\n"},Blockly.Blocks.controls_for={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),helpUrl:RoboBlocks.getHelpUrl("controls_for"),examples:["controls_for_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("VAR").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_INPUT_WITH")),this.appendValueInput("FROM").setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_INPUT_FROM")),this.appendValueInput("TO").setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_INPUT_TO")),this.appendStatementInput("DO").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_INPUT_DO")),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setInputsInline(!0);var e=this;this.setTooltip(function(){return RoboBlocks.LANG_CONTROLS_FOR_TOOLTIP.replace("%1",e.getFieldValue("VAR"))})},getVars:function(){return[this.getFieldValue("VAR")]},getVariables:function(){var e=Blockly.Variables.allUsedVariables,o=[];if(e.length>0)for(var t in e)o.push([e[t],e[t]]);else o.push(["",""]);return o},isVariable:function(e){for(var o in Blockly.Variables.allUsedVariables)if(Blockly.Variables.allUsedVariables[o]===e)return!0;return!1},onchange:function(){try{this.isVariable(Blockly.Arduino.valueToCode(this,"FROM",Blockly.Arduino.ORDER_ATOMIC))?this.setWarningText(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_FROM_WARNING")):this.isVariable(Blockly.Arduino.valueToCode(this,"TO",Blockly.Arduino.ORDER_ATOMIC))?this.setWarningText(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_TO_WARNING")):this.setWarningText(null)}catch(e){}},renameVar:function(e,o){Blockly.Names.equals(e,this.getFieldValue("VAR"))&&this.setTitleValue(o,"VAR")}},Blockly.Arduino.controls_if=function(){var e=0,o=Blockly.Arduino.valueToCode(this,"IF"+e,Blockly.Arduino.ORDER_NONE);o=o.replace(/&quot;/g,'"');var t=Blockly.Arduino.statementToCode(this,"DO"+e),l="",n=RoboBlocks.findPinMode(o);for(l+=n.code,o=n.pin,l+=JST.controls_if({argument:o,branch:t}),e=1;e<=this.elseifCount_;e++)o=Blockly.Arduino.valueToCode(this,"IF"+e,Blockly.Arduino.ORDER_NONE),t=Blockly.Arduino.statementToCode(this,"DO"+e),l+=JST.controls_elseif({argument:o,branch:t});return this.elseCount_&&(t=Blockly.Arduino.statementToCode(this,"ELSE"),l+=JST.controls_else({argument:o,branch:t})),t=t.replace(/&quot;/g,'"'),l=l.replace(/&quot;/g,'"'),l+"\n"},Blockly.Blocks.controls_if={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),helpUrl:RoboBlocks.getHelpUrl("controls_if"),examples:["controls_if_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("IF0").setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_IF")),this.appendStatementInput("DO0").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setMutator(new Blockly.Mutator(["controls_if_elseif","controls_if_else"]));var e=this;this.setTooltip(function(){return e.elseifCount_||e.elseCount_?!e.elseifCount_&&e.elseCount_?RoboBlocks.locales.getKey("LANG_CONTROLS_IF_TOOLTIP_2"):e.elseifCount_&&!e.elseCount_?RoboBlocks.locales.getKey("LANG_CONTROLS_IF_TOOLTIP_3"):e.elseifCount_&&e.elseCount_?RoboBlocks.locales.getKey("LANG_CONTROLS_IF_TOOLTIP_4"):"":RoboBlocks.locales.getKey("LANG_CONTROLS_IF_TOOLTIP_1")}),this.elseifCount_=0,this.elseCount_=0},mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var e=document.createElement("mutation");return this.elseifCount_&&e.setAttribute("elseif",this.elseifCount_),this.elseCount_&&e.setAttribute("else",1),e},domToMutation:function(e){this.elseifCount_=window.parseInt(e.getAttribute("elseif"),10),this.elseCount_=window.parseInt(e.getAttribute("else"),10);for(var o=1;o<=this.elseifCount_;o++)this.appendValueInput("IF"+o).setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_ELSEIF")),this.appendStatementInput("DO"+o).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT);this.elseCount_&&this.appendStatementInput("ELSE").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_ELSE")).setAlign(Blockly.ALIGN_RIGHT);
},decompose:function(e){var o=Blockly.Block.obtain(e,"controls_if_if");o.initSvg();for(var t=o.getInput("STACK").connection,l=1;l<=this.elseifCount_;l++){var n=Blockly.Block.obtain(e,"controls_if_elseif");n.initSvg(),t.connect(n.previousConnection),t=n.nextConnection}if(this.elseCount_){var i=Blockly.Block.obtain(e,"controls_if_else");i.initSvg(),t.connect(i.previousConnection)}return o},compose:function(e){this.elseCount_&&this.removeInput("ELSE"),this.elseCount_=0;for(var o=this.elseifCount_;o>0;o--)this.removeInput("IF"+o),this.removeInput("DO"+o);this.elseifCount_=0;for(var t=e.getInputTargetBlock("STACK");t;){switch(t.type){case"controls_if_elseif":this.elseifCount_++;var l=this.appendValueInput("IF"+this.elseifCount_).setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_ELSEIF")),n=this.appendStatementInput("DO"+this.elseifCount_);n.appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT),t.valueConnection_&&l.connection.connect(t.valueConnection_),t.statementConnection_&&n.connection.connect(t.statementConnection_);break;case"controls_if_else":this.elseCount_++;var i=this.appendStatementInput("ELSE");i.appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_ELSE")).setAlign(Blockly.ALIGN_RIGHT),t.statementConnection_&&i.connection.connect(t.statementConnection_);break;default:throw"Unknown block type."}t=t.nextConnection&&t.nextConnection.targetBlock()}},saveConnections:function(e){for(var o=e.getInputTargetBlock("STACK"),t=1;o;){switch(o.type){case"controls_if_elseif":var l=this.getInput("IF"+t),n=this.getInput("DO"+t);o.valueConnection_=l&&l.connection.targetConnection,o.statementConnection_=n&&n.connection.targetConnection,t++;break;case"controls_if_else":n=this.getInput("ELSE"),o.statementConnection_=n&&n.connection.targetConnection;break;default:throw"Unknown block type."}o=o.nextConnection&&o.nextConnection.targetBlock()}}},Blockly.Blocks.controls_if_if={init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_IF_Field_IF")).setAlign(Blockly.ALIGN_RIGHT),this.appendStatementInput("STACK"),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_IF_TOOLTIP")),this.contextMenu=!1}},Blockly.Blocks.controls_if_elseif={init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSEIF_Field_ELSEIF")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSEIF_TOOLTIP")),this.contextMenu=!1}},Blockly.Blocks.controls_if_else={init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSE_Field_ELSE")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSE_TOOLTIP")),this.contextMenu=!1}},Blockly.Arduino.controls_setupLoop=function(){var e=Blockly.Arduino.statementToCode(this,"SETUP");e=e.replace(/&quot;/g,'"'),Blockly.Arduino.setups_.setup_int0_&&(e+=Blockly.Arduino.setups_.setup_int0_),Blockly.Arduino.setups_.X_SETUP=JST.controls_setupLoop({branch:e});var o=Blockly.Arduino.statementToCode(this,"LOOP");return o=o.replace(/&quot;/g,'"'),o=JST.controls_setupLoop({branch:o})},Blockly.Blocks.controls_setupLoop={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),helpUrl:RoboBlocks.getHelpUrl("controls_setupLoop"),examples:["controls_setupLoop_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendStatementInput("SETUP").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SETUP_LOOP_SETUP_TITLE")),this.appendStatementInput("LOOP").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SETUP_LOOP_LOOP_TITLE")),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_SETUP_LOOP_TOOLTIP"))}};var indentSentences=function(e){var o=e.split("\n"),t="";for(var l in o)t+="  "+o[l]+"\n";return t};return Blockly.Arduino.controls_switch=function(){var e=0,o=Blockly.Arduino.valueToCode(this,"IF0",Blockly.Arduino.ORDER_NONE)||"",t=Blockly.Arduino.statementToCode(this,"DO"+e);t=indentSentences(t);var l="",n=RoboBlocks.findPinMode(o);for(l+=n.code,o=n.pin,l+="switch ("+o+")\n{",e=1;e<=this.switchCount_;e++)o=Blockly.Arduino.valueToCode(this,"SWITCH"+e,Blockly.Arduino.ORDER_NONE)||"",t=Blockly.Arduino.statementToCode(this,"DO"+e),t=indentSentences(t),t=t.substring(0,t.length-1),l+=" \n  case "+o+": \n  {\n"+t+"  break;\n  }";return this.defaultCount_&&(t=Blockly.Arduino.statementToCode(this,"DEFAULT"),t=indentSentences(t),t=t.substring(0,t.length-1),l+="  \n  default:\n  {\n"+t+"}"),l+"\n}\n"},Blockly.Blocks.controls_switch={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),helpUrl:RoboBlocks.getHelpUrl("controls_switch"),examples:["controls_switch_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("IF0").setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setMutator(new Blockly.Mutator(["controls_switch_case","controls_switch_default"]));var e=this;this.setTooltip(function(){return e.switchCount_||e.defaultCount_?!e.switchCount_&&e.defaultCount_?RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_TOOLTIP_2"):e.switchCount_&&!e.defaultCount_?RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_TOOLTIP_3"):e.switchCount_&&e.defaultCount_?RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_TOOLTIP_4"):"":RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_TOOLTIP_1")}),this.defaultCount_=0},mutationToDom:function(){if(!this.switchCount_&&!this.defaultCount_)return null;var e=document.createElement("mutation");return this.switchCount_&&e.setAttribute("case",this.switchCount_),this.defaultCount_&&e.setAttribute("default",1),e},domToMutation:function(e){this.switchCount_=window.parseInt(e.getAttribute("case"),10),this.defaultCount_=window.parseInt(e.getAttribute("default"),10);for(var o=1;o<=this.switchCount_;o++)this.appendValueInput("SWITCH"+o).setCheck(Number).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_CASE")).setAlign(Blockly.ALIGN_RIGHT),this.setInputsInline(!0),this.appendStatementInput("DO"+o).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT);this.defaultCount_&&this.appendStatementInput("DEFAULT").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_DEFAULT")).setAlign(Blockly.ALIGN_RIGHT)},decompose:function(e){var o=Blockly.Block.obtain(e,"controls_switch_switch");o.initSvg();for(var t=o.getInput("STACK").connection,l=1;l<=this.switchCount_;l++){var n=Blockly.Block.obtain(e,"controls_switch_case");n.initSvg(),t.connect(n.previousConnection),t=n.nextConnection}if(this.defaultCount_){var i=Blockly.Block.obtain(e,"controls_switch_default");i.initSvg(),t.connect(i.previousConnection)}return o},compose:function(e){this.defaultCount_&&this.removeInput("DEFAULT"),this.defaultCount_=0;for(var o=this.switchCount_;o>0;o--)this.removeInput("SWITCH"+o),this.removeInput("DO"+o);this.switchCount_=0;for(var t=e.getInputTargetBlock("STACK");t;){switch(t.type){case"controls_switch_case":this.switchCount_++;var l;l=1===this.switchCount_?RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_IS"):RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_CASE");var n=this.appendValueInput("SWITCH"+this.switchCount_).setCheck(Number).appendField(l).setAlign(Blockly.ALIGN_RIGHT);this.setInputsInline(!0);var i=this.appendStatementInput("DO"+this.switchCount_);i.appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_DO")).setAlign(Blockly.ALIGN_RIGHT),t.valueConnection_&&n.connection.connect(t.valueConnection_),t.statementConnection_&&i.connection.connect(t.statementConnection_);break;case"controls_switch_default":this.defaultCount_++;var s=this.appendStatementInput("DEFAULT");s.appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_DEFAULT")).setAlign(Blockly.ALIGN_RIGHT),t.statementConnection_&&s.connection.connect(t.statementConnection_);break;default:throw"Unknown block type."}t=t.nextConnection&&t.nextConnection.targetBlock()}},saveConnections:function(e){for(var o=e.getInputTargetBlock("STACK"),t=1;o;){switch(o.type){case"controls_switch_case":var l=this.getInput("SWITCH"+t),n=this.getInput("DO"+t);o.valueConnection_=l&&l.connection.targetConnection,o.statementConnection_=n&&n.connection.targetConnection,t++;break;case"controls_switch_default":n=this.getInput("DEFAULT"),o.statementConnection_=n&&n.connection.targetConnection;break;default:throw"Unknown block type."}o=o.nextConnection&&o.nextConnection.targetBlock()}}},Blockly.Blocks.controls_switch_switch={init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH")).setAlign(Blockly.ALIGN_RIGHT),this.appendStatementInput("STACK"),this.setTooltip("Switch"),this.contextMenu=!1}},Blockly.Blocks.controls_switch_case={init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_CASE")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip("Switch case"),this.contextMenu=!1}},Blockly.Blocks.controls_switch_default={init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_DEFAULT")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0),this.setTooltip("Switch default"),this.contextMenu=!1}},Blockly.Arduino.controls_whileUntil=function(){var e=Blockly.Arduino.valueToCode(this,"BOOL",Blockly.Arduino.ORDER_NONE)||"";e=e.replace(/&quot;/g,'"');var o=Blockly.Arduino.statementToCode(this,"DO");o=o.replace(/&quot;/g,'"');var t="",l=RoboBlocks.findPinMode(e);return t+=l.code,e=l.pin,Blockly.Arduino.INFINITE_LOOP_TRAP&&(o=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+o),"UNTIL"===this.getFieldValue("MODE")&&(e.match(/^\w+$/)||(e="("+e+")"),e="!"+e),t+=JST.controls_whileUntil({argument0:e,branch:o})},Blockly.Blocks.controls_whileUntil={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),helpUrl:RoboBlocks.getHelpUrl("controls_whileUntil"),examples:["controls_whileUntil_example.bly","controls_whileUntil1_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("BOOL").setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_TITLE_REPEAT")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_OPERATOR_WHILE"),"WHILE"],[RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL"),"UNTIL"]]),"MODE"),this.appendStatementInput("DO").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_INPUT_DO")),this.setPreviousStatement(!0),this.setNextStatement(!0);var e=this;this.setTooltip(function(){var o=e.getFieldValue("MODE");return Blockly.Blocks.controls_whileUntil.TOOLTIPS[o]})}},Blockly.Blocks.controls_whileUntil.TOOLTIPS={WHILE:RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE"),UNTIL:RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL")},Blockly.Arduino.inout_analog_read=function(){var e=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),o="",t=RoboBlocks.findPinMode(e);return o+=t.code,e=t.pin,RoboBlocks.isVariable(e)?o+=JST.inout_analog_read_setups({dropdown_pin:e}):Blockly.Arduino.setups_["setup_green_analog_read"+e]=JST.inout_analog_read_setups({dropdown_pin:e}),o+=JST.inout_analog_read({dropdown_pin:e}),[o,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.inout_analog_read={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),helpUrl:RoboBlocks.getHelpUrl("inout_analog_read"),examples:["inout_analog_read_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_ANALOG_READ")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)),this.setOutput(!0,Number),this.setInputsInline(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_ANALOG_READ_TOOLTIP"))}},Blockly.Arduino.inout_analog_write=function(){var e=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(e);t+=l.code,e=l.pin;var n=RoboBlocks.findPinMode(o);return t+=n.code,o=n.pin,RoboBlocks.isVariable(e)?t+=JST.inout_analog_write_setups({dropdown_pin:e,value_num:o}):Blockly.Arduino.setups_["setup_analog_write"+e]=JST.inout_analog_write_setups({dropdown_pin:e,value_num:o}),t+=JST.inout_analog_write({dropdown_pin:e,value_num:o})},Blockly.Blocks.inout_analog_write={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),helpUrl:RoboBlocks.getHelpUrl("inout_analog_write"),examples:["inout_analog_write_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_ANALOG_WRITE")).appendField(new Blockly.FieldImage("img/blocks/pwm_signal.svg",24*options.zoom,24*options.zoom)),this.appendValueInput("NUM",Number).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_ANALOG_WRITE_VALUE")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).setCheck(Number),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_ANALOG_WRITE_TOOLTIP"))}},Blockly.Arduino.inout_builtin_led=function(){var e=this.getFieldValue("STAT"),o="";return Blockly.Arduino.setups_.setup_green_led_13=JST.inout_builtin_led_setups({}),"TOGGLE"===e?o+="digitalWrite(13,!digitalRead(13));\n":o=JST.inout_builtin_led({dropdown_stat:e}),o},Blockly.Blocks.inout_builtin_led={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),helpUrl:RoboBlocks.getHelpUrl("inout_builtin_led"),examples:["inout_builtin_led_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED")).appendField(new Blockly.FieldImage("img/blocks/diode.png",24*options.zoom,24*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED_STATE")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED_ON")||"ON","HIGH"],[RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED_OFF")||"OFF","LOW"],[RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED_TOGGLE")||"TOGGLE","TOGGLE"]]),"STAT"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED_TOOLTIP"))}},Blockly.Arduino.inout_digital_read=function(){var e=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),o="",t=RoboBlocks.findPinMode(e);return o+=t.code,e=t.pin,RoboBlocks.isVariable(e)?o+=JST.inout_digital_read_setups({dropdown_pin:e}):Blockly.Arduino.setups_["setup_green_digital_read"+e]=JST.inout_digital_read_setups({dropdown_pin:e}),o+=JST.inout_digital_read({dropdown_pin:e}),[o,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.inout_digital_read={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),helpUrl:RoboBlocks.getHelpUrl("inout_digital_read"),examples:["inout_digital_read_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_READ")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)),this.setOutput(!0,Boolean),this.setInputsInline(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_READ_TOOLTIP"))}},Blockly.Arduino.inout_digital_write=function(){var e=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"STAT",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(e);return t+=l.code,e=l.pin,RoboBlocks.isVariable(e)?t+=JST.inout_digital_write_setups({dropdown_pin:e}):Blockly.Arduino.setups_["setup_green_digital_write_"+e]=JST.inout_digital_write_setups({dropdown_pin:e}),t+=JST.inout_digital_write({dropdown_pin:e,dropdown_stat:o})},Blockly.Blocks.inout_digital_write={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),helpUrl:RoboBlocks.getHelpUrl("inout_digital_write"),examples:["inout_digital_read_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_WRITE")).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_WRITE_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)),this.appendValueInput("STAT").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_WRITE_STATE")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,null),this.setInputsInline(!0),this.setNextStatement(!0,null),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_WRITE_TOOLTIP"))}},Blockly.Arduino.inout_digital_mode=function(){var e=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),o=this.getFieldValue("MODE"),t="";return t="pinMode("+e+","+o+");"},Blockly.Blocks.inout_digital_mode={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),helpUrl:RoboBlocks.getHelpUrl("inout_digital_mode"),examples:["inout_digital_mode_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE")).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_MODE")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_OUTPUT")||"OUTPUT","OUTPUT"],[RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_INPUT")||"INPUT","INPUT"],[RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_PULLUP")||"PULLUP","INPUT_PULLUP"]]),"MODE").setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,null),this.setInputsInline(!0),this.setNextStatement(!0,null),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_TOOLTIP"))}},Blockly.Arduino.inout_highlow=function(){var e=this.getFieldValue("BOOL"),o=JST.inout_highlow({bool_value:e});return[o,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.inout_highlow={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),helpUrl:RoboBlocks.getHelpUrl("inout_highlow"),tags:["input","output"],examples:["inout_highlow_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendDummyInput("").appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_ADVANCED_HIGHLOW_HIGH")||"HIGH","HIGH"],[RoboBlocks.locales.getKey("LANG_ADVANCED_HIGHLOW_LOW")||"LOW","LOW"]]),"BOOL"),this.setOutput(!0,Boolean),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_HIGHLOW_TOOLTIP"))}},Blockly.Arduino.lcd_clear=function(){var e=JST.lcd_clear({});return e},Blockly.Blocks.lcd_clear={category:RoboBlocks.locales.getKey("LANG_CATEGORY_SCREEN"),tags:["lcd","screen"],helpUrl:RoboBlocks.getHelpUrl("lcd_clear"),examples:["lcd_clear_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LCD),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_LCD_CLEAR")).appendField(new Blockly.FieldImage("img/blocks/lcd.svg",52*options.zoom,24*options.zoom)),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(RoboBlocks.locales.getKey("LANG_LCD_CLEAR_TOOLTIP"))}},Blockly.Arduino.lcd_def=function(){var e={};return e.lcd_1=this.getFieldValue("LCD_1"),e.lcd_2=this.getFieldValue("LCD_2"),e.lcd_3=this.getFieldValue("LCD_3"),e.lcd_4=this.getFieldValue("LCD_4"),e.lcd_5=this.getFieldValue("LCD_5"),e.lcd_6=this.getFieldValue("LCD_6"),Blockly.Arduino.definitions_.define_lcd=JST.lcd_def_definitions({}),Blockly.Arduino.definitions_.declare_var_LCD=JST.lcd_def_declare(e),Blockly.Arduino.setups_.setup_lcd_=JST.lcd_def_setups({}),""},Blockly.Blocks.lcd_def={category:RoboBlocks.locales.getKey("LANG_CATEGORY_SCREEN"),tags:["lcd","screen"],helpUrl:RoboBlocks.getHelpUrl("lcd_def"),examples:["lcd_def_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LCD),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_LCD_DEF")).appendField(new Blockly.FieldImage("img/blocks/lcd.svg",52*options.zoom,24*options.zoom)),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_LCD_PINS")).appendField(new Blockly.FieldTextInput("11"),"LCD_1").appendField(new Blockly.FieldTextInput("12"),"LCD_2").appendField(new Blockly.FieldTextInput("3"),"LCD_3").appendField(new Blockly.FieldTextInput("4"),"LCD_4").appendField(new Blockly.FieldTextInput("5"),"LCD_5").appendField(new Blockly.FieldTextInput("6"),"LCD_6"),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(RoboBlocks.locales.getKey("LANG_LCD_DEF_TOOLTIP"))}},Blockly.Arduino.lcd_print=function(){var e=Blockly.Arduino.valueToCode(this,"VAL",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"XCOOR",Blockly.Arduino.ORDER_ATOMIC),t=Blockly.Arduino.valueToCode(this,"YCOOR",Blockly.Arduino.ORDER_ATOMIC),l="",n=RoboBlocks.findPinMode(o);return l+=n.code,o=n.pin,n=RoboBlocks.findPinMode(t),l+=n.code,t=n.pin,n=RoboBlocks.findPinMode(e),l+=n.code,e=n.pin,l+="TRUE"===this.getFieldValue("POS")?JST.lcd_print_pos({val:e,xcoor:o,ycoor:t}):JST.lcd_print({val:e}),l=l.replace(/&quot;/g,'"')},Blockly.Blocks.lcd_print={category:RoboBlocks.locales.getKey("LANG_CATEGORY_SCREEN"),tags:["lcd","screen"],helpUrl:RoboBlocks.getHelpUrl("lcd_print"),examples:["lcd_print_example1.bly","lcd_print_example2.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LCD),this.appendValueInput("VAL").appendField(RoboBlocks.locales.getKey("LANG_LCD_PRINT")).appendField(new Blockly.FieldImage("img/blocks/lcd.svg",52*options.zoom,24*options.zoom)),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_LCD_PRINT_POSITION")).appendField(new Blockly.FieldCheckbox("FALSE"),"POS").setAlign(Blockly.ALIGN_RIGHT),this.last_pos=this.getFieldValue("POS"),this.getPosition(),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(RoboBlocks.locales.getKey("LANG_LCD_PRINT_TOOLTIP"))},getPosition:function(){try{this.removeInput("XCOOR"),this.removeInput("YCOOR")}catch(e){}"TRUE"===this.getFieldValue("POS")&&(this.appendValueInput("XCOOR").appendField("row").setAlign(Blockly.ALIGN_RIGHT),this.appendValueInput("YCOOR").appendField("column").setAlign(Blockly.ALIGN_RIGHT))},onchange:function(){this.getFieldValue("POS")!==this.last_pos&&(this.getPosition(),this.last_pos=this.getFieldValue("POS"))},mutationToDom:function(){var e=document.createElement("mutation");return"TRUE"===this.getFieldValue("POS")?e.setAttribute("fixed",!0):"FALSE"===this.getFieldValue("POS")&&e.setAttribute("fixed",!1),e},domToMutation:function(e){this.setFieldValue(e.getAttribute("fixed"),"POS"),"TRUE"===this.getFieldValue("POS")&&(this.appendValueInput("XCOOR").appendField("row").setAlign(Blockly.ALIGN_RIGHT),this.appendValueInput("YCOOR").appendField("column").setAlign(Blockly.ALIGN_RIGHT))}},Blockly.Arduino.lcd_setBacklight=function(){var e=this.getFieldValue("STATE"),o=JST.lcd_setBacklight({state:e});return o},Blockly.Blocks.lcd_setBacklight={category:RoboBlocks.locales.getKey("LANG_CATEGORY_SCREEN"),helpUrl:RoboBlocks.getHelpUrl("lcd_setBacklight"),tags:["lcd","screen"],examples:["lcd_setBacklight_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LCD),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_LCD_SETBACKLIGHT")).appendField(new Blockly.FieldDropdown([["LOW","LOW"],["HIGH","HIGH"]]),"STATE").appendField(RoboBlocks.locales.getKey("LANG_LCD_SETBACKLIGHT_CLOSE")).appendField(new Blockly.FieldImage("img/blocks/lcd.svg",52*options.zoom,24*options.zoom)),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(RoboBlocks.locales.getKey("LANG_LCD_SETBACKLIGHT_TOOLTIP"))}},Blockly.Arduino.logic_boolean=function(){var e="TRUE"===this.getFieldValue("BOOL")?"true":"false";return[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.logic_boolean={category:RoboBlocks.locales.getKey("LANG_CATEGORY_LOGIC"),helpUrl:RoboBlocks.getHelpUrl("logic_boolean"),examples:["logic_boolean_example.bly"],tags:["logic"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LOGIC),this.setOutput(!0,Boolean),this.appendDummyInput().appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_LOGIC_BOOLEAN_TRUE"),"TRUE"],[RoboBlocks.locales.getKey("LANG_LOGIC_BOOLEAN_FALSE"),"FALSE"]]),"BOOL"),this.setTooltip(RoboBlocks.locales.getKey("LANG_LOGIC_BOOLEAN_TOOLTIP"))}},Blockly.Arduino.logic_compare=function(){var e=this.getFieldValue("OP"),o=Blockly.Arduino.logic_compare.OPERATORS[e],t="=="===o||"!="===o?Blockly.Arduino.ORDER_EQUALITY:Blockly.Arduino.ORDER_RELATIONAL,l=Blockly.Arduino.valueToCode(this,"A",t)||"",n=Blockly.Arduino.valueToCode(this,"B",t)||"",i="",s=RoboBlocks.findPinMode(l);return i+=s.code,l=s.pin,s=RoboBlocks.findPinMode(n),i+=s.code,n=s.pin,i+=JST.logic_compare({argument0:l,argument1:n,operator:o}),[i,t]},Blockly.Arduino.logic_compare.OPERATORS={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="},Blockly.Blocks.logic_compare={category:RoboBlocks.locales.getKey("LANG_CATEGORY_LOGIC"),helpUrl:RoboBlocks.getHelpUrl("logic_compare"),examples:["logic_compare_example.bly"],tags:["logic"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LOGIC),this.setOutput(!0,Boolean),this.appendValueInput("A"),this.appendValueInput("B").appendField(new Blockly.FieldDropdown(this.OPERATORS),"OP"),this.setInputsInline(!0);var e=this;this.setTooltip(function(){var o=e.getFieldValue("OP");return Blockly.Blocks.logic_compare.TOOLTIPS[o]})}},Blockly.Blocks.logic_compare.OPERATORS=[["=","EQ"],["≠","NEQ"],["<","LT"],["≤","LTE"],[">","GT"],["≥","GTE"]],Blockly.Blocks.logic_compare.TOOLTIPS={EQ:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_EQ"),NEQ:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_NEQ"),LT:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_LT"),LTE:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_LTE"),GT:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_GT"),GTE:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_GTE")},Blockly.Arduino.logic_operation=function(){var e="",o="AND"===this.getFieldValue("OP")?"&&":"OR"===this.getFieldValue("OP")?"||":"",t="&&"===o?Blockly.Arduino.ORDER_LOGICAL_AND:"||"===o?Blockly.Arduino.ORDER_LOGICAL_OR:Blockly.Arduino.ORDER_NONE,l=Blockly.Arduino.valueToCode(this,"A",t)||"",n=Blockly.Arduino.valueToCode(this,"B",t)||"",i=RoboBlocks.findPinMode(l);return e+=i.code,l=i.pin,i=RoboBlocks.findPinMode(n),e+=i.code,n=i.pin,e+="XOR"===this.getFieldValue("OP")?"((!("+l+"))&&("+n+")||((!("+n+"))&&("+l+")))":"XNOR"===this.getFieldValue("OP")?"(("+l+")&&("+n+")||((!("+n+"))&&(!("+l+"))))":"IMPLIES"===this.getFieldValue("OP")?"((!("+l+"))||("+n+"))":"("+l+") "+o+" ("+n+")",[e,t]},Blockly.Blocks.logic_operation={category:RoboBlocks.locales.getKey("LANG_CATEGORY_LOGIC"),helpUrl:RoboBlocks.getHelpUrl("logic_operation"),examples:["logic_operation_example.bly"],tags:["logic"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LOGIC),this.setOutput(!0,Boolean),this.appendValueInput("A").setCheck(Boolean),this.appendValueInput("B").setCheck(Boolean).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_AND")||"AND","AND"],[RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_OR")||"OR","OR"],[RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_XOR")||"XOR","XOR"],[RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_XNOR")||"XNOR","XNOR"],[RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_IMPLIES")||"IMPLIES","IMPLIES"]]),"OP"),this.setInputsInline(!0);var e=this;this.setTooltip(function(){var o=e.getFieldValue("OP");return Blockly.Blocks.logic_operation.TOOLTIPS[o]})}},Blockly.Blocks.logic_operation.TOOLTIPS={AND:RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_TOOLTIP_AND"),OR:RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_TOOLTIP_OR"),XOR:RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_TOOLTIP_XOR"),XNOR:RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_TOOLTIP_XNOR"),IMPLIES:RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_TOOLTIP_IMPLIES")},Blockly.Arduino.logic_negate=function(){var e=Blockly.Arduino.ORDER_UNARY_PREFIX,o=Blockly.Arduino.valueToCode(this,"BOOL",e)||"false",t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,t+=JST.logic_negate({argument0:o}),[t,e]},Blockly.Blocks.logic_negate={category:RoboBlocks.locales.getKey("LANG_CATEGORY_LOGIC"),helpUrl:RoboBlocks.getHelpUrl("logic_negate"),examples:["logic_negate_example.bly"],tags:["logic"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LOGIC),this.setOutput(!0,Boolean),this.appendValueInput("BOOL").setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_LOGIC_NEGATE_INPUT_NOT")),this.setTooltip(RoboBlocks.locales.getKey("LANG_LOGIC_NEGATE_TOOLTIP"))}},Blockly.Arduino.math_arithmetic=function(){var e=this.getFieldValue("OP"),o=Blockly.Arduino.math_arithmetic.OPERATORS[e],t=o[0],l=o[1],n=Blockly.Arduino.valueToCode(this,"A",l)||"",i=Blockly.Arduino.valueToCode(this,"B",l)||"",s="",_=RoboBlocks.findPinMode(n);return s+=_.code,n=_.pin,_=RoboBlocks.findPinMode(i),s+=_.code,i=_.pin,t?(s+=JST.math_arithmetic({argument0:n,argument1:i,operator:t}),[s,l]):(s=JST.math_arithmetic_pow({argument0:n,argument1:i}),[s,Blockly.Arduino.ORDER_UNARY_POSTFIX])},Blockly.Arduino.math_arithmetic.OPERATORS={ADD:[" + ",Blockly.Arduino.ORDER_ADDITIVE],MINUS:[" - ",Blockly.Arduino.ORDER_ADDITIVE],MULTIPLY:[" * ",Blockly.Arduino.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",Blockly.Arduino.ORDER_MULTIPLICATIVE],POWER:[null,Blockly.Arduino.ORDER_NONE]},Blockly.Blocks.math_arithmetic={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("math_arithmetic"),examples:["math_arithmetic_example.bly"],tags:["math"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_MATH),this.setOutput(!0,Number),this.appendValueInput("A").setCheck(Number),this.appendValueInput("B").setCheck(Number).appendField(new Blockly.FieldDropdown(this.OPERATORS),"OP"),this.setInputsInline(!0);var e=this;this.setTooltip(function(){var o=e.getFieldValue("OP");return Blockly.Blocks.math_arithmetic.TOOLTIPS[o]})}},Blockly.Blocks.math_arithmetic.OPERATORS=[["+","ADD"],["-","MINUS"],["×","MULTIPLY"],["÷","DIVIDE"],["^","POWER"]],Blockly.Blocks.math_arithmetic.TOOLTIPS={ADD:RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP_ADD"),MINUS:RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP_MINUS"),MULTIPLY:RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP_MULTIPLY"),DIVIDE:RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP_DIVIDE"),POWER:RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP_POWER")},Blockly.Arduino.math_modulo=function(){var e=Blockly.Arduino.valueToCode(this,"DIVIDEND",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"",o=Blockly.Arduino.valueToCode(this,"DIVISOR",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"",t="",l=RoboBlocks.findPinMode(e);return t+=l.code,e=l.pin,l=RoboBlocks.findPinMode(o),
t+=l.code,o=l.pin,t+=JST.math_modulo({argument0:e,argument1:o}),[t,Blockly.Arduino.ORDER_MULTIPLICATIVE]},Blockly.Blocks.math_modulo={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("math_modulo"),examples:["math_arithmetic_example.bly"],tags:["math"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_MATH),this.setOutput(!0,Number),this.appendValueInput("DIVIDEND").setCheck(Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_MODULO_INPUT_DIVIDEND")),this.appendValueInput("DIVISOR").setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendField("%"),this.setInputsInline(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_MATH_MODULO_TOOLTIP"))}},Blockly.Arduino.math_number=function(){var e=window.parseFloat(this.getFieldValue("NUM")),o=0>e?Blockly.Arduino.ORDER_UNARY_PREFIX:Blockly.Arduino.ORDER_ATOMIC;return[e,o]},Blockly.Blocks.math_number={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("math_number"),examples:["math_number_example.bly"],tags:["math"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_MATH),this.appendDummyInput().appendField(new Blockly.FieldTextInput("0",Blockly.Blocks.math_number.validator),"NUM"),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_MATH_NUMBER_TOOLTIP"))}},Blockly.Blocks.math_number.validator=function(e){var o=window.parseFloat(e||0);return window.isNaN(o)?null:String(o)},Blockly.Arduino.math_random=function(){var e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE),o=Blockly.Arduino.valueToCode(this,"DMAX",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(e);return t+=l.code,e=l.pin,l=RoboBlocks.findPinMode(o),t+=l.code,o=l.pin,Blockly.Arduino.definitions_.define_random_bitOut=JST.math_random_bitOut({}),Blockly.Arduino.definitions_.define_random_seedOut=JST.math_random_seedOut({}),Blockly.Arduino.setups_.setup_randomseed="unsigned long seed =seedOut(31);\n  randomSeed(seed);\n",t+=JST.math_random({value_num:e,value_dmax:o}),[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.math_random={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("math_random"),examples:["math_random_example.bly"],tags:["math"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_MATH),this.appendValueInput("NUM",Number).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_RANDOM")).setCheck(Number),this.appendValueInput("DMAX",Number).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_RANDOM_AND")).setCheck(Number),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_RANDOM_TOOLTIP"))}},Blockly.Arduino.math_to_number=function(){var e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_NONE),o=this.getFieldValue("CAST")||"",t="";return t+="("+o+")("+e+")",[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.math_to_number={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),tags:["math"],helpUrl:RoboBlocks.getHelpUrl("math_to_number"),examples:["math_to_number_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_MATH),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_CAST")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER"),"int"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER_LONG"),"long"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BYTE"),"byte"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_FLOAT"),"float"]]),"CAST"),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_CAST_TOOLTIP"))}},Blockly.Arduino.math_sinusoid=function(){var e=Blockly.Arduino.valueToCode(this,"AMPLITUDE",Blockly.Arduino.ORDER_NONE),o=Blockly.Arduino.valueToCode(this,"FREQ",Blockly.Arduino.ORDER_NONE),t=Blockly.Arduino.valueToCode(this,"PHASE",Blockly.Arduino.ORDER_NONE),l=Blockly.Arduino.valueToCode(this,"OFFSET",Blockly.Arduino.ORDER_NONE),n=Blockly.Arduino.valueToCode(this,"TIME",Blockly.Arduino.ORDER_NONE),i="("+e+")*sin((6.28318530717959e-06)*(("+o+")*("+n+"))+0.017453292519943*("+t+"))+("+l+")";return[i,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.math_sinusoid={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),tags:["math"],helpUrl:RoboBlocks.getHelpUrl("math_sinusoid"),examples:["math_sinusoid_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_MATH),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.appendValueInput("AMPLITUDE").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_AMPLITUDE")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.appendValueInput("FREQ").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_FREQ")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.appendValueInput("PHASE").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_PHASE")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.appendValueInput("OFFSET").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_OFFSET")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.appendValueInput("TIME").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_TIME")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_TOOLTIP"))}},Blockly.Arduino.math_single=function(){var e,o,t=this.getFieldValue("OP"),l="";if("NEG"===t)return e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_UNARY_PREFIX)||"",o=RoboBlocks.findPinMode(e),l+=o.code,e=o.pin,"-"===e[0]&&(e=" "+e),l+="-"+e,[l,Blockly.Arduino.ORDER_UNARY_PREFIX];"SIN"===t||"COS"===t||"TAN"===t?(e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"",o=RoboBlocks.findPinMode(e),l+=o.code,e=o.pin):"LOG10"===t?l="":(e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE)||"",o=RoboBlocks.findPinMode(e),l+=o.code,e=o.pin);var n=3.14159;switch(t){case"ABS":l+="abs("+e+")";break;case"ROOT":l+="sqrt("+e+")";break;case"LN":l+="log("+e+")";break;case"EXP":l+="exp("+e+")";break;case"POW10":l+="pow(10,"+e+")";break;case"SIN":l+="sin("+e+" / 180 * "+n+")";break;case"COS":l+="cos("+e+" / 180 * "+n+")";break;case"TAN":l+="tan("+e+" / 180 * "+n+")"}if(l)return[l,Blockly.Arduino.ORDER_UNARY_POSTFIX];switch(t){case"LOG10":e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE)||"",o=RoboBlocks.findPinMode(e),l+=o.code,e=o.pin,l+="log("+e+") / log(10)";break;case"ASIN":l+="asin("+e+") / "+n+" * 180";break;case"ACOS":l+="acos("+e+") / "+n+" * 180";break;case"ATAN":l+="atan("+e+") / "+n+" * 180";break;default:throw"Unknown math operator: "+t}return[l,Blockly.Arduino.ORDER_MULTIPLICATIVE]},Blockly.Blocks.math_single={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("math_single"),examples:["math_single_example.bly"],tags:["math"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_MATH),this.setOutput(!0,Number),this.appendValueInput("NUM").setCheck(Number).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_MATH_SINGLE_OP_ROOT")||"SQR ROOT","ROOT"],[RoboBlocks.locales.getKey("LANG_MATH_SINGLE_OP_ABSOLUTE")||"ABS","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]),"OP");var e=this;this.setTooltip(function(){var o=e.getFieldValue("OP");return Blockly.Blocks.math_single.TOOLTIPS[o]})}},Blockly.Blocks.math_single.TOOLTIPS={ROOT:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_ROOT"),ABS:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_ABS"),NEG:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_NEG"),LN:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_LN"),LOG10:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_LOG10"),EXP:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_EXP"),POW10:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_POW10")},Blockly.Arduino.pin_analog=function(){var e=this.getFieldValue("PIN")||"";return[e,Blockly.Arduino.ORDER_NONE]},Blockly.Blocks.pin_analog={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),helpUrl:RoboBlocks.getHelpUrl("pin_analog"),examples:["inout_analog_read_example.bly"],tags:["input","output"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendDummyInput("").appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_ANALOG")).appendField(new Blockly.FieldDropdown(profiles["default"].analog),"PIN"),this.setInputsInline(!0),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_TOOLTIP"))}},Blockly.Arduino.pin_digital=function(){var e=this.getFieldValue("PIN")||"";return[e,Blockly.Arduino.ORDER_NONE]},Blockly.Blocks.pin_digital={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),helpUrl:RoboBlocks.getHelpUrl("pin_digital"),examples:["inout_digital_read_example.bly"],tags:["input","output"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendDummyInput("").appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_DIGITAL")).appendField(new Blockly.FieldDropdown(profiles["default"].digital),"PIN"),this.setInputsInline(!0),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_TOOLTIP"))}},Blockly.Arduino.pin_pwm=function(){var e=this.getFieldValue("PIN")||"";return[e,Blockly.Arduino.ORDER_NONE]},Blockly.Blocks.pin_pwm={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),helpUrl:RoboBlocks.getHelpUrl("pin_pwm"),examples:["inout_analog_write_example.bly"],tags:["input","output"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendDummyInput("").appendField(new Blockly.FieldImage("img/blocks/pwm_signal.svg",24*options.zoom,24*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_PWM")).appendField(new Blockly.FieldDropdown(profiles["default"].pwm),"PIN"),this.setInputsInline(!0),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_TOOLTIP"))}},Blockly.Arduino.serial_available=function(){var e=Blockly.Arduino.statementToCode(this,"DO");e=e.replace(/&quot;/g,'"'),Blockly.Arduino.setups_.setup_serial=JST.serial_parseint_setups({bitrate:profiles["default"].serial});var o=JST.serial_available({branch:e});return o},Blockly.Blocks.serial_available={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),helpUrl:RoboBlocks.getHelpUrl("serial_available"),tags:["serial","communication"],examples:["serial_available_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_AVAILABLE")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.appendStatementInput("DO").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_REPEAT_INPUT_DO")),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_AVAILABLE_TOOLTIP"))}},Blockly.Arduino.serial_parseint=function(){Blockly.Arduino.setups_.setup_serial=JST.serial_parseint_setups({bitrate:profiles["default"].serial});var e="Serial.parseInt()";return[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.serial_parseint={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),helpUrl:RoboBlocks.getHelpUrl("serial_parseint"),tags:["serial","communication"],examples:["logic_operation_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PARSEINT")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PARSEINT_TOOLTIP"))}},Blockly.Arduino.serial_print=function(){var e=Blockly.Arduino.valueToCode(this,"CONTENT",Blockly.Arduino.ORDER_ATOMIC),o="",t=RoboBlocks.findPinMode(e);return o+=t.code,e=t.pin,Blockly.Arduino.setups_.setup_serial=JST.serial_print_setups({bitrate:profiles["default"].serial}),o+=JST.serial_print({content:e})},Blockly.Blocks.serial_print={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),helpUrl:RoboBlocks.getHelpUrl("serial_print"),tags:["serial","communication"],examples:["serial_print_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION),this.appendValueInput("CONTENT",String).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PRINT")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PRINT_TOOLTIP"))}},Blockly.Arduino.serial_println=function(){var e=Blockly.Arduino.valueToCode(this,"CONTENT",Blockly.Arduino.ORDER_ATOMIC),o="",t=RoboBlocks.findPinMode(e);return o+=t.code,e=t.pin,Blockly.Arduino.setups_.setup_serial=JST.serial_println_setups({bitrate:profiles["default"].serial}),o+=JST.serial_println({content:e})},Blockly.Blocks.serial_println={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),helpUrl:RoboBlocks.getHelpUrl("serial_println"),tags:["serial","communication"],examples:["serial_print_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION),this.appendValueInput("CONTENT",String).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PRINTLN")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PRINTLN_TOOLTIP"))}},Blockly.Arduino.serial_read=function(){Blockly.Arduino.setups_.setup_serial=JST.serial_read_setups({bitrate:profiles["default"].serial});var e=JST.serial_read({});return[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.serial_read={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),helpUrl:RoboBlocks.getHelpUrl("serial_read"),examples:["serial_read_example.bly"],tags:["serial","communication"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_READ")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setOutput(!0,String),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_READ_TOOLTIP"))}},Blockly.Arduino.serial_readstring=function(){Blockly.Arduino.setups_.setup_serial=JST.serial_readstring_setups({bitrate:profiles["default"].serial});var e=JST.serial_readstring({});return[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.serial_readstring={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),tags:["serial","communication"],helpUrl:RoboBlocks.getHelpUrl("serial_readstring"),examples:["serial_readstring_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_READSTRING")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setOutput(!0,String),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_READSTRING_TOOLTIP"))}},Blockly.Arduino.advanced_conversion=function(){var e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE),o="",t=RoboBlocks.findPinMode(e);o+=t.code,e=t.pin;var l=this.getFieldValue("CONV");return o+=JST.advanced_conversion({value_num:e,convertion:l}),[o,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.advanced_conversion={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),tags:["serial","communication"],helpUrl:RoboBlocks.getHelpUrl("advanced_conversion"),examples:["advanced_conversion_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_CONVERT")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_DECIMAL")||"DEC","DEC"],[RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_HEXADECIMAL")||"HEX","HEX"],[RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_OCTAL")||"OCT","OCT"],[RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_BINARY")||"BIN","BIN"]]),"CONV"),this.appendValueInput("NUM",Number).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_VALUE")).setAlign(Blockly.ALIGN_RIGHT).setCheck(Number),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_TOOLTIP"))}},Blockly.Arduino.serial_timeout=function(){var e=Blockly.Arduino.valueToCode(this,"TIMEOUT",Blockly.Arduino.ORDER_ATOMIC),o="";return Blockly.Arduino.setups_.setup_serial_timeout="Serial.setTimeout("+e+");\n",o},Blockly.Blocks.serial_timeout={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),tags:["serial","communication"],helpUrl:RoboBlocks.getHelpUrl("serial_timeout"),tags:["serial"],examples:["serial_read_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION),this.appendValueInput("TIMEOUT",Number).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_TIMEOUT")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_TIMEOUT_TOOLTIP"))}},Blockly.Arduino.serial_special=function(){var e="'"+this.getFieldValue("CHAR")+"'";return[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.serial_special={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("serial_special"),tags:["serial"],examples:["serial_special_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_TAB")||"TAB","\\t"],[RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_CARRIAGE_RETURN")||"CARRIAGE RETURN","\\r"],[RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_LINE_FEED")||"LINE FEED","\\n"],[RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_QUOTE")||"QUOTE","\\'"],[RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_DOUBLE_QUOTE")||"DOUBLE_QUOTE",'\\"']]),"CHAR"),this.setOutput(!0,String),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_TOOLTIP"))}},Blockly.Arduino.text=function(){var e=Blockly.Arduino.quote_(this.getFieldValue("TEXT"));return[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text"),examples:["controls_setupLoop_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendDummyInput().appendField('"').appendField(new Blockly.FieldTextInput(""),"TEXT").appendField('"'),this.setOutput(!0,String),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_TEXT_TOOLTIP"))}},Blockly.Arduino.text_append=function(){var e=Blockly.Arduino.valueToCode(this,"VAR",Blockly.Arduino.ORDER_NONE)||"",o=Blockly.Arduino.valueToCode(this,"TEXT",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"",t="",l=RoboBlocks.findPinMode(e);return t+=l.code,e=l.pin,l=RoboBlocks.findPinMode(o),t+=l.code,o=l.pin,t+=e+" += String("+o+");\n"},Blockly.Blocks.text_append={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_append"),examples:["text_append_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("VAR").appendField(RoboBlocks.locales.getKey("LANG_TEXT_APPEND_TO")),this.appendValueInput("TEXT").appendField(RoboBlocks.locales.getKey("LANG_TEXT_APPEND_APPENDTEXT")),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setInputsInline(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_APPEND_TOOLTIP"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(e,o){Blockly.Names.equals(e,this.getFieldValue("VAR"))&&this.setTitleValue(o,"VAR")},getVariables:function(){var e=Blockly.Variables.allUsedVariables,o=[];if(e.length>0)for(var t in e)o.push([e[t],e[t]]);else o.push(["",""]);return o},onchange:function(){}},Blockly.Arduino.text_equalsIgnoreCase=function(){var e=Blockly.Arduino.valueToCode(this,"STRING1",Blockly.Arduino.ORDER_NONE);e=e.replace(/&quot;/g,'"');var o=Blockly.Arduino.valueToCode(this,"STRING2",Blockly.Arduino.ORDER_NONE);o=o.replace(/&quot;/g,'"');var t="",l=RoboBlocks.findPinMode(e);return t+=l.code,e=l.pin,l=RoboBlocks.findPinMode(o),t+=l.code,o=l.pin,t+=JST.text_equalsIgnoreCase({string1:e,string2:o}),[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text_equalsIgnoreCase={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_equalsIgnoreCase"),examples:["text_equalsIgnoreCase_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("STRING1").appendField(RoboBlocks.locales.getKey("LANG_TEXT_EQUALSIGNORECASE_IS")),this.appendValueInput("STRING2").appendField(RoboBlocks.locales.getKey("LANG_TEXT_EQUALSIGNORECASE_EQUAL")).setAlign(Blockly.ALIGN_RIGHT),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_TEXT_EQUALSIGNORECASE_QUESTION")),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_EQUALSIGNORECASE_TOOLTIP"))}},Blockly.Arduino.text_join=function(){var e,o="";if(0===this.itemCount_)return["''",Blockly.Arduino.ORDER_ATOMIC];if(1===this.itemCount_){var t=Blockly.Arduino.valueToCode(this,"ADD0",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"";return e=RoboBlocks.findPinMode(t),o+=e.code,t=e.pin,o+="String("+t+")",[o,Blockly.Arduino.ORDER_UNARY_POSTFIX]}var l=Blockly.Arduino.valueToCode(this,"ADD0",Blockly.Arduino.ORDER_NONE)||"";e=RoboBlocks.findPinMode(l),o=e.code,l=e.pin;for(var n="String("+l,i=1;i<this.itemCount_;i++)l=Blockly.Arduino.valueToCode(this,"ADD"+i,Blockly.Arduino.ORDER_NONE)||"",e=RoboBlocks.findPinMode(l),o+=e.code,l=e.pin,n+=") + String("+l;return o+=n+")",[o,Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Blocks.text_join={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),helpUrl:RoboBlocks.getHelpUrl("text_join"),examples:["text_join_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("ADD0").appendField(RoboBlocks.locales.getKey("LANG_TEXT_JOIN_Field_CREATEWITH")),this.appendValueInput("ADD1"),this.setOutput(!0,String),this.setMutator(new Blockly.Mutator(["text_create_join_item"])),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_JOIN_TOOLTIP")),this.itemCount_=2},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(e){for(var o=0;o<this.itemCount_;o++)this.removeInput("ADD"+o);for(this.itemCount_=window.parseInt(e.getAttribute("items"),10),o=0;o<this.itemCount_;o++){var t=this.appendValueInput("ADD"+o);0===o&&t.appendField(RoboBlocks.locales.getKey("LANG_TEXT_JOIN_Field_CREATEWITH"))}0===this.itemCount_&&this.appendDummyInput("EMPTY").appendField(new Blockly.FieldImage(Blockly.pathToBlockly+"media/quote0.png",12,12)).appendField(new Blockly.FieldImage(Blockly.pathToBlockly+"media/quote1.png",12,12))},decompose:function(e){var o=Blockly.Block.obtain(e,"text_create_join_container");o.initSvg();for(var t=o.getInput("STACK").connection,l=0;l<this.itemCount_;l++){var n=Blockly.Block.obtain(e,"text_create_join_item");n.initSvg(),t.connect(n.previousConnection),t=n.nextConnection}return o},compose:function(e){if(0===this.itemCount_)this.removeInput("EMPTY");else for(var o=this.itemCount_-1;o>=0;o--)this.removeInput("ADD"+o);this.itemCount_=0;for(var t=e.getInputTargetBlock("STACK");t;){var l=this.appendValueInput("ADD"+this.itemCount_);0===this.itemCount_&&l.appendField(RoboBlocks.locales.getKey("LANG_TEXT_JOIN_Field_CREATEWITH")),t.valueConnection_&&l.connection.connect(t.valueConnection_),this.itemCount_++,t=t.nextConnection&&t.nextConnection.targetBlock()}0===this.itemCount_&&this.appendDummyInput("EMPTY").appendField(new Blockly.FieldImage(Blockly.pathToBlockly+"media/quote0.png",12,12)).appendField(new Blockly.FieldImage(Blockly.pathToBlockly+"media/quote1.png",12,12))},saveConnections:function(e){for(var o=e.getInputTargetBlock("STACK"),t=0;o;){var l=this.getInput("ADD"+t);o.valueConnection_=l&&l.connection.targetConnection,t++,o=o.nextConnection&&o.nextConnection.targetBlock()}}},Blockly.Blocks.text_create_join_container={init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_TEXT_CREATE_JOIN_TITLE_JOIN")),this.appendStatementInput("STACK"),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_CREATE_JOIN_TOOLTIP")),this.contextMenu=!1}},Blockly.Blocks.text_create_join_item={init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM")),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_CREATE_JOIN_ITEM_TOOLTIP")),this.contextMenu=!1}},Blockly.Arduino.text_length=function(){var e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"",o="",t=RoboBlocks.findPinMode(e);return o+=t.code,e=t.pin,o+=JST.text_length({argument0:e}),[o,Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Blocks.text_length={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_length"),examples:["text_length_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("VALUE").setCheck([String,Array]).appendField(RoboBlocks.locales.getKey("LANG_TEXT_LENGTH_INPUT_LENGTH")),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_LENGTH_TOOLTIP"))}},Blockly.Arduino.text_substring=function(){var e=Blockly.Arduino.valueToCode(this,"STRING1",Blockly.Arduino.ORDER_NONE),o=Blockly.Arduino.valueToCode(this,"FROM",Blockly.Arduino.ORDER_NONE),t=Blockly.Arduino.valueToCode(this,"TO",Blockly.Arduino.ORDER_NONE),l="",n=RoboBlocks.findPinMode(e);return l+=n.code,e=n.pin,n=RoboBlocks.findPinMode(o),l+=n.code,o=n.pin,n=RoboBlocks.findPinMode(t),l+=n.code,t=n.pin,l+=JST.text_substring({string1:e,from:o,to:t}),[l,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text_substring={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_substring"),examples:["text_substring_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("STRING1").appendField(RoboBlocks.locales.getKey("LANG_TEXT_SUBSTRING")),this.appendValueInput("FROM").appendField(RoboBlocks.locales.getKey("LANG_TEXT_SUBSTRING_FROM")).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT),this.appendValueInput("TO").appendField(RoboBlocks.locales.getKey("LANG_TEXT_SUBSTRING_TO")).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_SUBSTRING_TOOLTIP"))}},Blockly.Arduino.text_search=function(){var e=Blockly.Arduino.valueToCode(this,"STRING1",Blockly.Arduino.ORDER_NONE),o=Blockly.Arduino.valueToCode(this,"STRING2",Blockly.Arduino.ORDER_NONE),t=this.getFieldValue("POSITION"),l="",n=RoboBlocks.findPinMode(e);return l+=n.code,e=n.pin,n=RoboBlocks.findPinMode(o),l+=n.code,o=n.pin,l="FIRST"===t?o+".indexOf("+e+")":o+".lastIndexOf("+e+")",[l,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text_search={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_search"),examples:["text_search_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("STRING1").appendField(RoboBlocks.locales.getKey("LANG_TEXT_SEARCH")),this.appendValueInput("STRING2").appendField(RoboBlocks.locales.getKey("LANG_TEXT_IN")),this.appendDummyInput("").appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_TEXT_FIRST"),"FIRST"],[RoboBlocks.locales.getKey("LANG_TEXT_LAST"),"LAST"]]),"POSITION"),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_SEARCH_TOOLTIP"))}},Blockly.Arduino.text_contains=function(){var e=Blockly.Arduino.valueToCode(this,"STRING1",Blockly.Arduino.ORDER_NONE),o=Blockly.Arduino.valueToCode(this,"STRING2",Blockly.Arduino.ORDER_NONE),t="",l=RoboBlocks.findPinMode(e);return t+=l.code,e=l.pin,l=RoboBlocks.findPinMode(o),t+=l.code,o=l.pin,t="("+o+".indexOf("+e+")>0)",[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text_contains={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_contains"),examples:["text_contains_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("STRING2").appendField(RoboBlocks.locales.getKey("LANG_TEXT_CONTAINS")),this.appendValueInput("STRING1").appendField(RoboBlocks.locales.getKey("LANG_TEXT_EXPRESSION")),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_CONTAINS_TOOLTIP"))}},Blockly.Arduino.text_to_text=function(){var e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_NONE),o=this.getFieldValue("CAST")||"",t="";return t+="char"==o?"("+o+")("+e+")":"String("+e+")",[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text_to_text={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_to_text"),examples:["text_to_text_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_TEXT_CAST")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_STRING"),"String"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_CHAR"),"char"]]),"CAST"),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_SUBSTRING_TOOLTIP"))}},Blockly.Arduino.variables_get=function(){var e=this.getFieldValue("VAR")||"";return void 0!==RoboBlocks.variables[this.getFieldValue("VAR")]&&(this.var_type=RoboBlocks.variables[this.getFieldValue("VAR")][0]),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.variables_get={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_get"),tags:["variables"],examples:["variables_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendDummyInput("DUMMY").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GET")).appendField(new Blockly.FieldDropdown(this.getVariables()),"VAR"),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_GET_TOOLTIP"))},getVariables:function(){var e=Blockly.Variables.allVariables(),o=[];if(e.length>0)for(var t in e)o.push([e[t],e[t]]);else o.push(["",""]);return o},onchange:function(){if(this.workspace){this.last_variable=this.getFieldValue("VAR"),this.last_variables||(this.last_variables=Blockly.Variables.allVariables());var e=Blockly.Variables.allVariables();for(var o in e)Blockly.Variables.allVariables()[o]!==this.last_variables[o]&&(this.getInput("DUMMY").removeField("VAR"),this.getInput("DUMMY").appendField(new Blockly.FieldDropdown(this.getVariables()),"VAR"),this.setFieldValue(this.last_variable,"VAR"),this.last_variables=Blockly.Variables.allVariables());try{this.exists()?this.setWarningText(null):this.setWarningText(RoboBlocks.locales.getKey("LANG_VARIABLES_CALL_WITHOUT_DEFINITION"));
}catch(t){}}},renameVar:function(e,o){Blockly.Names.equals(e,this.getFieldValue("VAR"))&&this.setTitleValue(o,"VAR")},exists:function(){for(var e in Blockly.Variables.allVariables())if(Blockly.Variables.allVariables()[e]===this.getFieldValue("VAR"))return!0;return!1}},Blockly.Arduino.variables_set=function(){var e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"",o=this.getFieldValue("VAR")||"",t="",l=RoboBlocks.findPinMode(e);return t+=l.code,e=l.pin,t+=JST.variables_set({varName:o,varValue:e})},Blockly.Blocks.variables_set={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_set"),tags:["variables"],examples:["variables_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_SET")).appendField(new Blockly.FieldDropdown(this.getVariables()),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_SET_AS")).setAlign(Blockly.ALIGN_RIGHT),this.setInputsInline(!1),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_SET_TOOLTIP"))},getVariables:function(){var e=Blockly.Variables.allVariables(),o=[];if(e.length>0)for(var t in e)o.push([e[t],e[t]]);else o.push(["",""]);return o},onchange:function(){if(this.workspace){this.last_variable=this.getFieldValue("VAR"),this.last_variables||(this.last_variables=Blockly.Variables.allVariables());var e=Blockly.Variables.allVariables();for(var o in e)Blockly.Variables.allVariables()[o]!==this.last_variables[o]&&(this.getInput("VALUE").removeField("VAR"),this.getInput("VALUE").insertFieldAt(1,new Blockly.FieldDropdown(this.getVariables()),"VAR"),this.last_variables=Blockly.Variables.allVariables());try{this.exists()?this.setWarningText(null):this.setWarningText(RoboBlocks.locales.getKey("LANG_VARIABLES_CALL_WITHOUT_DEFINITION"))}catch(t){}}},renameVar:function(e,o){Blockly.Names.equals(e,this.getFieldValue("VAR"))&&this.setTitleValue(o,"VAR")},exists:function(){for(var e in Blockly.Variables.allVariables())if(Blockly.Variables.allVariables()[e]===this.getFieldValue("VAR"))return!0;return!1}},Blockly.Arduino.variables_local=function(){var e,o=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),t=this.getFieldValue("VAR")||"",l="",n="",i=!1,s=RoboBlocks.findPinMode(o);n+=s.code,o=s.pin;for(var _ in Blockly.Arduino.definitions_)if(Blockly.Arduino.definitions_[_].search(o+" \\(")>=0){i=!0;break}if(o.search('"')>=0||o.search("substring\\(")>=0)e="String",n+=e+" "+t+"="+o+";\n";else if(i)for(_ in Blockly.Arduino.definitions_)Blockly.Arduino.definitions_[_].search(o)>=0&&(e="int"===Blockly.Arduino.definitions_[_].substring(0,3)||"//b"===Blockly.Arduino.definitions_[_].substring(0,3)?"int *"===Blockly.Arduino.definitions_[_].substring(0,5)||"int _"===Blockly.Arduino.definitions_[_].substring(0,5)?"int *":"int":"Str"===Blockly.Arduino.definitions_[_].substring(0,3)?"String":"",n+=e+" "+t+"="+o+";\n");else"{"===o[0]?(e="int *",o=o.replace("{",""),o=o.replace("}",""),o=o.split(","),n+=e+t+"=(int*)malloc(3*sizeof(int));\n",n+=t+"[0]="+o[0]+";\n"+t+"[1]="+o[1]+";\n"+t+"[2]="+o[2]+";\n"):this.isVariable(o)?(e=RoboBlocks.variables[o][0],n+=e+" "+t+"="+o+";\n"):o.search("readJoystick")>=0?(e="int *",n+=e+t+"=(int*)malloc(3*sizeof(int));\n",n+=t+"="+o+";\n"):o.search("analogRead")>=0||o.search("digitalRead")>=0||o.search("Distanc")>=0||!isNaN(parseFloat(o))||o.search("random")>=0||o.search("map")>=0||o.search("\\[")>=0||o.search("abs")>=0||o.search("sqrt")>=0||o.search("log")>=0||o.search("exp")>=0||o.search("pow")>=0||o.search("\\+")?(e="int",n+=e+" "+t+l+"="+o+";\n"):(e="unknown",n+=e+" "+t+"="+o+";\n");return RoboBlocks.variables[t]=[e,"local"],RoboBlocks.variables["analogRead("+t+")"]=[e,"local"],RoboBlocks.variables["digitalRead("+t+")"]=[e,"local"],n},Blockly.Blocks.variables_local={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_local"),tags:["variables"],examples:["variables_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL")).appendField(new Blockly.FieldTextInput(""),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL_EQUALS")),this.setInputsInline(!1),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL_TOOLTIP"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(e,o){Blockly.Names.equals(e,this.getFieldValue("VAR"))&&this.setFieldValue(o,"VAR")},isVariable:function(e){for(var o in Blockly.Variables.allVariables())if(Blockly.Variables.allVariables()[o]===e)return!0;return!1},validName:function(e){if(e&&e.length>0){for(var o=0;o<e.length&&!isNaN(parseFloat(e[o]));)e=e.substring(1,e.length);for(e=e.replace(/([ ])/g,"_"),e=e.replace(/([áàâä])/g,"a"),e=e.replace(/([éèêë])/g,"e"),e=e.replace(/([íìîï])/g,"i"),e=e.replace(/([óòôö])/g,"o"),e=e.replace(/([úùûü])/g,"u"),e=e.replace(/([ñ])/g,"n"),e=e.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|<>\-\&\Ç\%\=\~\{\}\¿\¡\"\@\:\;\-\"\·\|\º\ª\¨\'\·\̣\─\ç\`\´\¨\^])/g,""),o=0;o<e.length&&!isNaN(parseFloat(e[o]));)e=e.substring(1,e.length);for(var t in Blockly.Arduino.RESERVED_WORDS_){var l=Blockly.Arduino.RESERVED_WORDS_.split(",");if(e===l[t]){this.setWarningText(RoboBlocks.locales.getKey("LANG_RESERVED_WORDS")),e="";break}this.setWarningText(null)}}return e},onchange:function(){if(this.last_variable!==this.getFieldValue("VAR")){var e=this.getFieldValue("VAR");e=this.validName(e);try{this.setFieldValue(e,"VAR")}catch(o){}this.last_variable=e}}},Blockly.Arduino.variables_local_type=function(){var e=this.getFieldValue("VAR_TYPE"),o=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),t=this.getFieldValue("VAR")||"",l="",n=RoboBlocks.findPinMode(o);return l+=n.code,o=n.pin,l+=e+" "+t+"="+o+";\n",RoboBlocks.variables[t]=[e,"local"],RoboBlocks.variables["analogRead("+t+")"]=[e,"local"],RoboBlocks.variables["digitalRead("+t+")"]=[e,"local"],l},Blockly.Blocks.variables_local_type={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_local_type"),tags:["variables"],examples:["variables_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL")).appendField(new Blockly.FieldTextInput(""),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL_TYPE")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_STRING"),"String"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER"),"int"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER_LONG"),"long"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BYTE"),"byte"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BOOL"),"bool"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_FLOAT"),"float"]]),"VAR_TYPE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_EQUALS")),this.setInputsInline(!1),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL_TOOLTIP2"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(e,o){Blockly.Names.equals(e,this.getFieldValue("VAR"))&&this.setFieldValue(o,"VAR")},isVariable:Blockly.Blocks.variables_local.isVariable,validName:Blockly.Blocks.variables_local.validName,onchange:Blockly.Blocks.variables_local.onchange},Blockly.Arduino.variables_global=function(){var e,o=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),t=this.getFieldValue("VAR")||"",l=!1,n=RoboBlocks.findPinMode(o);Blockly.Arduino.setups_["pinMode"+o]=n.code,o=n.pin;for(var i in Blockly.Arduino.definitions_)if(Blockly.Arduino.definitions_[i].search(o+" \\(")>=0){l=!0;break}if(o.search('"')>=0||o.search("substring\\(")>=0)e="String",Blockly.Arduino.definitions_["declare_var"+t]=e+" "+t+"="+o+";";else if(l){for(i in Blockly.Arduino.definitions_)if(Blockly.Arduino.definitions_[i].search(o)>=0){e="int"===Blockly.Arduino.definitions_[i].substring(0,3)||"//b"===Blockly.Arduino.definitions_[i].substring(0,3)?"int *"===Blockly.Arduino.definitions_[i].substring(0,5)||"int _"===Blockly.Arduino.definitions_[i].substring(0,5)?"int *":"int":"Str"===Blockly.Arduino.definitions_[i].substring(0,3)?"String":"",Blockly.Arduino.definitions_["declare_var"+t]=e+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+o+";\n";break}}else"{"===o[0]?(e="int *",o=o.replace("{",""),o=o.replace("}",""),o=o.split(","),Blockly.Arduino.definitions_["declare_var"+t]=e+t+"=(int*)malloc(3*sizeof(int));\n",Blockly.Arduino.setups_["define_var"+t]=t+"[0]="+o[0]+";\n  "+t+"[1]="+o[1]+";\n  "+t+"[2]="+o[2]+";\n"):this.isVariable(o)?(e=RoboBlocks.variables[o][0],Blockly.Arduino.definitions_["declare_var"+t]=e+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+o+";\n"):o.search("readJoystick")>=0?(e="int *",Blockly.Arduino.definitions_["declare_var"+t]=e+t+"=(int*)malloc(3*sizeof(int));\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+o+";\n"):o.search("analogRead")>=0||o.search("digitalRead")>=0||o.search("Distanc")>=0||!isNaN(parseFloat(o))||o.search("random")>=0||o.search("map")>=0||o.search("\\[")>=0||o.search("abs")>=0||o.search("sqrt")>=0||o.search("log")>=0||o.search("log")>=0||o.search("exp")>=0||o.search("pow")>=0||o.search("\\+")?(e="int",isNaN(parseFloat(o))?(o.search("analogRead")>=0||o.search("digitalRead")>=0||o.search("Distanc")>=0||o.search("random")>=0||o.search("map")>=0||o.search("\\[")>=0||o.search("abs")>=0||o.search("sqrt")>=0||o.search("log")>=0||o.search("log")>=0||o.search("exp")>=0||o.search("pow")>=0||o.search("\\+"))&&(Blockly.Arduino.definitions_["declare_var"+t]=e+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+o+";\n"):Blockly.Arduino.definitions_["declare_var"+t]=e+" "+t+"="+o+";\n"):(e="unknown",Blockly.Arduino.definitions_["declare_var"+t]=e+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+o+";\n");return RoboBlocks.variables[t]=[e,"global"],RoboBlocks.variables["analogRead("+t+")"]=[e,"global"],RoboBlocks.variables["digitalRead("+t+")"]=[e,"global"],""},Blockly.Blocks.variables_global={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_global"),tags:["variables"],examples:["variables_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL")).appendField(new Blockly.FieldTextInput(""),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_EQUALS")),this.setInputsInline(!1),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_TOOLTIP"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(e,o){Blockly.Names.equals(e,this.getFieldValue("VAR"))&&this.setFieldValue(o,"VAR")},isVariable:Blockly.Blocks.variables_local.isVariable,validName:Blockly.Blocks.variables_local.validName,onchange:Blockly.Blocks.variables_local.onchange},Blockly.Arduino.variables_global_type=function(){var e=this.getFieldValue("VAR_TYPE"),o=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),t=this.getFieldValue("VAR")||"",t=this.getFieldValue("VAR")||"",l="",n=RoboBlocks.findPinMode(o);return l+=n.code,o=n.pin,Blockly.Arduino.definitions_["declare_var"+t]=e+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+o+";\n",RoboBlocks.variables[t]=[e,"global"],RoboBlocks.variables["analogRead("+t+")"]=[e,"global"],RoboBlocks.variables["digitalRead("+t+")"]=[e,"global"],""},Blockly.Blocks.variables_global_type={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_global_type"),tags:["variables"],examples:["variables_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL")).appendField(new Blockly.FieldTextInput(""),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_TYPE")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_STRING"),"String"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER"),"int"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER_LONG"),"long"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BYTE"),"byte"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BOOL"),"bool"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_FLOAT"),"float"]]),"VAR_TYPE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_EQUALS")),this.setInputsInline(!1),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_TOOLTIP2"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(e,o){Blockly.Names.equals(e,this.getFieldValue("VAR"))&&this.setFieldValue(o,"VAR")},isVariable:Blockly.Blocks.variables_local.isVariable,onchange:Blockly.Blocks.variables_local.onchange,validName:Blockly.Blocks.variables_local.validName},Blockly.Arduino.variables_global_volatile_type=function(){var e=this.getFieldValue("VAR_TYPE"),o=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),t=this.getFieldValue("VAR")||"",t=this.getFieldValue("VAR")||"",l="",n=RoboBlocks.findPinMode(o);return l+=n.code,o=n.pin,Blockly.Arduino.definitions_["declare_var"+t]="volatile "+e+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+o+";\n",RoboBlocks.variables[t]=["volatile "+e,"global"],RoboBlocks.variables["analogRead("+t+")"]=[e,"global"],RoboBlocks.variables["digitalRead("+t+")"]=[e,"global"],""},Blockly.Blocks.variables_global_volatile_type={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_global_volatile_type"),tags:["variables"],examples:["variables_global_volatile_type_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_VOLATILE")).appendField(new Blockly.FieldTextInput(""),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_TYPE")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER"),"int"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER_LONG"),"long"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BYTE"),"byte"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BOOL"),"bool"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_FLOAT"),"float"]]),"VAR_TYPE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_EQUALS")),this.setInputsInline(!1),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_VOLATILE_TOOLTIP"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(e,o){Blockly.Names.equals(e,this.getFieldValue("VAR"))&&this.setFieldValue(o,"VAR")},isVariable:Blockly.Blocks.variables_local.isVariable,onchange:Blockly.Blocks.variables_local.onchange,validName:Blockly.Blocks.variables_local.validName},Blockly.Arduino.button=function(){var e=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),o="",t=RoboBlocks.findPinMode(e);return o+=t.code,e=t.pin,RoboBlocks.isVariable(e)?o+=JST.zum_button_setups({dropdown_pin:e,pullup:"INPUT"}):Blockly.Arduino.setups_["setup_button_"+e]=JST.zum_button_setups({dropdown_pin:e,pullup:"INPUT"}),o+=JST.bq_button({dropdown_pin:e}),[o,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.button={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),tags:["input","output","button"],helpUrl:RoboBlocks.getHelpUrl("button"),examples:["button_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_BQ_BUTTON")).appendField(new Blockly.FieldImage("img/blocks/pushbutton.png",52*options.zoom,24*options.zoom)).setCheck(Number).appendField(RoboBlocks.locales.getKey("LANG_BQ_BUTTON_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT),this.setOutput(!0,Boolean),this.setTooltip(RoboBlocks.locales.getKey("LANG_BQ_BUTTON_TOOLTIP"))}},Blockly.Arduino.button_case=function(){var e=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),o="",t=RoboBlocks.findPinMode(e);o+=t.code,e=t.pin,RoboBlocks.isVariable(e)?o+=JST.zum_button_setups({dropdown_pin:e,pullup:"INPUT"}):Blockly.Arduino.setups_["setup_button_"+e]=JST.zum_button_setups({dropdown_pin:e,pullup:"INPUT"});var l="",n="";return l+=Blockly.Arduino.statementToCode(this,"PRESSED"),n+=Blockly.Arduino.statementToCode(this,"NOT_PRESSED"),l=l.replace(/&quot;/g,'"'),n=n.replace(/&quot;/g,'"'),o+="if ("+JST.bq_button({dropdown_pin:e})+"==LOW){\n"+l+"\n}\nelse{\n"+n+"\n}\n"},Blockly.Blocks.button_case={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),tags:["input","output","button"],helpUrl:RoboBlocks.getHelpUrl("button_case"),examples:["button_case_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_BQ_BUTTON")).appendField(new Blockly.FieldImage("img/blocks/pushbutton.png",52*options.zoom,24*options.zoom)).setCheck(Number).appendField(RoboBlocks.locales.getKey("LANG_BQ_BUTTON_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT),this.setOutput(!1,null),this.appendStatementInput("PRESSED").setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_BUTTON_PRESSED")),this.appendStatementInput("NOT_PRESSED").setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_BUTTON_NOT_PRESSED")),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(RoboBlocks.locales.getKey("LANG_BQ_BUTTON_TOOLTIP"))}},Blockly.Arduino.zum_button=function(){var e=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),o="",t=RoboBlocks.findPinMode(e);return o+=t.code,e=t.pin,pullup="INPUT_PULLUP",RoboBlocks.isVariable(e)?o+=JST.zum_button_setups({dropdown_pin:e,pullup:pullup}):Blockly.Arduino.setups_["setup_button_"+e]=JST.zum_button_setups({dropdown_pin:e,pullup:pullup}),o+=JST.zum_button({dropdown_pin:e}),[o,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.zum_button={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),tags:["input","output","button"],helpUrl:RoboBlocks.getHelpUrl("zum_button"),examples:["zum_button_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ZUM_BUTTON")).appendField(RoboBlocks.locales.getKey("LANG_ZUM_BUTTON_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)),this.appendDummyInput().appendField("pull-up?").appendField(new Blockly.FieldCheckbox("FALSE"),"PULLUP").setAlign(Blockly.ALIGN_RIGHT),this.setOutput(!0,Boolean),this.setTooltip(RoboBlocks.locales.getKey("LANG_ZUM_BUTTON_TOOLTIP")),this.setInputsInline(!1)}},Blockly.Arduino.joystick_dir=function(){var e=Blockly.Arduino.valueToCode(this,"PINX",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"PINY",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(e);return t+=l.code,e=l.pin,l=RoboBlocks.findPinMode(o),t+=l.code,o=l.pin,t="57.295779513082320876798154814105*atan2((float)(analogRead("+e+")-512),(float)(analogRead("+o+")-512))",[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.joystick_dir={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),tags:["joystick"],helpUrl:RoboBlocks.getHelpUrl("joystick_dir"),examples:["joystick_dir_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_DIR")).appendField(new Blockly.FieldImage("img/blocks/joystick.png",52*options.zoom,24*options.zoom)),this.appendValueInput("PINX").appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_PIN_X")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT).setCheck(Number),this.appendValueInput("PINY").appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_PIN_Y")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT).setCheck(Number),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_TOOLTIP"))}},Blockly.Arduino.joystick_mag=function(){var e=Blockly.Arduino.valueToCode(this,"PINX",Blockly.Arduino.ORDER_ATOMIC),o=Blockly.Arduino.valueToCode(this,"PINY",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(e);return t+=l.code,e=l.pin,l=RoboBlocks.findPinMode(o),t+=l.code,o=l.pin,t="min(100,0.1953125*sqrt(pow((float)(analogRead("+e+")-512),2)+pow((float)(analogRead("+o+")-512),2)))",[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.joystick_mag={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),tags:["joystick"],helpUrl:RoboBlocks.getHelpUrl("joystick_mag"),examples:["joystick_dir_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_MAG")).appendField(new Blockly.FieldImage("img/blocks/joystick.png",52*options.zoom,24*options.zoom)),this.appendValueInput("PINX").appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_PIN_X")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT).setCheck(Number),this.appendValueInput("PINY").appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_PIN_Y")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT).setCheck(Number),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_TOOLTIP"))}},Blockly.Arduino.zum_piezo_buzzerav=function(){var e=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)||"",o=Blockly.Arduino.valueToCode(this,"TONE",Blockly.Arduino.ORDER_ATOMIC),t=Blockly.Arduino.valueToCode(this,"DURA",Blockly.Arduino.ORDER_ATOMIC),l="",n=RoboBlocks.findPinMode(e);return l+=n.code,e=n.pin,n=RoboBlocks.findPinMode(o),l+=n.code,o=n.pin,n=RoboBlocks.findPinMode(t),l+=n.code,t=n.pin,l+=JST.zum_piezo_buzzerav({dropdown_pin:e,Buzztone:o,delay_time:t})},Blockly.Blocks.zum_piezo_buzzerav={category:RoboBlocks.locales.getKey("LANG_CATEGORY_SOUND"),tags:["buzzer"],helpUrl:RoboBlocks.getHelpUrl("zum_piezo_buzzerav"),examples:["zum_piezo_buzzerav_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_SOUND),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ZUM_PIEZO_BUZZERAV")).appendField(new Blockly.FieldImage("img/blocks/buzzer.svg",52*options.zoom,35*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_ZUM_PIEZO_BUZZERAV_PIN")),this.appendValueInput("TONE",Number).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_ZUM_PIEZO_BUZZERAV_TONE")),this.appendValueInput("DURA",Number).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_ZUM_PIEZO_BUZZERAV_DURATION")),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(RoboBlocks.locales.getKey("LANG_ZUM_PIEZO_BUZZERAV_TOOLTIP"))}},Blockly.Arduino.dyor_31_in_1_rele=function(){var e="",o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),t=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ATOMIC),l=RoboBlocks.findPinMode(o);return e+=l.code,o=l.pin,RoboBlocks.isVariable(o)?e+=JST.inout_digital_write_setups({dropdown_pin:o}):Blockly.Arduino.setups_["setup_green_digital_write_"+o]=JST.inout_digital_write_setups({dropdown_pin:o}),e+=JST.inout_digital_write({dropdown_pin:o,dropdown_stat:t}),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.dyor_31_in_1_rele={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),tags:["input","output","rele"],helpUrl:RoboBlocks.getHelpUrl("dyor_31_in_1_rele"),examples:["dyor_31_in_1_relay_example.bly"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_RELE")).appendField(new Blockly.FieldImage("img/blocks/relays.png",52*options.zoom,24*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_RELE_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)).setCheck(Number),this.appendValueInput("VALUE",Boolean).setCheck(Boolean).setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_RELE_VALUE")),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_RELE_TOOLTIP"))}},Blockly.Blocks},RoboBlocks={load:load};return"function"==typeof define&&define.amd?RoboBlocks:void(window.RoboBlocks=RoboBlocks)});