!function(o){"function"==typeof define&&define.amd?define(["underscore","blockly-bq","blockly.blocks"],o):o(_,window.Blockly,window.Blocks)}(function(_,Blockly,Blocks){var load=function(options){RoboBlocks.locales={defaultLanguage:{},processor:""},RoboBlocks.locales.setLang=function(o){this.defaultLanguage=o},RoboBlocks.locales.getKey=function(o){return this.defaultLanguage[o]},RoboBlocks.locales.setKey=function(o,e){this.defaultLanguage[o]=e},RoboBlocks.getHelpUrl=function(o){return'<script>$(function(){var file = "doc/"+roboblocksLanguage+"/'+o+'.html"; $.ajax({url:file,async:false,type:"HEAD",error: function(){file="doc/en-GB/'+o+'.html";},success: function(){}}); $("#doc").load(file);});<\/script>'},RoboBlocks.locales.initialize=function(){return this.defaultLanguage=options.langKeys||window.langKeys||{},this.processor=options.proc||window.FacilinoProcessor||"ArduinoNano",this},RoboBlocks.locales.initialize(),RoboBlocks.variables={},RoboBlocks.isVariable=function(o){for(var e in Blockly.Variables.allUsedVariables)if(Blockly.Variables.allUsedVariables[e]===o)return!0;return void 0!==RoboBlocks.variables[o]||(o.search("digitalRead\\(")>=0||o.search("analogRead\\(")>=0)},RoboBlocks.findPinMode=function(o){var e="";o=o.split(";\n");for(var t in o)o[t].search("pinMode")>=0?e+=o[t]+";\n":o=o[t];return{code:e,pin:o}},RoboBlocks.LANG_COLOUR_DISTANCE="#D04141",RoboBlocks.LANG_COLOUR_DISTANCE_ULTRASOUND="#D04141",RoboBlocks.LANG_COLOUR_SOUND="#CC7B44",RoboBlocks.LANG_COLOUR_SOUND_BUZZER="#CC7B44",RoboBlocks.LANG_COLOUR_SOUND_VOICE="#B46B3A",RoboBlocks.LANG_COLOUR_SOUND_MIC="#9D5C30",RoboBlocks.LANG_COLOUR_SOUND_MUSIC="#854C26",RoboBlocks.LANG_COLOUR_MOVEMENT="#CECE42",RoboBlocks.LANG_COLOUR_MOVEMENT_MOTORS="#CECE42",RoboBlocks.LANG_COLOUR_MOVEMENT_ROBOTBASE="#B8B838",RoboBlocks.LANG_COLOUR_MOVEMENT_ROBOTACC="#A3A32F",RoboBlocks.LANG_COLOUR_MOVEMENT_WALK="#8D8D25",RoboBlocks.LANG_COLOUR_SCREEN="#ACCE42",RoboBlocks.LANG_COLOUR_SCREEN_LCD="#ACCE42",RoboBlocks.LANG_COLOUR_SCREEN_LEDMATRIX="#9DBD3A",RoboBlocks.LANG_COLOUR_CONTROL="#44CC44",RoboBlocks.LANG_COLOUR_CONTROL_INTERRUPTS="#3EB83E",RoboBlocks.LANG_COLOUR_CONTROL_STATEMACHINE="#39A539",RoboBlocks.LANG_COLOUR_LOGIC="#42CE91",RoboBlocks.LANG_COLOUR_MATH="#42CBCE",RoboBlocks.LANG_COLOUR_TEXT="#42A3CE",RoboBlocks.LANG_COLOUR_COMMUNICATION="#4263CE",RoboBlocks.LANG_COLOUR_COMMUNICATION_USB="#4263CE",RoboBlocks.LANG_COLOUR_COMMUNICATION_BLUETOOTH="#3B5ABD",RoboBlocks.LANG_COLOUR_COMMUNICATION_WIFI="#3551AC",RoboBlocks.LANG_COLOUR_COMMUNICATION_IOT="#2E489B",RoboBlocks.LANG_COLOUR_ADVANCED="#9142CE",RoboBlocks.LANG_COLOUR_ADVANCED_ANALOG="#9142CE",RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL="#853BBE",RoboBlocks.LANG_COLOUR_ADVANCED_OTHER="#7A34AF",RoboBlocks.LANG_COLOUR_VARIABLES="#B244CC",RoboBlocks.LANG_COLOUR_PROCEDURES="#CE42B3",RoboBlocks.LANG_COLOUR_LIGHT="#FF8A00",RoboBlocks.LANG_COLOUR_LIGHT_INFRARED="#FF8A00",RoboBlocks.LANG_COLOUR_LIGHT_COLOR="#E87E00",RoboBlocks.LANG_COLOUR_AMBIENT="#99CCFF",RoboBlocks.LANG_COLOUR_AMBIENT_TEMPERATURE="#99CCFF",RoboBlocks.LANG_COLOUR_AMBIENT_HUMIDITY="#78BBFE",RoboBlocks.LANG_COLOUR_AMBIENT_RAIN="#58ABFD",RoboBlocks.LANG_COLOUR_AMBIENT_OTHER="#389AFC",RoboBlocks.LANG_COLOUR_HTML="#BDBDBD",RoboBlocks.LANG_COLOUR_BLOCKS="#FF00FF";var profiles;$.ajax({url:"profiles.json",dataType:"text",async:!1}).done(function(o){profiles=$.parseJSON(o),"ArduinoNano"===RoboBlocks.locales.processor?profiles.default=profiles.arduinoNano:"ArduinoUno"===RoboBlocks.locales.processor?profiles.default=profiles.arduinoUno:"NodeMCU"===RoboBlocks.locales.processor?profiles.default=profiles.nodeMCU:"ESP32"===RoboBlocks.locales.processor?profiles.default=profiles.esp32_R32:profiles.default=profiles.arduinoNano}),Blockly.getBlocks=function(){var o={};for(var e in this.Blocks)if(this.Blocks.hasOwnProperty(e)&&this.Blocks[e]instanceof Object){var t=this.Blocks[e].category,l=this.Blocks[e].subcategory;this.Blocks[e].category_colour;void 0===l&&(l="root"),o[t]=o[t]||{},o[t][l]=o[t][l]||[],o[t][l].push(e)}return o},Blockly.createToolbox=function(){var o={},e={};for(var t in this.Blocks)if(this.Blocks.hasOwnProperty(t)&&this.Blocks[t]instanceof Object&&this.Blocks[t].category){var l=this.Blocks[t].category,_=this.Blocks[t].subcategory,s=this.Blocks[t].category_colour;void 0===_&&(_="root"),o[l]=o[l]||{},e[l]=e[l]||s,o[l][_]=o[l][_]||[],o[l][_].push(t)}var n='<xml id="toolbox" style="display: none">',i=function(o){n+='<block type="'+o+'"></block>'};for(l in o)if(o.hasOwnProperty(l)){n+='<category id="'+l+'" name="'+l+'" colour="'+e[l]+'">';for(_ in o[l])"root"===_&&o[l].root.forEach(i),"root"!==_&&(n+='<category id="'+_+'" name="'+_+'" colour="'+this.Blocks[o[l][_][0]].colour+'">',o[l][_].forEach(i),n+="</category>");n+="</category>"}return n+="</xml>"},Blockly.createToolboxColours=function(){var o={};for(var e in this.Blocks)if(this.Blocks.hasOwnProperty(e)&&this.Blocks[e]instanceof Object&&this.Blocks[e].category){var t=this.Blocks[e].category;o[t]=o[t]||[],void 0!==this.Blocks[e].colour&&o[t].push(this.Blocks[e].colour)}return o[t]},Blockly.exportAllBlocks=function(){var o={},e=[],t=[],l=[];for(var _ in this.Blocks)if(this.Blocks.hasOwnProperty(_)&&this.Blocks[_]instanceof Object&&this.Blocks[_].category){var s=this.Blocks[_].category;if(o[s]=o[s]||[],o[s].push(_),void 0!==this.Blocks[_]&&void 0!==this.Blocks[_].examples)for(example in this.Blocks[_].examples)""!==this.Blocks[_].examples[example]&&(l[this.Blocks[_].examples[example]]||(l[this.Blocks[_].examples[example]]=!0,t.push(this.Blocks[_].examples[example])))}else this.Blocks.hasOwnProperty(_)&&this.Blocks[_]instanceof Object&&e.push(_);var n,i="",a="file:///C:/Users/leoaran/Dropbox/DYOR/DYOR/Facilino/src/facilino/roboblocks/html/phantom_script.bat";makeTextFile=function(o){var e=new Blob([o],{type:"text/plain"});return null!==a&&window.URL.revokeObjectURL(a),a=window.URL.createObjectURL(e)};var c=function(o){i='<block type="'+o+'" deletable="true"></block>',n=o,console.log(o),document.getElementById("startBlocks").innerHTML=i,Blockly.Xml.domToWorkspace(document.getElementById("startBlocks"),Blockly.getMainWorkspace());var e=document.getElementsByClassName("blocklyBlockCanvas")[0].getBBox(),t=e.width+20,l=e.height+20;r+="phantomjs rasterize.js file:///C:/Users/leoaran/Dropbox/DYOR/DYOR/Facilino/src/facilino/roboblocks/html/show_block.html?name="+n+" doc/"+roboblocksLanguage+"/img/"+n+".png "+t+" "+l+"\n",Blockly.getMainWorkspace().clear()},r="";for(_ in o)o.hasOwnProperty(_)&&o[_].forEach(c);for(_ in e){try{c(e[_])}catch(o){}document.getElementById("startBlocks").innerHTML="",Blockly.getMainWorkspace().clear()}for(example in t)!function(o){$.ajax({type:"GET",url:o,dataType:"xml",success:function(e){var t=(new XMLSerializer).serializeToString(e);t=(t=t.replace('<xml xmlns="http://www.w3.org/1999/xhtml">',"")).replace("</xml>",""),document.getElementById("startBlocks").innerHTML=t,Blockly.mainWorkspace.clear(),Blockly.Xml.domToWorkspace(document.getElementById("startBlocks"),Blockly.getMainWorkspace());var l=document.getElementsByClassName("blocklyBlockCanvas")[0].getBBox(),_=l.width+20,s=l.height+20,n=o;n=(n=n.replace("bly","png")).replace("doc/examples/",""),r+="phantomjs rasterize.js file:///C:/Users/leoaran/Dropbox/DYOR/DYOR/Facilino/src/facilino/roboblocks/html/show_example.html?name="+o+" doc/"+roboblocksLanguage+"/img/"+n+" "+_+" "+s+"\n"},async:!1})}("doc/examples/"+t[example]);return window.open(makeTextFile(r),"_blank"),i},this.JST=this.JST||{},this.JST.advanced_conversion=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=value_num)?"":__t)+","+(null==(__t=convertion)?"":__t);return __p},this.JST.advanced_map=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="map("+(null==(__t=num)?"":__t)+","+(null==(__t=from_min)?"":__t)+","+(null==(__t=from_max)?"":__t)+","+(null==(__t=to_min)?"":__t)+","+(null==(__t=to_max)?"":__t)+")";return __p},this.JST.base_delay=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="delay("+(null==(__t=delay_time)?"":__t)+");\n";return __p},this.JST.base_map=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="map("+(null==(__t=value_num)?"":__t)+",0,1023,0,"+(null==(__t=value_dmax)?"":__t)+")";return __p},this.JST.base_millis=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="millis()\n";return __p},this.JST.bq_bat=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Distance("+(null==(__t=trigger_pin)?"":__t)+","+(null==(__t=echo_pin)?"":__t)+")";return __p},this.JST.bq_bat_definitions_distance=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="long Distance(int trigger_pin, int echo_pin)\n{\n  long microseconds = TP_init(trigger_pin, echo_pin);\n  long distance;\n  distance = microseconds/29/2;\n  if (distance == 0){\n    distance = 999;\n  }\n  return distance;\n}\n";return __p},this.JST.bq_bat_definitions_tp_init=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="//bqBAT\nlong TP_init(int trigger_pin, int echo_pin)\n{\n  digitalWrite(trigger_pin, LOW);\n  delayMicroseconds(2);\n  digitalWrite(trigger_pin, HIGH);\n  delayMicroseconds(10);\n  digitalWrite(trigger_pin, LOW);\n  long microseconds = pulseIn(echo_pin ,HIGH);\n  return microseconds;\n}\n";return __p},this.JST.bq_bat_setups_echo=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode( "+(null==(__t=echo_pin)?"":__t)+" , INPUT );\n";return __p},this.JST.bq_bat_setups_trigger=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode( "+(null==(__t=trigger_pin)?"":__t)+" , OUTPUT );\n";return __p},this.JST.bq_bluetooth_def_definitions=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="#include <SoftwareSerial.h>";return __p},this.JST.bq_bluetooth_def_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",INPUT);\n  pinMode("+(null==(__t=NextPIN)?"":__t)+", OUTPUT);\n  _blueToothSerial.begin("+(null==(__t=baud_rate)?"":__t)+");\n  _blueToothSerial.flush();\n";return __p},this.JST.bq_button=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.bq_button_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",INPUT_PULLUP);\n";return __p},this.JST.bq_buttons=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="  adc_key_in =analogRead("+(null==(__t=dropdown_pin)?"":__t)+");\n  key = get_key(adc_key_in);\n  if (key != oldkey)\n  {\n    delay(50);\n    adc_key_in = analogRead("+(null==(__t=dropdown_pin)?"":__t)+");\n    key = get_key(adc_key_in);\n    if (key != oldkey)\n    {\n      oldkey = key;\n      if (key >=0){\n        switch(key)\n        {\n          case 0:\n           "+(null==(__t=code_btn1)?"":__t)+"\n          break;\n          case 1:\n           "+(null==(__t=code_btn2)?"":__t)+"\n          break;\n          case 2:\n           "+(null==(__t=code_btn3)?"":__t)+"\n          break;\n          case 3:\n           "+(null==(__t=code_btn4)?"":__t)+"\n          break;  \n          case 4:\n           "+(null==(__t=code_btn5)?"":__t)+"\n          break;\n        }      \n      }\n    }\n  }\n";return __p},this.JST.bq_buttons_definitions=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="int get_key(unsigned int input)\n  {\n    int k;\n    for (k = 0; k < NUM_KEYS; k++)\n    {\n      if (input < adc_key_val[k])\n      {\n        return k;\n      }\n    }\n    if (k >= NUM_KEYS)k = -1;\n      return k;\n}\n";return __p},this.JST.bq_buttons_definitions_variables=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="//bqButtons\nint adc_key_val[5] ={20,50, 100, 200, 600 };\nint NUM_KEYS = 5;\nint adc_key_in;\nint key=-1;\nint oldkey=-1;\n";return __p},this.JST.bq_infrared=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.bq_infrared_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode( "+(null==(__t=dropdown_pin)?"":__t)+" , INPUT);\n";return __p},this.JST.bq_joystick=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="readJoystick_"+(null==(__t=name)?"":__t)+"()";return __p},this.JST.bq_joystick_definitions=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="int * readJoystick_"+(null==(__t=name)?"":__t)+"(){\n  _internal_readJoystick_array_"+(null==(__t=name)?"":__t)+"[0]=analogRead("+(null==(__t=pinx)?"":__t)+");\n  _internal_readJoystick_array_"+(null==(__t=name)?"":__t)+"[1]=analogRead("+(null==(__t=piny)?"":__t)+");\n  _internal_readJoystick_array_"+(null==(__t=name)?"":__t)+"[2]=digitalRead("+(null==(__t=pinbutton)?"":__t)+");\n  return _internal_readJoystick_array_"+(null==(__t=name)?"":__t)+";\n}";return __p},this.JST.bq_joystick_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=pinbutton)?"":__t)+",INPUT_PULLUP);\n";return __p},this.JST.bq_led=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalWrite("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=dropdown_stat)?"":__t)+");\n";return __p},this.JST.bq_led_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",OUTPUT);\n";return __p},this.JST.bq_photoresistor=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="analogRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.bq_piezo_buzzer=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="tone("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=dropdown_stat)?"":__t)+","+(null==(__t=delay_time)?"":__t)+");\ndelay("+(null==(__t=delay_time)?"":__t)+");\n";return __p},this.JST.bq_piezo_buzzerav=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="tone("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=Buzztone)?"":__t)+","+(null==(__t=delay_time)?"":__t)+");\ndelay("+(null==(__t=delay_time)?"":__t)+");\n\n";return __p},this.JST.bq_potentiometer=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="analogRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.bt_serial_available=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="if (_blueToothSerial.available()>0){\n"+(null==(__t=branch)?"":__t)+"\n}\n";return __p},this.JST.controls_doWhile=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="do {\n"+(null==(__t=branch)?"":__t)+"\n} while ("+(null==(__t=argument0)?"":__t)+");\n";return __p},this.JST.controls_execute=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=content)?"":__t)+"\n";return __p},this.JST.controls_else=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="else {\n"+(null==(__t=branch)?"":__t)+" }";return __p},this.JST.controls_elseif=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="else if ("+(null==(__t=argument)?"":__t)+") {\n"+(null==(__t=branch)?"":__t)+" }";return __p},this.JST.controls_if=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="if ("+(null==(__t=argument)?"":__t)+") {\n"+(null==(__t=branch)?"":__t)+" }";return __p},this.JST.controls_setupLoop=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=branch)?"":__t)+"\n";return __p},this.JST.controls_whileUntil=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="while ("+(null==(__t=argument0)?"":__t)+") {\n"+(null==(__t=branch)?"":__t)+" }\n";return __p},this.JST.inout_analog_read=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="analogRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.inout_analog_read_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",INPUT);\n";return __p},this.JST.inout_analog_write=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="analogWrite("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=value_num)?"":__t)+");\n";return __p},this.JST.inout_analog_write_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",OUTPUT);\n";return __p},this.JST.inout_builtin_led=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)"ArduinoNano"===RoboBlocks.locales.processor||"ArduinoUno"===RoboBlocks.locales.processor?__p+="digitalWrite(13,"+(null==(__t=dropdown_stat)?"":__t)+");\n":"ESP32"!==RoboBlocks.locales.processor&&"NodeMCU"!==RoboBlocks.locales.processor||(__p+="digitalWrite(2,"+(null==(__t=dropdown_stat)?"":__t)+");\n");return __p},this.JST.inout_builtin_led_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)"ArduinoNano"===RoboBlocks.locales.processor||"ArduinoUno"===RoboBlocks.locales.processor?__p+="pinMode(13,OUTPUT);\n":"ESP32"!==RoboBlocks.locales.processor&&"NodeMCU"!==RoboBlocks.locales.processor||(__p+="pinMode(2,OUTPUT);\n");return __p},this.JST.inout_digital_read=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.inout_digital_read_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",INPUT);\n";return __p},this.JST.inout_digital_write=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalWrite("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=dropdown_stat)?"":__t)+");\n";return __p},this.JST.inout_digital_write_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",OUTPUT);\n";return __p},this.JST.inout_highlow=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=null==(__t=bool_value)?"":__t;return __p},this.JST.lcd_clear=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="lcd.clear();\n";return __p},this.JST.lcd_def_declare=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="LiquidCrystal lcd("+(null==(__t=lcd_1)?"":__t)+", "+(null==(__t=lcd_2)?"":__t)+", "+(null==(__t=lcd_3)?"":__t)+", "+(null==(__t=lcd_4)?"":__t)+", "+(null==(__t=lcd_5)?"":__t)+", "+(null==(__t=lcd_6)?"":__t)+");\n";return __p},this.JST.lcd_def_definitions=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="#include <Wire.h>\n#include <LiquidCrystal.h>";return __p},this.JST.lcd_def_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="lcd.begin(16, 2);\nlcd.clear();\n";return __p},this.JST.lcd_print=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="lcd.print("+(null==(__t=val)?"":__t)+");\n";return __p},this.JST.lcd_print_pos=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="lcd.setCursor("+(null==(__t=ycoor)?"":__t)+","+(null==(__t=xcoor)?"":__t)+");\nlcd.print("+(null==(__t=val)?"":__t)+");\n";return __p},this.JST.lcd_setBacklight=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="lcd.setBacklight("+(null==(__t=state)?"":__t)+");\n";return __p},this.JST.logic_compare=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=argument0)?"":__t)+" "+(null==(__t=operator)?"":__t)+" "+(null==(__t=argument1)?"":__t);return __p},this.JST.logic_negate=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="!"+(null==(__t=argument0)?"":__t);return __p},this.JST.logic_operation=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=argument0)?"":__t)+" "+(null==(__t=operator)?"":__t)+" "+(null==(__t=argument1)?"":__t);return __p},this.JST.math_arithmetic=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=argument0)?"":__t)+""+(null==(__t=operator)?"":__t)+(null==(__t=argument1)?"":__t);return __p},this.JST.math_arithmetic_pow=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pow("+(null==(__t=argument0)?"":__t)+","+(null==(__t=argument1)?"":__t)+")";return __p},this.JST.math_modulo=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=argument0)?"":__t)+"%"+(null==(__t=argument1)?"":__t);return __p},this.JST.math_random_bitOut=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="unsigned int bitOut(void)\n{\n  static unsigned long firstTime=1, prev=0;\n  unsigned long bit1=0, bit0=0, x=0, port=0, limit=99;\n  if (firstTime)\n  {\n    firstTime=0;\n    prev=analogRead(port);\n  }\n  while (limit--)\n  {\n    x=analogRead(port);\n    bit1=(prev!=x?1:0);\n    prev=x;\n    x=analogRead(port);\n    bit0=(prev!=x?1:0);\n    prev=x;\n    if (bit1!=bit0)\n      break;\n  }\n  return bit1;\n}\n";return __p},this.JST.math_random_seedOut=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="unsigned long seedOut(unsigned int noOfBits)\n{\n  unsigned long seed=0;\n  for (int i=0;i<noOfBits;++i)\n    seed = (seed<<1) | bitOut();\n  return seed;\n}\n";return __p},this.JST.math_random=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="random("+(null==(__t=value_num)?"":__t)+","+(null==(__t=value_dmax)?"":__t)+")";return __p},this.JST.procedures_callnoreturn=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=funcName)?"":__t)+"("+(null==(__t=funcArgs)?"":__t)+");\n";return __p},this.JST.procedures_callreturn=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=funcName)?"":__t)+"("+(null==(__t=funcArgs)?"":__t)+")";return __p},this.JST.procedures_defnoreturn=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=returnType)?"":__t)+" "+(null==(__t=funcName)?"":__t)+" ("+(null==(__t=args)?"":__t)+") {\n"+(null==(__t=branch)?"":__t)+" }\n";return __p},this.JST.procedures_defreturn=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=returnType)?"":__t)+" "+(null==(__t=funcName)?"":__t)+" ("+(null==(__t=args)?"":__t)+") {\n"+(null==(__t=branch)?"":__t)+"\n"+(null==(__t=returnValue)?"":__t)+" }\n";return __p},this.JST.serial_available=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="if (Serial.available()>0){\n"+(null==(__t=branch)?"":__t)+"\n}\n";return __p},this.JST.serial_parseint=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.parseInt()\n";return __p},this.JST.serial_parseint_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.begin("+(null==(__t=bitrate)?"":__t)+");\n";return __p},this.JST.serial_print=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.print("+(null==(__t=content)?"":__t)+");\n";return __p},this.JST.serial_print_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.begin("+(null==(__t=bitrate)?"":__t)+");\n";return __p},this.JST.serial_println=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.println("+(null==(__t=content)?"":__t)+");\n";return __p},this.JST.serial_println_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.begin("+(null==(__t=bitrate)?"":__t)+");\n";return __p},this.JST.serial_read=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.read()";return __p},this.JST.serial_read_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.begin("+(null==(__t=bitrate)?"":__t)+");\n";return __p},this.JST.serial_readstring=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.readString()";return __p},this.JST.serial_readstring_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.begin("+(null==(__t=bitrate)?"":__t)+");\n";return __p},this.JST.serial_special=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=null==(__t=char)?"":__t;return __p},this.JST.servo_move=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="servos["+(null==(__t=dropdown_pin)?"":__t)+"].write("+(null==(__t=value_degree)?"":__t)+");\ndelay("+(null==(__t=delay_time)?"":__t)+");\n";return __p},this.JST.servo_move_definitions_include=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="#include <Servo.h>\n\nServo servos[13];";return __p},this.JST.servo_move_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="servos["+(null==(__t=dropdown_pin)?"":__t)+"].attach("+(null==(__t=dropdown_pin)?"":__t)+");";return __p},this.JST.text_equalsIgnoreCase=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=string1)?"":__t)+".equalsIgnoreCase("+(null==(__t=string2)?"":__t)+")";return __p},this.JST.text_length=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=argument0)?"":__t)+".length()";return __p},this.JST.text_substring=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=string1)?"":__t)+".substring("+(null==(__t=from)?"":__t)+","+(null==(__t=to)?"":__t)+")";return __p},this.JST.variables_set=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=varName)?"":__t)+"="+(null==(__t=varValue)?"":__t)+";\n";return __p},this.JST.zum_button=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.zum_button_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=pullup)?"":__t)+");\n";return __p},this.JST.zum_follower=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="if(digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")==HIGH)\n{\n  "+(null==(__t=code_btn1)?"":__t)+"\n}\nif(digitalRead("+(null==(__t=NextPIN)?"":__t)+")==HIGH)\n{\n  "+(null==(__t=code_btn2)?"":__t)+"\n}\n";return __p},this.JST.zum_follower_setups_nextpin=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode( "+(null==(__t=NextPIN)?"":__t)+" , INPUT);\n";return __p},this.JST.zum_follower_setups_pin=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode( "+(null==(__t=dropdown_pin)?"":__t)+" , INPUT);\n";return __p},this.JST.zum_infrared=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.zum_infrared_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode( "+(null==(__t=dropdown_pin)?"":__t)+" , INPUT);\n";return __p},this.JST.zum_led=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalWrite("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=dropdown_stat)?"":__t)+");\n";return __p},this.JST.zum_led_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",OUTPUT);\n";return __p},this.JST.zum_photoresistor=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="analogRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.zum_piezo_buzzer=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="tone("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=dropdown_stat)?"":__t)+","+(null==(__t=delay_time)?"":__t)+");\ndelay("+(null==(__t=delay_time)?"":__t)+");\n";return __p},this.JST.zum_piezo_buzzerav=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="tone("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=Buzztone)?"":__t)+","+(null==(__t=delay_time)?"":__t)+");\ndelay("+(null==(__t=delay_time)?"":__t)+");\n\n";return __p},this.JST.zum_potentiometer=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="analogRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p};var JST=this.JST;Blockly.Arduino.procedures_callnoreturn=function(){var o,e=this.getFieldValue("PROCEDURES"),t=[],l="";try{for(var _=0;_<this.getVariables(e).length;_++)t[_]=Blockly.Arduino.valueToCode(this,"ARG"+_,Blockly.Arduino.ORDER_NONE)||"",l+=(o=RoboBlocks.findPinMode(t[_])).code,t[_]=o.pin}catch(o){}var s=t.join(", ");return l+=JST.procedures_callnoreturn({funcName:e,funcArgs:s})},Blockly.Blocks.procedures_callnoreturn={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_callnoreturn"),examples:["procedures_callnoreturn_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_PROCEDURES,colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_PROCEDURES_CALLNORETURN_TOOLTIP","LANG_PROCEDURES_DEFNORETURN_PROCEDURE","LANG_PROCEDURES_CALL_WITHOUT_DEFINITION"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.appendDummyInput("DUMMY").appendField(new Blockly.FieldDropdown(this.getProcedures()),"PROCEDURES"),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_CALLNORETURN_TOOLTIP")),this.arguments_=this.getVariables(this.getFieldValue("PROCEDURES")),this.quarkConnections_=null,this.quarkArguments_=null,this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES")),this.setInputsInline(!1)},validName:function(o){if(o&&o.length>0){for(var e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length);for(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/([ ])/g,"_")).replace(/([áàâä])/g,"a")).replace(/([éèêë])/g,"e")).replace(/([íìîï])/g,"i")).replace(/([óòôö])/g,"o")).replace(/([úùûü])/g,"u")).replace(/([ñ])/g,"n")).replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|<>\-\&\Ç\%\=\~\{\}\¿\¡\"\@\:\;\-\"\·\|\º\ª\¨\'\·\?\?\ç\`\´\¨\^])/g,""),e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length)}return o},getProcedures:function(){var o=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),e=[];if(o[0].length>0)for(var t in o[0]){var l=o[0][t][0];l=this.validName(l),e.push([l,l])}else e.push([RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFNORETURN_PROCEDURE"),RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFNORETURN_PROCEDURE")]);return e},maxVariableNumber:function(){var o=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),e=[],t=0;if(o[0].length>0||o[1].length>0){for(var l in o[0])o[0][l][1].length>t&&(t=o[0][l][1].length);return t}e.push(["",""])},getVariables:function(o){try{var e=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),t=[];if(e[0].length>0){for(var l in e[0])if(e[0][l][0]===o)return e[0][l][1]}else t.push(["",""])}catch(o){}},exists:function(){var o=Blockly.Procedures.allProcedures(Blockly.mainWorkspace);if(!(o[0].length>0))return!1;for(var e in o[0])if(o[0][e][0]===this.getFieldValue("PROCEDURES"))return!0},onchange:function(){if(this.workspace)if(this.getFieldValue("PROCEDURES")!==this.last_procedure&&this.getFieldValue("PROCEDURES")?(this.changeVariables(),this.last_procedure=this.getFieldValue("PROCEDURES"),this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES"))):this.getVariables(this.getFieldValue("PROCEDURES"))!==this.last_variables&&(this.addVariables(),this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES")),this.last_procedure=this.getFieldValue("PROCEDURES")),this.exists())try{this.setWarningText(null)}catch(o){}else try{this.setWarningText(RoboBlocks.locales.getKey("LANG_PROCEDURES_CALL_WITHOUT_DEFINITION"))}catch(o){}},addVariables:function(){var o=this.getVariables(this.getFieldValue("PROCEDURES")),e=0;if(o&&""!==this.getFieldValue("PROCEDURES")){if(this.last_variables||(this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES"))),o.length>=this.last_variables.length)e=o.length;else if(this.last_variables)try{e=this.last_variables.length}catch(o){}for(var t=0;t<e;t++)null===this.getInput("ARG"+t)?this.appendValueInput("ARG"+t).appendField(o[t],"ARG_NAME"+t).setAlign(Blockly.ALIGN_RIGHT):o[t]&&this.getFieldValue("ARG_NAME"+t)?this.setFieldValue(o[t],"ARG_NAME"+t):this.removeInput("ARG"+t);this.arguments_=o}},renameProcedure:function(o,e){if(this.last_procedure){var t=this.getProcedures();for(var l in t)Blockly.Names.equals(o,t[l][0])&&(this.setFieldValue(new Blockly.FieldDropdown(this.getProcedures()),"PROCEDURES"),this.addVariables());this.last_procedure===o&&(this.last_procedure=e);try{this.setFieldValue(this.last_procedure,"PROCEDURES")}catch(o){}}},changeVariables:function(){for(var o=this.getVariables(this.getFieldValue("PROCEDURES")),e=0;e<this.maxVariableNumber()&&null!==this.getInput("ARG"+e);e++)this.removeInput("ARG"+e);for(var t in o)this.appendValueInput("ARG"+t).appendField(o[t]).setAlign(Blockly.ALIGN_RIGHT);this.arguments_=o},mutationToDom:function(){var o=document.createElement("mutation");o.setAttribute("name",this.getFieldValue("PROCEDURES")),void 0===this.arguments_&&(this.arguments_=this.getVariables(this.getFieldValue("PROCEDURES"))),void 0===this.arguments_&&(this.arguments_=[]);for(var e=0;e<this.arguments_.length;e++){var t=document.createElement("arg");t.setAttribute("name",this.arguments_[e]),o.appendChild(t)}return o},domToMutation:function(o){this.xmlElement=o;var e=o.getAttribute("name");this.last_procedure=e,this.setFieldValue(e,"PROCEDURES");for(var t=0;t<o.childNodes.length;t++)this.appendValueInput("ARG"+t).appendField(o.childNodes[t].getAttribute("name"),"ARG_NAME"+t).setAlign(Blockly.ALIGN_RIGHT)}},Blockly.Arduino.procedures_callreturn=function(){for(var o,e=this.getFieldValue("PROCEDURES"),t=[],l="",_=0;_<this.getVariables(e).length;_++)t[_]=Blockly.Arduino.valueToCode(this,"ARG"+_,Blockly.Arduino.ORDER_NONE)||"null",l+=(o=RoboBlocks.findPinMode(t[_])).code,t[_]=o.pin;var s=t.join(", ");return l+=JST.procedures_callreturn({funcName:e,funcArgs:s}),[l,Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Blocks.procedures_callreturn={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_callreturn"),examples:["procedures_callreturn_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_PROCEDURES,colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_PROCEDURES_CALLRETURN_TOOLTIP","LANG_PROCEDURES_DEFRETURN_PROCEDURE","LANG_PROCEDURES_CALL_WITHOUT_DEFINITION"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.appendDummyInput("DUMMY").appendField(new Blockly.FieldDropdown(this.getProcedures()),"PROCEDURES"),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_CALLRETURN_TOOLTIP")),this.arguments_=this.getVariables(this.getFieldValue("PROCEDURES")),this.quarkConnections_=null,this.quarkArguments_=null,this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES")),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code")},validName:function(o){if(o&&o.length>0){for(var e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length);for(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/([ ])/g,"_")).replace(/([áàâä])/g,"a")).replace(/([éèêë])/g,"e")).replace(/([íìîï])/g,"i")).replace(/([óòôö])/g,"o")).replace(/([úùûü])/g,"u")).replace(/([ñ])/g,"n")).replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|<>\-\&\Ç\%\=\~\{\}\¿\¡\"\@\:\;\-\"\·\|\º\ª\¨\'\·\?\?\ç\`\´\¨\^])/g,""),e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length);for(var t in Blockly.Arduino.RESERVED_WORDS_){if(o===Blockly.Arduino.RESERVED_WORDS_.split(",")[t]){this.setWarningText("Reserved word"),o="";break}this.setWarningText(null)}}return o},getProcedures:function(){var o=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),e=[];if(o[1].length>0)for(var t in o[1]){var l=o[1][t][0];l=this.validName(l),e.push([l,l])}else e.push([RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_PROCEDURE"),RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_PROCEDURE")]);return e},maxVariableNumber:function(){var o=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),e=[],t=0;if(o[1].length>0){for(var l in o[1])o[1][l][1].length>t&&(t=o[1][l][1].length);return t}e.push(["",""])},getVariables:function(o){try{var e=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),t=[];if(e[1].length>0){for(var l in e[1])if(e[1][l][0]===o)return e[1][l][1]}else t.push(["",""])}catch(o){}},exists:function(){var o=Blockly.Procedures.allProcedures(Blockly.mainWorkspace);if(!(o[1].length>0))return!1;for(var e in o[1])if(o[1][e][0]===this.getFieldValue("PROCEDURES"))return!0},onchange:function(){if(this.workspace)if(this.getFieldValue("PROCEDURES")!==this.last_procedure&&this.getFieldValue("PROCEDURES")?(this.changeVariables(),this.last_procedure=this.getFieldValue("PROCEDURES"),this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES"))):this.getVariables(this.getFieldValue("PROCEDURES"))!==this.last_variables&&(this.addVariables(),this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES")),this.last_procedure=this.getFieldValue("PROCEDURES")),this.exists())try{this.setWarningText(null)}catch(o){}else try{this.setWarningText(RoboBlocks.locales.getKey("LANG_PROCEDURES_CALL_WITHOUT_DEFINITION"))}catch(o){}},addVariables:function(){var o=this.getVariables(this.getFieldValue("PROCEDURES")),e=0;if(o&&""!==this.getFieldValue("PROCEDURES")){if(this.last_variables||(this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES"))),o.length>=this.last_variables.length)e=o.length;else if(this.last_variables)try{e=this.last_variables.length}catch(o){}for(var t=0;t<e;t++)null===this.getInput("ARG"+t)?this.appendValueInput("ARG"+t).appendField(o[t],"ARG_NAME"+t).setAlign(Blockly.ALIGN_RIGHT):o[t]&&this.getFieldValue("ARG_NAME"+t)?this.setFieldValue(o[t],"ARG_NAME"+t):this.removeInput("ARG"+t);this.arguments_=o}},renameProcedure:function(o,e){if(this.last_procedure){var t=this.getProcedures();for(var l in t)Blockly.Names.equals(o,t[l][0])&&this.setFieldValue(new Blockly.FieldDropdown(this.getProcedures()),"PROCEDURES");this.last_procedure===o&&(this.last_procedure=e);try{this.setFieldValue(this.last_procedure,"PROCEDURES")}catch(o){}}},changeVariables:function(){for(var o=this.getVariables(this.getFieldValue("PROCEDURES")),e=0;e<this.maxVariableNumber()&&null!==this.getInput("ARG"+e);e++)this.removeInput("ARG"+e);for(var t in o)this.appendValueInput("ARG"+t).appendField(o[t]).setAlign(Blockly.ALIGN_RIGHT);this.arguments_=o},mutationToDom:function(){var o=document.createElement("mutation");o.setAttribute("name",this.getFieldValue("PROCEDURES")),void 0===this.arguments_&&(this.arguments_=this.getVariables(this.getFieldValue("PROCEDURES"))),void 0===this.arguments_&&(this.arguments_=[]);for(var e=0;e<this.arguments_.length;e++){var t=document.createElement("arg");t.setAttribute("name",this.arguments_[e]),o.appendChild(t)}return o},domToMutation:function(o){this.xmlElement=o;var e=o.getAttribute("name");this.last_procedure=e,this.setFieldValue(e,"PROCEDURES");for(var t=0;t<o.childNodes.length;t++)this.appendValueInput("ARG"+t).appendField(o.childNodes[t].getAttribute("name"),"ARG_NAME"+t).setAlign(Blockly.ALIGN_RIGHT)}},Blockly.Arduino.procedures_defnoreturn=function(){var o=this.getFieldValue("NAME"),e=Blockly.Arduino.statementToCode(this,"STACK");e=e.replace(/&quot;/g,'"'),Blockly.Arduino.INFINITE_LOOP_TRAP&&(e=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+e);var t=this.paramString,l=JST.procedures_defnoreturn({returnType:"void",funcName:o,args:t,branch:e});return l=Blockly.Arduino.scrub_(this,l),Blockly.Arduino.definitions_[o]=l,null},Blockly.Blocks.procedures_defnoreturn={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_defnoreturn"),examples:["procedures_callnoreturn_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_PROCEDURES,colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_PROCEDURES_DEFNORETURN_PROCEDURE","LANG_PROCEDURES_DEFNORETURN_TOOLTIP","LANG_PROCEDURES_DEFNORETURN_DO"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES);var o=new Blockly.FieldTextInput("",Blockly.Procedures.rename);o.setSpellcheck(!1),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFNORETURN_PROCEDURE")).appendField(o,"NAME").appendField("","PARAMS"),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFNORETURN_TOOLTIP")),this.arguments_=[],this.type_arguments_=[],this.setStatements_(!0),this.setInputsInline(!1)},setStatements_:function(o){this.hasStatements_!==o&&(o?(this.appendStatementInput("STACK").appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFNORETURN_DO")).setCheck(["code","function"]),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=o)},updateParams_:function(){for(var o=!1,e={},t=0;t<this.arguments_.length;t++){if(e["arg_"+this.arguments_[t].toLowerCase()]){o=!0;break}e["arg_"+this.arguments_[t].toLowerCase()]=!0}o?this.setWarningText("Duplicate argument"):this.setWarningText(null);var l=[];for(var t in this.arguments_)try{l.push(this.type_arguments_[t]+" "+this.arguments_[t])}catch(o){}this.paramString=l.join(", "),Blockly.Events.disable();try{this.setFieldValue(this.paramString,"PARAMS")}finally{Blockly.Events.enable()}},mutationToDom:function(o){var e=document.createElement("mutation");o&&e.setAttribute("name",this.getFieldValue("NAME"));for(var t=0;t<this.arguments_.length;t++){var l=document.createElement("arg_name");l.setAttribute("name",this.arguments_[t]),o&&this.paramIds_&&l.setAttribute("paramId",this.paramIds_[t]),e.appendChild(l),l=document.createElement("arg_type");try{l.setAttribute("name",this.type_arguments_[t]),o&&this.paramIds_&&l.setAttribute("paramId",this.paramIds_[t])}catch(o){}e.appendChild(l)}return this.hasStatements_||e.setAttribute("statements","false"),e},domToMutation:function(o){this.arguments_=[];for(var e,t=0;e=o.childNodes[t];t++)if("arg_name"===e.nodeName.toLowerCase()&&this.arguments_.push(e.getAttribute("name")),"arg_type"===e.nodeName.toLowerCase())try{this.type_arguments_.push(e.getAttribute("name"))}catch(o){}this.updateParams_(),Blockly.Procedures.mutateCallers(this),this.setStatements_("false"!==o.getAttribute("statements"))},decompose:function(o){var e=o.newBlock("procedures_mutatorcontainer");e.initSvg(),this.getInput("RETURN")?e.setFieldValue(this.hasStatements_?"TRUE":"FALSE","STATEMENTS"):e.getInput("STATEMENT_INPUT").setVisible(!1);for(var t=e.getInput("STACK").connection,l=0;l<this.arguments_.length;l++){var _=o.newBlock("procedures_mutatorarg");_.initSvg(),_.setFieldValue(this.type_arguments_[l],"TYPE"),_.setFieldValue(this.arguments_[l],"NAME"),_.oldLocation=l,t.connect(_.previousConnection),t=_.nextConnection}return Blockly.Procedures.mutateCallers(this),e},compose:function(o){this.arguments_=[],this.type_arguments_=[],this.paramIds_=[];for(var e=o.getInputTargetBlock("STACK");e;)this.arguments_.push(e.getFieldValue("NAME")),this.type_arguments_.push(e.getFieldValue("TYPE")),this.paramIds_.push(e.id),e=e.nextConnection&&e.nextConnection.targetBlock();this.updateParams_(),Blockly.Procedures.mutateCallers(this);var t=o.getFieldValue("STATEMENTS");if(null!==t&&(t="TRUE"==t,this.hasStatements_!=t))if(t)this.setStatements_(!0),Blockly.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null;else{var l=this.getInput("STACK").connection;if(this.statementConnection_=l.targetConnection,this.statementConnection_){var _=l.targetBlock();_.unplug(),_.bumpNeighbours_()}this.setStatements_(!1)}},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},renameVar:function(o,e){for(var t=!1,l=0;l<this.arguments_.length;l++)Blockly.Names.equals(o,this.arguments_[l])&&(this.arguments_[l]=e,t=!0);if(t&&(this.updateParams_(),this.mutator.isVisible()))for(var _,s=this.mutator.workspace_.getAllBlocks(),l=0;_=s[l];l++)"procedures_mutatorarg"==_.type&&Blockly.Names.equals(o,_.getFieldValue("NAME"))&&_.setFieldValue(e,"NAME")},validName:function(o){if(o&&o.length>0){for(var e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length);for(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/([ ])/g,"_")).replace(/([áàâä])/g,"a")).replace(/([éèêë])/g,"e")).replace(/([íìîï])/g,"i")).replace(/([óòôö])/g,"o")).replace(/([úùûü])/g,"u")).replace(/([ñ])/g,"n")).replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|<>\-\&\Ç\%\=\~\{\}\¿\¡\"\@\:\;\-\"\·\|\º\ª\¨\'\·\?\?\ç\`\´\¨\^])/g,""),e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length);for(var t in Blockly.Arduino.RESERVED_WORDS_){if(this.reserved_words=Blockly.Arduino.RESERVED_WORDS_.split(","),o===this.reserved_words[t]){this.setWarningText("Reserved word"),o="";break}this.setWarningText(null)}}return o},customContextMenu:function(o){var e={enabled:!0},t=this.getFieldValue("NAME");e.text=Blockly.Msg.PROCEDURES_CREATE_DO.replace("%1",t);var l=goog.dom.createDom("mutation");l.setAttribute("name",t);for(n=0;n<this.arguments_.length;n++){var _=goog.dom.createDom("arg");_.setAttribute("name",this.arguments_[n]),l.appendChild(_)}var s=goog.dom.createDom("block",null,l);if(s.setAttribute("type",this.callType_),e.callback=Blockly.ContextMenu.callbackFactory(this,s),o.push(e),!this.isCollapsed())for(var n=0;n<this.arguments_.length;n++){var e={enabled:!0},t=this.arguments_[n];e.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",t);var i=goog.dom.createDom("field",null,t);i.setAttribute("name","VAR"),(s=goog.dom.createDom("block",null,i)).setAttribute("type","variables_get"),e.callback=Blockly.ContextMenu.callbackFactory(this,s),o.push(e)}},callType_:"procedures_callnoreturn",onchange:function(){if(this.last_procedure!==this.getFieldValue("NAME")){var o=this.getFieldValue("NAME");o=this.validName(o);try{this.setFieldValue(o,"NAME")}catch(o){}this.last_procedure=o}}},Blockly.Blocks.procedures_mutatorcontainer={colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_PROCEDURES_MUTATORCONTAINER_Field"],init:function(){this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_MUTATORCONTAINER_Field")),this.appendStatementInput("STACK").setCheck(["code","function"]),this.appendDummyInput("STATEMENT_INPUT").appendField(Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new Blockly.FieldCheckbox("TRUE"),"STATEMENTS"),this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.setTooltip(""),this.contextMenu=!1}},Blockly.Blocks.procedures_mutatorarg={colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_PROCEDURES_MUTATORARG_Field"],init:function(){var o=new Blockly.FieldTextInput("x",this.validator_);this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_MUTATORARG_Field")).appendField(new Blockly.FieldDropdown([["int","int"],["String","String"]]),"TYPE").appendField(o,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.setTooltip(""),this.contextMenu=!1,o.onFinishEditing_=this.createNewVar_,o.onFinishEditing_("x")},onchange:function(){if(this.last_variable!==this.getFieldValue("NAME")){var o=this.getFieldValue("NAME");o=this.validName(o);try{this.setFieldValue(o,"NAME")}catch(o){}this.last_variable=o}},validName:Blockly.Blocks.procedures_defnoreturn.validName,validator_:function(o){return(o=o.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""))||null},createNewVar_:function(o){var e=this.sourceBlock_;e&&e.workspace&&e.workspace.options&&e.workspace.options.parentWorkspace&&e.workspace.options.parentWorkspace.createVariable(o)}},Blockly.Arduino.procedures_defreturn=function(){var o=this.getFieldValue("NAME"),e=Blockly.Arduino.statementToCode(this,"STACK");e=e.replace(/&quot;/g,'"'),Blockly.Arduino.INFINITE_LOOP_TRAP&&(e=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+e);var t=Blockly.Arduino.valueToCode(this,"RETURN",Blockly.Arduino.ORDER_NONE)||"",l="";t=t.replace(/&quot;/g,'"');var _=this.getReturnType();if(t){var s=RoboBlocks.findPinMode(t);t=s.code,t+="  return "+s.pin+";\n"}var n=this.paramString;return l+=JST.procedures_defreturn({returnType:_,funcName:o,args:n,branch:e,returnValue:t}),l=Blockly.Arduino.scrub_(this,l),Blockly.Arduino.definitions_[o]=l,null},Blockly.Blocks.procedures_defreturn={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_defreturn"),examples:["procedures_callreturn_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_PROCEDURES,colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_PROCEDURES_DEFRETURN_PROCEDURE","LANG_PROCEDURES_DEFRETURN_RETURN","LANG_PROCEDURES_DEFRETURN_TOOLTIP"],init:function(){var o=new Blockly.FieldTextInput("",Blockly.Procedures.rename);o.setSpellcheck(!1),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_PROCEDURE")).appendField(o,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_RETURN")),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_TOOLTIP")),this.arguments_=[],this.setStatements_(!0),this.statementConnection_=null},isVariable:function(o){for(var e in Blockly.Variables.allUsedVariables)if(Blockly.Variables.allUsedVariables[e]===o)return!0;return!1},getReturnType:function(){var o,e=Blockly.Arduino.valueToCode(this,"RETURN",Blockly.Arduino.ORDER_NONE)||"";e=RoboBlocks.findPinMode(e).pin;var t=!1;for(var l in Blockly.Arduino.definitions_)if(Blockly.Arduino.definitions_[l].search(e+" \\(")>=0){t=!0;break}if(e||(o="void"),e.search('"')>=0)o="String";else if(t)for(l in Blockly.Arduino.definitions_)Blockly.Arduino.definitions_[l].search(e)>=0&&(o="int"===Blockly.Arduino.definitions_[l].substring(0,3)||"//b"===Blockly.Arduino.definitions_[l].substring(0,3)?"int *"===Blockly.Arduino.definitions_[l].substring(0,5)||"int _"===Blockly.Arduino.definitions_[l].substring(0,5)?"int *":"int":"Str"===Blockly.Arduino.definitions_[l].substring(0,3)?"String":"");else o=this.isVariable(e)?RoboBlocks.variables[e][0]:e.search("analogRead")>=0||e.search("digitalRead")>=0||e.search("Distanc")>=0||!isNaN(parseFloat(e))||e.search("random")>=0||e.search("map")>=0||e.search("\\[")>=0||e.search("abs")>=0||e.search("sqrt")>=0||e.search("log")>=0||e.search("log")>=0||e.search("exp")>=0||e.search("pow")>=0?"int":e.search("readJoystick")>=0||"{"===e[0]?"int *":"void";return o},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,renameVar:Blockly.Blocks.procedures_defnoreturn.renameVar,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},Blockly.Arduino.procedures_ifreturn=function(){var o=Blockly.Arduino.valueToCode(this,"CONDITION",Blockly.Arduino.ORDER_NONE)||"",e="",t=RoboBlocks.findPinMode(o);e+=t.code,e+="if ("+(o=t.pin)+") {\n";var l=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_NONE)||"";return t=RoboBlocks.findPinMode(l),e+=t.code,e+="  return ("+l+");\n",e+="}\n"},Blockly.Blocks.procedures_ifreturn={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_ifreturn"),examples:["procedures_ifreturn_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_PROCEDURES,colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_CONTROLS_IF_MSG_IF","LANG_PROCEDURES_DEFRETURN_RETURN","LANG_PROCEDURES_IFRETURN_TOOLTIP","LANG_PROCEDURES_IFRETURN_WARNING"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.appendValueInput("CONDITION").setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_IF")),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_RETURN")),this.appendValueInput("VALUE"),this.setInputsInline(!0,"function"),this.setPreviousStatement(!0,"function"),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_IFRETURN_TOOLTIP")),this.hasReturnValue_=!0},mutationToDom:function(){var o=document.createElement("mutation");return o.setAttribute("value",Number(this.hasReturnValue_)),o},domToMutation:function(o){var e=o.getAttribute("value");this.hasReturnValue_=1===e},onchange:function(){if(this.workspace){var o=!1,e=this;do{if("procedures_defreturn"===e.type){o=!0;break}e=e.getSurroundParent()}while(e);if(o)this.setWarningText(null);else try{this.setWarningText(RoboBlocks.locales.getKey("LANG_PROCEDURES_IFRETURN_WARNING"))}catch(o){console.log("Captured error: ",o)}}}},Blockly.Arduino.procedures_return=function(){var o="",e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_NONE)||"";return o+=RoboBlocks.findPinMode(e).code,o+="  return ("+e+");\n"},Blockly.Blocks.procedures_return={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_return"),examples:["procedures_return_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_PROCEDURES,colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_PROCEDURES_RETURN","LANG_PROCEDURES_RETURN_TOOLTIP","LANG_PROCEDURES_IFRETURN_WARNING"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_RETURN")),this.appendValueInput("VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"function"),this.setNextStatement(!0,"function"),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_RETURN_TOOLTIP")),this.hasReturnValue_=!0},mutationToDom:function(){var o=document.createElement("mutation");return o.setAttribute("value",Number(this.hasReturnValue_)),o},domToMutation:function(o){var e=o.getAttribute("value");this.hasReturnValue_=1===e},onchange:function(){if(this.workspace){var o=!1,e=this;do{if("procedures_defreturn"===e.type){o=!0;break}e=e.getSurroundParent()}while(e);if(o)this.setWarningText(null);else try{this.setWarningText(RoboBlocks.locales.getKey("LANG_PROCEDURES_IFRETURN_WARNING"))}catch(o){console.log("Captured error: ",o)}}}},Blockly.Arduino.controls_setupLoop=function(){var o=Blockly.Arduino.statementToCode(this,"SETUP");o=o.replace(/&quot;/g,'"'),Blockly.Arduino.setups_.setup_int0_&&(o+=Blockly.Arduino.setups_.setup_int0_),Blockly.Arduino.setups_.X_SETUP=JST.controls_setupLoop({branch:o});var e=Blockly.Arduino.statementToCode(this,"LOOP");return e=e.replace(/&quot;/g,'"'),e=JST.controls_setupLoop({branch:e})},Blockly.Blocks.controls_setupLoop={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_setupLoop"),examples:["controls_setupLoop_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_SETUP_LOOP_SETUP_TITLE","LANG_CONTROLS_SETUP_LOOP_LOOP_TITLE","LANG_CONTROLS_SETUP_LOOP_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendStatementInput("SETUP").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SETUP_LOOP_SETUP_TITLE")).setCheck("code"),this.appendStatementInput("LOOP").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SETUP_LOOP_LOOP_TITLE")).setCheck("code"),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_SETUP_LOOP_TOOLTIP"))}},Blockly.Arduino.controls_doWhile=function(){var o=Blockly.Arduino.valueToCode(this,"WHILE",Blockly.Arduino.ORDER_NONE)||"";o=o.replace(/&quot;/g,'"');var e=Blockly.Arduino.statementToCode(this,"DO");e=e.replace(/&quot;/g,'"');var t="";return Blockly.Arduino.INFINITE_LOOP_TRAP&&(e=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+e),"UNTIL"===this.getFieldValue("MODE")&&(o.match(/^\w+$/)||(o="("+o+")"),o="!"+o),t+=JST.controls_doWhile({argument0:o,branch:e})},Blockly.Blocks.controls_doWhile={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_doWhile"),examples:["controls_doWhile_example1.bly","controls_doWhile_example2.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_DOWHILE_OPERATOR_DO","LANG_CONTROLS_WHILEUNTIL_OPERATOR_WHILE","LANG_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL","LANG_CONTROLS_DOWHILE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendStatementInput("DO").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_DOWHILE_OPERATOR_DO")).setCheck("code"),this.appendValueInput("WHILE").setCheck(Boolean).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_OPERATOR_WHILE"),"WHILE"],[RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL"),"UNTIL"]]),"MODE"),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_DOWHILE_TOOLTIP"))}},Blockly.Arduino.base_delay=function(){var o=Blockly.Arduino.valueToCode(this,"DELAY_TIME",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,e+=JST.base_delay({delay_time:o})},Blockly.Blocks.base_delay={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("base_delay"),examples:["base_delay_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_BASE_DELAY_WAIT","LANG_CONTROLS_BASE_DELAY_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("DELAY_TIME",Number).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_BASE_DELAY_WAIT")).setCheck(Number),this.setInputsInline(!0),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_BASE_DELAY_TOOLTIP"))}},Blockly.Arduino.advanced_map=function(){var o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(this,"FROM_MIN",Blockly.Arduino.ORDER_NONE),t=Blockly.Arduino.valueToCode(this,"FROM_MAX",Blockly.Arduino.ORDER_NONE),l=Blockly.Arduino.valueToCode(this,"TO_MIN",Blockly.Arduino.ORDER_NONE),_=Blockly.Arduino.valueToCode(this,"TO_MAX",Blockly.Arduino.ORDER_NONE),s="",n=RoboBlocks.findPinMode(o);return s+=n.code,o=n.pin,n=RoboBlocks.findPinMode(e),s+=n.code,e=n.pin,n=RoboBlocks.findPinMode(t),s+=n.code,t=n.pin,n=RoboBlocks.findPinMode(l),s+=n.code,l=n.pin,n=RoboBlocks.findPinMode(_),s+=n.code,_=n.pin,s+=JST.advanced_map({num:o,from_min:e,from_max:t,to_min:l,to_max:_}),[s,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.advanced_map={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("advanced_map"),examples:["advanced_map_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_MATH_ADVANCED_MAP_MAP","LANG_MATH_ADVANCED_MAP_FROM","LANG_MATH_ADVANCED_MAP_HYPHEN","LANG_MATH_ADVANCED_MAP_BRACKET","LANG_MATH_ADVANCED_MAP_TO","LANG_MATH_ADVANCED_MAP_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_MATH),this.appendValueInput("NUM",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_MAP")).setCheck(Number),this.appendValueInput("FROM_MIN",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_FROM")).setCheck(Number),this.appendValueInput("FROM_MAX",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_HYPHEN")).setCheck(Number),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_BRACKET")),this.appendValueInput("TO_MIN",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_TO")).setCheck(Number),this.appendValueInput("TO_MAX",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_HYPHEN")).setCheck(Number),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_BRACKET")),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_TOOLTIP"))}},Blockly.Arduino.base_map=function(){var o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(this,"DMAX",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,t+=JST.base_map({value_num:o,value_dmax:e}),[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.base_map={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("base_map"),examples:["base_map_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_MATH_BASE_MAP","LANG_MATH_BASE_MAP_VALUE_TO","LANG_MATH_BASE_MAP_BRACKET","LANG_MATH_BASE_MAP_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_MATH),this.appendValueInput("NUM",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_BASE_MAP")).setCheck(Number),this.appendValueInput("DMAX",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_BASE_MAP_VALUE_TO")).setCheck(Number),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_MATH_BASE_MAP_BRACKET")),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_MATH_BASE_MAP_TOOLTIP"))}},Blockly.Arduino.base_us=function(){return["micros()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.base_us={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("base_us"),category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,examples:["base_us_example.bly"],keys:["LANG_CONTROLS_BASE_US","LANG_CONTROLS_BASE_US_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_BASE_US")),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_BASE_US_TOOLTIP"))}},Blockly.Arduino.controls_flow_statements=function(){switch(this.getFieldValue("FLOW")){case"BREAK":return"break;\n";case"CONTINUE":return"continue;\n"}throw"Unknown flow statement."},Blockly.Blocks.controls_flow_statements={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_flow_statements"),examples:["controls_flow_statements_example1.bly","controls_flow_statements_example2.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK","LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE","LANG_CONTROLS_FLOW_STATEMENTS_INPUT_OFLOOP","LANG_CONTROLS_FLOW_STATEMENTS_WARNING","LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK","LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL);var o=new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK")||"BREAK","BREAK"],[RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE")||"CONTINUE","CONTINUE"]]);this.appendDummyInput().appendField(o,"FLOW").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_INPUT_OFLOOP")),this.setPreviousStatement(!0,"code");var e=this;this.setTooltip(function(){var o=e.getFieldValue("FLOW");return Blockly.Blocks.controls_flow_statements.TOOLTIPS[o]})},onchange:function(){if(this.workspace){var o=!1,e=this;do{if("controls_repeat"===e.type||"controls_forEach"===e.type||"controls_for"===e.type||"controls_whileUntil"===e.type){o=!0;break}e=e.getSurroundParent()}while(e);if(o)this.setWarningText(null);else try{this.setWarningText(RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_WARNING"))}catch(o){console.log("Captured error: ",o)}}}},Blockly.Blocks.controls_flow_statements.TOOLTIPS={BREAK:RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK"),CONTINUE:RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE")},Blockly.Arduino.controls_for=function(){var o=Blockly.Arduino.valueToCode(this,"VAR",Blockly.Arduino.ORDER_NONE)||"",e=Blockly.Arduino.valueToCode(this,"FROM",Blockly.Arduino.ORDER_ASSIGNMENT)||"",t=Blockly.Arduino.valueToCode(this,"TO",Blockly.Arduino.ORDER_ASSIGNMENT)||"",l=Blockly.Arduino.statementToCode(this,"DO");Blockly.Arduino.INFINITE_LOOP_TRAP&&(l=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+l);var _="",s=RoboBlocks.findPinMode(o);_+=s.code,o=s.pin,_+=(s=RoboBlocks.findPinMode(e)).code,e=s.pin,_+=(s=RoboBlocks.findPinMode(t)).code,t=s.pin;var n=this.getInputTargetBlock("FROM"),i=this.getInputTargetBlock("TO");if(n&&i){var a=this.getInputTargetBlock("FROM").type,c=this.getInputTargetBlock("TO").type;if("variables_get"==a&&"math_number"==c)r=!1;else if("math_number"==a&&"variables_get"==c)r=!0;else if("math_number"==a&&"math_number"==c)r=parseFloat(e)<=parseFloat(t);else var r=parseFloat(e)<=parseFloat(t);_+="for ("+o+" = "+e+"; "+o+(r?" <= ":" >= ")+t+"; "+o+(r?"++":"--")+") {\n"+l+"}\n"}return _},Blockly.Blocks.controls_for={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_for"),examples:["controls_for_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_FOR_INPUT_WITH","LANG_CONTROLS_FOR_INPUT_FROM","LANG_CONTROLS_FOR_INPUT_TO","LANG_CONTROLS_FOR_INPUT_DO"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("VAR").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_INPUT_WITH")),this.appendValueInput("FROM").setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_INPUT_FROM")),this.appendValueInput("TO").setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_INPUT_TO")),this.appendStatementInput("DO").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_INPUT_DO")).setCheck("code"),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setInputsInline(!0);var o=this;this.setTooltip(function(){return RoboBlocks.LANG_CONTROLS_FOR_TOOLTIP.replace("%1",o.getFieldValue("VAR"))})},getVars:function(){return[this.getFieldValue("VAR")]},getVariables:function(){var o=Blockly.Variables.allUsedVariables,e=[];if(o.length>0)for(var t in o)e.push([o[t],o[t]]);else e.push(["",""]);return e},isVariable:function(o){for(var e in Blockly.Variables.allUsedVariables)if(Blockly.Variables.allUsedVariables[e]===o)return!0;return!1},onchange:function(){var o=this.getInputTargetBlock("FROM"),e=this.getInputTargetBlock("TO");if(o&&e){var t=o.type,l=e.type;"variables_get"==t&&"math_number"==l?this.setWarningText(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_LOOP_WARNING1")):"math_number"==t&&"variables_get"==l?this.setWarningText(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_LOOP_WARNING2")):"math_number"==t&&"math_number"==l?this.setWarningText(null):this.setWarningText(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_LOOP_WARNING3"))}else this.setWarningText(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_LOOP_WARNING4"))},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setTitleValue(e,"VAR")}},Blockly.Arduino.controls_if=function(){var o=0,e=Blockly.Arduino.valueToCode(this,"IF"+o,Blockly.Arduino.ORDER_NONE);e=e.replace(/&quot;/g,'"');var t=Blockly.Arduino.statementToCode(this,"DO"+o),l="",_=RoboBlocks.findPinMode(e);for(l+=_.code,e=_.pin,l+=JST.controls_if({argument:e,branch:t}),o=1;o<=this.elseifCount_;o++)e=Blockly.Arduino.valueToCode(this,"IF"+o,Blockly.Arduino.ORDER_NONE),t=Blockly.Arduino.statementToCode(this,"DO"+o),l+=JST.controls_elseif({argument:e,branch:t});return this.elseCount_&&(t=Blockly.Arduino.statementToCode(this,"ELSE"),l+=JST.controls_else({argument:e,branch:t})),t=t.replace(/&quot;/g,'"'),(l=l.replace(/&quot;/g,'"'))+"\n"},Blockly.Blocks.controls_if={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_if"),examples:["controls_if_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_IF_MSG_IF","LANG_CONTROLS_IF_MSG_THEN","LANG_CONTROLS_IF_TOOLTIP_1","LANG_CONTROLS_IF_ELSEIF_Field_ELSEIF","LANG_CONTROLS_IF_MSG_THEN","LANG_CONTROLS_IF_ELSE_Field_ELSE"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("IF0").setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_IF")),this.appendStatementInput("DO0").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT).setCheck("code"),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setMutator(new Blockly.Mutator(["controls_if_elseif","controls_if_else"]));var o=this;this.setTooltip(function(){return o.elseifCount_||o.elseCount_?"":RoboBlocks.locales.getKey("LANG_CONTROLS_IF_TOOLTIP_1")}),this.elseifCount_=0,this.elseCount_=0},mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var o=document.createElement("mutation");return this.elseifCount_&&o.setAttribute("elseif",this.elseifCount_),this.elseCount_&&o.setAttribute("else",1),o},domToMutation:function(o){this.elseifCount_=window.parseInt(o.getAttribute("elseif"),10),this.elseCount_=window.parseInt(o.getAttribute("else"),10);for(var e=1;e<=this.elseifCount_;e++)this.appendValueInput("IF"+e).setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSEIF_Field_ELSEIF")),this.appendStatementInput("DO"+e).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT).setCheck("code");this.elseCount_&&(this.appendDummyInput("ELSE_LABEL").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSE_Field_ELSE")),this.appendStatementInput("ELSE").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT).setCheck("code"))},decompose:function(o){var e=o.newBlock("controls_if_if");e.initSvg();for(var t=e.getInput("STACK").connection,l=1;l<=this.elseifCount_;l++){var _=o.newBlock("controls_if_elseif");_.initSvg(),t.connect(_.previousConnection),t=_.nextConnection}if(this.elseCount_){var s=o.newBlock("controls_if_else");s.initSvg(),t.connect(s.previousConnection)}return e},compose:function(o){this.elseCount_&&(this.removeInput("ELSE_LABEL"),this.removeInput("ELSE")),this.elseCount_=0;for(var e=this.elseifCount_;e>0;e--)this.removeInput("IF"+e),this.removeInput("DO"+e);this.elseifCount_=0;for(var t=o.getInputTargetBlock("STACK");t;){switch(t.type){case"controls_if_elseif":this.elseifCount_++;var l=this.appendValueInput("IF"+this.elseifCount_).setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSEIF_Field_ELSEIF")),_=this.appendStatementInput("DO"+this.elseifCount_).setCheck("code");_.appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT),t.valueConnection_&&l.connection.connect(t.valueConnection_),t.statementConnection_&&_.connection.connect(t.statementConnection_);break;case"controls_if_else":this.elseCount_++,this.appendDummyInput("ELSE_LABEL").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSE_Field_ELSE"));var s=this.appendStatementInput("ELSE").setCheck("code");s.appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT),t.statementConnection_&&s.connection.connect(t.statementConnection_);break;default:throw"Unknown block type."}t=t.nextConnection&&t.nextConnection.targetBlock()}},saveConnections:function(o){for(var e=o.getInputTargetBlock("STACK"),t=1;e;){switch(e.type){case"controls_if_elseif":var l=this.getInput("IF"+t),_=this.getInput("DO"+t);e.valueConnection_=l&&l.connection.targetConnection,e.statementConnection_=_&&_.connection.targetConnection,t++;break;case"controls_if_else":_=this.getInput("ELSE"),e.statementConnection_=_&&_.connection.targetConnection;break;default:throw"Unknown block type."}e=e.nextConnection&&e.nextConnection.targetBlock()}}},Blockly.Blocks.controls_if_if={colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_IF_IF_Field_IF","LANG_CONTROLS_IF_IF_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_IF_Field_IF")).setAlign(Blockly.ALIGN_RIGHT),this.appendStatementInput("STACK").setCheck("if"),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_IF_TOOLTIP")),this.contextMenu=!1}},Blockly.Blocks.controls_if_elseif={colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_IF_ELSEIF_Field_ELSEIF","LANG_CONTROLS_IF_ELSEIF_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSEIF_Field_ELSEIF")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,"if"),this.setNextStatement(!0,"if"),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSEIF_TOOLTIP")),this.contextMenu=!1}},Blockly.Blocks.controls_if_else={colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_IF_ELSE_Field_ELSE","LANG_CONTROLS_IF_ELSE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSE_Field_ELSE")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,"if"),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSE_TOOLTIP")),this.contextMenu=!1}};var indentSentences=function(o){var e=o.split("\n"),t="";for(var l in e)t+="  "+e[l]+"\n";return t};return Blockly.Arduino.controls_switch=function(){var o=0,e=Blockly.Arduino.valueToCode(this,"IF0",Blockly.Arduino.ORDER_NONE)||"",t=Blockly.Arduino.statementToCode(this,"DO"+o);t=indentSentences(t);var l="",_=RoboBlocks.findPinMode(e);for(l+=_.code,l+="switch ("+(e=_.pin)+")\n{",o=1;o<=this.switchCount_;o++)e=Blockly.Arduino.valueToCode(this,"SWITCH"+o,Blockly.Arduino.ORDER_NONE)||"",t=Blockly.Arduino.statementToCode(this,"DO"+o),l+=" \n  case "+e+": \n  {\n"+(t=(t=indentSentences(t)).substring(0,t.length-1))+"  break;\n  }";return this.defaultCount_&&(t=Blockly.Arduino.statementToCode(this,"DEFAULT"),l+="  \n  default:\n  {\n"+(t=(t=indentSentences(t)).substring(0,t.length-1))+"}"),l+"\n}\n"},Blockly.Blocks.controls_switch={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_switch"),examples:["controls_switch_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_SWITCH","LANG_CONTROLS_SWITCH_CASE","LANG_CONTROLS_IF_MSG_THEN","LANG_CONTROLS_SWITCH_DEFAULT"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("IF0").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setMutator(new Blockly.Mutator(["controls_switch_case","controls_switch_default"]));this.setTooltip(function(){return""}),this.defaultCount_=0},mutationToDom:function(){if(!this.switchCount_&&!this.defaultCount_)return null;var o=document.createElement("mutation");return this.switchCount_&&o.setAttribute("case",this.switchCount_),this.defaultCount_&&o.setAttribute("default",1),o},domToMutation:function(o){this.switchCount_=window.parseInt(o.getAttribute("case"),10),this.defaultCount_=window.parseInt(o.getAttribute("default"),10);for(var e=1;e<=this.switchCount_;e++)this.appendValueInput("SWITCH"+e).setCheck(Number).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_CASE")).setAlign(Blockly.ALIGN_RIGHT),this.setInputsInline(!0),this.appendStatementInput("DO"+e).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT).setCheck("code");this.defaultCount_&&this.appendStatementInput("DEFAULT").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_DEFAULT")).setAlign(Blockly.ALIGN_RIGHT).setCheck("code")},decompose:function(o){var e=o.newBlock("controls_switch_switch");e.initSvg();for(var t=e.getInput("STACK").connection,l=1;l<=this.switchCount_;l++){var _=o.newBlock("controls_switch_case");_.initSvg(),t.connect(_.previousConnection),t=_.nextConnection}if(this.defaultCount_){var s=o.newBlock("controls_switch_default");s.initSvg(),t.connect(s.previousConnection)}return e},compose:function(o){this.defaultCount_&&this.removeInput("DEFAULT"),this.defaultCount_=0;for(var e=this.switchCount_;e>0;e--)this.removeInput("SWITCH"+e),this.removeInput("DO"+e);this.switchCount_=0;for(var t=o.getInputTargetBlock("STACK");t;){switch(t.type){case"controls_switch_case":this.switchCount_++;var l;l=RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_CASE");var _=this.appendValueInput("SWITCH"+this.switchCount_).setCheck(Number).appendField(l).setAlign(Blockly.ALIGN_RIGHT);this.setInputsInline(!0);var s=this.appendStatementInput("DO"+this.switchCount_).setCheck("code");s.appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT),t.valueConnection_&&_.connection.connect(t.valueConnection_),t.statementConnection_&&s.connection.connect(t.statementConnection_);break;case"controls_switch_default":this.defaultCount_++;var n=this.appendStatementInput("DEFAULT").setCheck("code");n.appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_DEFAULT")).setAlign(Blockly.ALIGN_RIGHT),t.statementConnection_&&n.connection.connect(t.statementConnection_);break;default:throw"Unknown block type."}t=t.nextConnection&&t.nextConnection.targetBlock()}},saveConnections:function(o){for(var e=o.getInputTargetBlock("STACK"),t=1;e;){switch(e.type){case"controls_switch_case":var l=this.getInput("SWITCH"+t),_=this.getInput("DO"+t);e.valueConnection_=l&&l.connection.targetConnection,e.statementConnection_=_&&_.connection.targetConnection,t++;break;case"controls_switch_default":_=this.getInput("DEFAULT"),e.statementConnection_=_&&_.connection.targetConnection;break;default:throw"Unknown block type."}e=e.nextConnection&&e.nextConnection.targetBlock()}}},Blockly.Blocks.controls_switch_switch={colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_SWITCH"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH")).setAlign(Blockly.ALIGN_RIGHT),this.appendStatementInput("STACK").setCheck("switch"),this.setTooltip("Switch"),this.contextMenu=!1}},Blockly.Blocks.controls_switch_case={colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_SWITCH_CASE"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_CASE")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,"switch"),this.setNextStatement(!0,"switch"),this.setTooltip("Switch case"),this.contextMenu=!1}},Blockly.Blocks.controls_switch_default={colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_SWITCH_DEFAULT"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_DEFAULT")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,"switch"),this.setTooltip("Switch default"),this.contextMenu=!1}},Blockly.Arduino.controls_whileUntil=function(){var o=Blockly.Arduino.valueToCode(this,"BOOL",Blockly.Arduino.ORDER_NONE)||"";o=o.replace(/&quot;/g,'"');var e=Blockly.Arduino.statementToCode(this,"DO");e=e.replace(/&quot;/g,'"');var t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,Blockly.Arduino.INFINITE_LOOP_TRAP&&(e=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+e),"UNTIL"===this.getFieldValue("MODE")&&(o.match(/^\w+$/)||(o="("+o+")"),o="!"+o),t+=JST.controls_whileUntil({argument0:o,branch:e})},Blockly.Blocks.controls_whileUntil={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_whileUntil"),examples:["controls_whileUntil_example.bly","controls_whileUntil1_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_WHILEUNTIL_OPERATOR_WHILE","LANG_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL","LANG_CONTROLS_DOWHILE_OPERATOR_DO","LANG_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE","LANG_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("BOOL").setCheck(Boolean).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_OPERATOR_WHILE"),"WHILE"],[RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL"),"UNTIL"]]),"MODE"),this.appendStatementInput("DO").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_DOWHILE_OPERATOR_DO")),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code");var o=this;this.setTooltip(function(){var e=o.getFieldValue("MODE");return Blockly.Blocks.controls_whileUntil.TOOLTIPS[e]})}},Blockly.Blocks.controls_whileUntil.TOOLTIPS={WHILE:RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE"),UNTIL:RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL")},Blockly.Arduino.inout_analog_read=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,RoboBlocks.isVariable(o)?e+=JST.inout_analog_read_setups({dropdown_pin:o}):Blockly.Arduino.setups_["setup_green_analog_read"+o]=JST.inout_analog_read_setups({dropdown_pin:o}),e+=JST.inout_analog_read({dropdown_pin:o}),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.inout_analog_read={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_ANALOG"),helpUrl:RoboBlocks.getHelpUrl("inout_analog_read"),examples:["inout_analog_read_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_ANALOG,keys:["LANG_ADVANCED_INOUT_ANALOG_READ","LANG_ADVANCED_INOUT_ANALOG_READ_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_ANALOG),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_ANALOG_READ")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)),this.setOutput(!0,Number),this.setInputsInline(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_ANALOG_READ_TOOLTIP"))}},Blockly.Arduino.inout_analog_write=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(o);t+=l.code,o=l.pin;var _=RoboBlocks.findPinMode(e);return t+=_.code,e=_.pin,RoboBlocks.isVariable(o)?t+=JST.inout_analog_write_setups({dropdown_pin:o,value_num:e}):Blockly.Arduino.setups_["setup_analog_write"+o]=JST.inout_analog_write_setups({dropdown_pin:o,value_num:e}),t+=JST.inout_analog_write({dropdown_pin:o,value_num:e})},Blockly.Blocks.inout_analog_write={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_ANALOG"),helpUrl:RoboBlocks.getHelpUrl("inout_analog_write"),examples:["inout_analog_write_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_ANALOG,keys:["LANG_ADVANCED_INOUT_ANALOG_WRITE","LANG_ADVANCED_INOUT_ANALOG_WRITE_VALUE","LANG_ADVANCED_INOUT_ANALOG_WRITE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_ANALOG),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_ANALOG_WRITE")).appendField(new Blockly.FieldImage("img/blocks/pwm_signal.svg",24*options.zoom,24*options.zoom)),this.appendValueInput("NUM",Number).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_ANALOG_WRITE_VALUE")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).setCheck(Number),this.setInputsInline(!0),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_ANALOG_WRITE_TOOLTIP"))}},Blockly.Arduino.inout_builtin_led=function(){var o=this.getFieldValue("STAT"),e="";return Blockly.Arduino.setups_.setup_green_led_13=JST.inout_builtin_led_setups({}),"TOGGLE"===o?e+="digitalWrite(13,!digitalRead(13));\n":e=JST.inout_builtin_led({dropdown_stat:o}),e},Blockly.Blocks.inout_builtin_led={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_DIGITAL"),helpUrl:RoboBlocks.getHelpUrl("inout_builtin_led"),examples:["inout_builtin_led_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL,keys:["LANG_ADVANCED_BUILTIN_LED","LANG_ADVANCED_BUILTIN_LED_ON","LANG_ADVANCED_BUILTIN_LED_OFF","LANG_ADVANCED_BUILTIN_LED_TOGGLE","LANG_ADVANCED_BUILTIN_LED_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED")).appendField(new Blockly.FieldImage("img/blocks/diode.png",24*options.zoom,24*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED_STATE")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED_ON")||"ON","HIGH"],[RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED_OFF")||"OFF","LOW"],[RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED_TOGGLE")||"TOGGLE","TOGGLE"]]),"STAT"),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED_TOOLTIP"))}},Blockly.Arduino.inout_digital_read=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,RoboBlocks.isVariable(o)?e+=JST.inout_digital_read_setups({dropdown_pin:o}):Blockly.Arduino.setups_["setup_green_digital_read"+o]=JST.inout_digital_read_setups({dropdown_pin:o}),e+=JST.inout_digital_read({dropdown_pin:o}),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.inout_digital_read={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_DIGITAL"),helpUrl:RoboBlocks.getHelpUrl("inout_digital_read"),examples:["inout_digital_read_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL,keys:["LANG_ADVANCED_INOUT_DIGITAL_READ","LANG_ADVANCED_INOUT_DIGITAL_READ_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_READ")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)),this.setOutput(!0,Boolean),this.setInputsInline(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_READ_TOOLTIP"))}},Blockly.Arduino.inout_digital_write=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(this,"STAT",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,RoboBlocks.isVariable(o)?t+=JST.inout_digital_write_setups({dropdown_pin:o}):Blockly.Arduino.setups_["setup_green_digital_write_"+o]=JST.inout_digital_write_setups({dropdown_pin:o}),t+=JST.inout_digital_write({dropdown_pin:o,dropdown_stat:e})},Blockly.Blocks.inout_digital_write={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_DIGITAL"),helpUrl:RoboBlocks.getHelpUrl("inout_digital_write"),examples:["inout_digital_read_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL,keys:["LANG_ADVANCED_INOUT_DIGITAL_WRITE","LANG_ADVANCED_INOUT_DIGITAL_WRITE_PIN","LANG_ADVANCED_INOUT_DIGITAL_WRITE_STATE","LANG_ADVANCED_INOUT_DIGITAL_WRITE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_WRITE")).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_WRITE_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)),this.appendValueInput("STAT").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_WRITE_STATE")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,"code"),this.setInputsInline(!0),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_WRITE_TOOLTIP"))}},Blockly.Arduino.inout_digital_mode=function(){return"pinMode("+Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)+","+this.getFieldValue("MODE")+");"},Blockly.Blocks.inout_digital_mode={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_DIGITAL"),helpUrl:RoboBlocks.getHelpUrl("inout_digital_mode"),examples:["inout_digital_mode_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL,keys:["LANG_ADVANCED_INOUT_DIGITAL_MODE","LANG_ADVANCED_INOUT_DIGITAL_MODE_PIN","LANG_ADVANCED_INOUT_DIGITAL_MODE_MODE","LANG_ADVANCED_INOUT_DIGITAL_MODE_OUTPUT","LANG_ADVANCED_INOUT_DIGITAL_MODE_INPUT","LANG_ADVANCED_INOUT_DIGITAL_MODE_PULLUP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE")).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_MODE")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_OUTPUT")||"OUTPUT","OUTPUT"],[RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_INPUT")||"INPUT","INPUT"],[RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_PULLUP")||"PULLUP","INPUT_PULLUP"]]),"MODE").setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,"code"),this.setInputsInline(!0),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_TOOLTIP"))}},Blockly.Arduino.inout_highlow=function(){var o=this.getFieldValue("BOOL");return[JST.inout_highlow({bool_value:o}),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.inout_highlow={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_DIGITAL"),helpUrl:RoboBlocks.getHelpUrl("inout_highlow"),tags:["input","output"],examples:["inout_highlow_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL,keys:["LANG_ADVANCED_HIGHLOW_HIGH","LANG_ADVANCED_HIGHLOW_LOW","LANG_ADVANCED_HIGHLOW_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL),this.appendDummyInput("").appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_ADVANCED_HIGHLOW_HIGH")||"HIGH","HIGH"],[RoboBlocks.locales.getKey("LANG_ADVANCED_HIGHLOW_LOW")||"LOW","LOW"]]),"BOOL"),this.setOutput(!0,Boolean),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_HIGHLOW_TOOLTIP"))}},Blockly.Arduino.lcd_clear=function(){return JST.lcd_clear({})},Blockly.Blocks.lcd_clear={category:RoboBlocks.locales.getKey("LANG_CATEGORY_SCREEN"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_LCD"),tags:["lcd","screen"],helpUrl:RoboBlocks.getHelpUrl("lcd_clear"),examples:["lcd_clear_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_SCREEN,colour:RoboBlocks.LANG_COLOUR_SCREEN_LCD,keys:["LANG_LCD_CLEAR","LANG_LCD_CLEAR_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_SCREEN_LCD),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_LCD_CLEAR")).appendField(new Blockly.FieldImage("img/blocks/lcd.svg",52*options.zoom,24*options.zoom)),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_LCD_CLEAR_TOOLTIP"))}},Blockly.Arduino.lcd_def=function(){var o={};return o.lcd_1=this.getFieldValue("LCD_1"),o.lcd_2=this.getFieldValue("LCD_2"),o.lcd_3=this.getFieldValue("LCD_3"),o.lcd_4=this.getFieldValue("LCD_4"),o.lcd_5=this.getFieldValue("LCD_5"),o.lcd_6=this.getFieldValue("LCD_6"),Blockly.Arduino.definitions_.define_lcd=JST.lcd_def_definitions({}),Blockly.Arduino.definitions_.declare_var_LCD=JST.lcd_def_declare(o),Blockly.Arduino.setups_.setup_lcd_=JST.lcd_def_setups({}),""},Blockly.Blocks.lcd_def={category:RoboBlocks.locales.getKey("LANG_CATEGORY_SCREEN"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_LCD"),tags:["lcd","screen"],helpUrl:RoboBlocks.getHelpUrl("lcd_def"),examples:["lcd_def_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_SCREEN,colour:RoboBlocks.LANG_COLOUR_SCREEN_LCD,keys:["LANG_LCD_DEF","LANG_LCD_PINS","LANG_LCD_DEF_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_SCREEN_LCD),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_LCD_DEF")).appendField(new Blockly.FieldImage("img/blocks/lcd.svg",52*options.zoom,24*options.zoom)),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_LCD_PINS")).appendField(new Blockly.FieldTextInput("11"),"LCD_1").appendField(new Blockly.FieldTextInput("12"),"LCD_2").appendField(new Blockly.FieldTextInput("3"),"LCD_3").appendField(new Blockly.FieldTextInput("4"),"LCD_4").appendField(new Blockly.FieldTextInput("5"),"LCD_5").appendField(new Blockly.FieldTextInput("6"),"LCD_6"),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_LCD_DEF_TOOLTIP"))}},Blockly.Arduino.lcd_print=function(){var o=Blockly.Arduino.valueToCode(this,"VAL",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(this,"XCOOR",Blockly.Arduino.ORDER_ATOMIC),t=Blockly.Arduino.valueToCode(this,"YCOOR",Blockly.Arduino.ORDER_ATOMIC),l="",_=RoboBlocks.findPinMode(e);return l+=_.code,e=_.pin,_=RoboBlocks.findPinMode(t),l+=_.code,t=_.pin,_=RoboBlocks.findPinMode(o),l+=_.code,o=_.pin,"TRUE"===this.getFieldValue("POS")?l+=JST.lcd_print_pos({val:o,xcoor:e,ycoor:t}):l+=JST.lcd_print({val:o}),l=l.replace(/&quot;/g,'"')},Blockly.Blocks.lcd_print={category:RoboBlocks.locales.getKey("LANG_CATEGORY_SCREEN"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_LCD"),tags:["lcd","screen"],helpUrl:RoboBlocks.getHelpUrl("lcd_print"),examples:["lcd_print_example1.bly","lcd_print_example2.bly"],category_colour:RoboBlocks.LANG_COLOUR_SCREEN,colour:RoboBlocks.LANG_COLOUR_SCREEN_LCD,keys:["LANG_LCD_PRINT","LANG_LCD_PRINT_POSITION","LANG_LCD_PRINT_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_SCREEN_LCD),this.appendValueInput("VAL").appendField(RoboBlocks.locales.getKey("LANG_LCD_PRINT")).appendField(new Blockly.FieldImage("img/blocks/lcd.svg",52*options.zoom,24*options.zoom)),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_LCD_PRINT_POSITION")).appendField(new Blockly.FieldCheckbox("FALSE"),"POS").setAlign(Blockly.ALIGN_RIGHT),this.last_pos=this.getFieldValue("POS"),this.getPosition(),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_LCD_PRINT_TOOLTIP"))},getPosition:function(){try{this.removeInput("XCOOR"),this.removeInput("YCOOR")}catch(o){}"TRUE"===this.getFieldValue("POS")&&(this.appendValueInput("XCOOR").appendField("row").setAlign(Blockly.ALIGN_RIGHT),this.appendValueInput("YCOOR").appendField("column").setAlign(Blockly.ALIGN_RIGHT))},onchange:function(){this.getFieldValue("POS")!==this.last_pos&&(this.getPosition(),this.last_pos=this.getFieldValue("POS"))},mutationToDom:function(){var o=document.createElement("mutation");return"TRUE"===this.getFieldValue("POS")?o.setAttribute("fixed",!0):"FALSE"===this.getFieldValue("POS")&&o.setAttribute("fixed",!1),o},domToMutation:function(o){this.setFieldValue(o.getAttribute("fixed"),"POS"),"TRUE"===this.getFieldValue("POS")&&(this.appendValueInput("XCOOR").appendField("row").setAlign(Blockly.ALIGN_RIGHT),this.appendValueInput("YCOOR").appendField("column").setAlign(Blockly.ALIGN_RIGHT))}},Blockly.Arduino.lcd_setBacklight=function(){var o=this.getFieldValue("STATE");return JST.lcd_setBacklight({state:o})},Blockly.Blocks.lcd_setBacklight={category:RoboBlocks.locales.getKey("LANG_CATEGORY_SCREEN"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_LCD"),helpUrl:RoboBlocks.getHelpUrl("lcd_setBacklight"),tags:["lcd","screen"],examples:["lcd_setBacklight_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_SCREEN,colour:RoboBlocks.LANG_COLOUR_SCREEN_LCD,keys:["LANG_LCD_SETBACKLIGHT","LANG_LCD_SETBACKLIGHT_CLOSE","LANG_LCD_SETBACKLIGHT_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_SCREEN_LCD),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_LCD_SETBACKLIGHT")).appendField(new Blockly.FieldDropdown([["LOW","LOW"],["HIGH","HIGH"]]),"STATE").appendField(RoboBlocks.locales.getKey("LANG_LCD_SETBACKLIGHT_CLOSE")).appendField(new Blockly.FieldImage("img/blocks/lcd.svg",52*options.zoom,24*options.zoom)),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_LCD_SETBACKLIGHT_TOOLTIP"))}},Blockly.Arduino.logic_boolean=function(){return["TRUE"===this.getFieldValue("BOOL")?"true":"false",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.logic_boolean={category:RoboBlocks.locales.getKey("LANG_CATEGORY_LOGIC"),helpUrl:RoboBlocks.getHelpUrl("logic_boolean"),examples:["logic_boolean_example.bly"],tags:["logic"],category_colour:RoboBlocks.LANG_COLOUR_LOGIC,colour:RoboBlocks.LANG_COLOUR_LOGIC,keys:["LANG_LOGIC_BOOLEAN_TRUE","LANG_LOGIC_BOOLEAN_FALSE"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LOGIC),this.setOutput(!0,Boolean),this.appendDummyInput().appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_LOGIC_BOOLEAN_TRUE"),"TRUE"],[RoboBlocks.locales.getKey("LANG_LOGIC_BOOLEAN_FALSE"),"FALSE"]]),"BOOL"),this.setTooltip(RoboBlocks.locales.getKey("LANG_LOGIC_BOOLEAN_TOOLTIP"))}},Blockly.Arduino.logic_compare=function(){var o=this.getFieldValue("OP"),e=Blockly.Arduino.logic_compare.OPERATORS[o],t="=="===e||"!="===e?Blockly.Arduino.ORDER_EQUALITY:Blockly.Arduino.ORDER_RELATIONAL,l=Blockly.Arduino.valueToCode(this,"A",t)||"",_=Blockly.Arduino.valueToCode(this,"B",t)||"",s="",n=RoboBlocks.findPinMode(l);return s+=n.code,l=n.pin,n=RoboBlocks.findPinMode(_),s+=n.code,_=n.pin,s+=JST.logic_compare({argument0:l,argument1:_,operator:e}),[s,t]},Blockly.Arduino.logic_compare.OPERATORS={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="},Blockly.Blocks.logic_compare={category:RoboBlocks.locales.getKey("LANG_CATEGORY_LOGIC"),helpUrl:RoboBlocks.getHelpUrl("logic_compare"),examples:["logic_compare_example.bly"],tags:["logic"],category_colour:RoboBlocks.LANG_COLOUR_LOGIC,colour:RoboBlocks.LANG_COLOUR_LOGIC,keys:["LANG_LOGIC_COMPARE_TOOLTIP_EQ","LANG_LOGIC_COMPARE_TOOLTIP_NEQ","LANG_LOGIC_COMPARE_TOOLTIP_LT","LANG_LOGIC_COMPARE_TOOLTIP_LTE","LANG_LOGIC_COMPARE_TOOLTIP_GT","LANG_LOGIC_COMPARE_TOOLTIP_GTE"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LOGIC),this.setOutput(!0,Boolean),this.appendValueInput("A"),this.appendValueInput("B").appendField(new Blockly.FieldDropdown(this.OPERATORS),"OP"),this.setInputsInline(!0);var o=this;this.setTooltip(function(){var e=o.getFieldValue("OP");return Blockly.Blocks.logic_compare.TOOLTIPS[e]})}},Blockly.Blocks.logic_compare.OPERATORS=[["=","EQ"],["≠","NEQ"],["<","LT"],["≤","LTE"],[">","GT"],["≥","GTE"]],Blockly.Blocks.logic_compare.TOOLTIPS={EQ:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_EQ"),NEQ:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_NEQ"),LT:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_LT"),LTE:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_LTE"),GT:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_GT"),GTE:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_GTE")},Blockly.Arduino.logic_operation=function(){var o="",e="AND"===this.getFieldValue("OP")?"&&":"OR"===this.getFieldValue("OP")?"||":"",t="&&"===e?Blockly.Arduino.ORDER_LOGICAL_AND:"||"===e?Blockly.Arduino.ORDER_LOGICAL_OR:Blockly.Arduino.ORDER_NONE,l=Blockly.Arduino.valueToCode(this,"A",t)||"",_=Blockly.Arduino.valueToCode(this,"B",t)||"",s=RoboBlocks.findPinMode(l);return o+=s.code,l=s.pin,s=RoboBlocks.findPinMode(_),o+=s.code,_=s.pin,"XOR"===this.getFieldValue("OP")?o+="((!("+l+"))&&("+_+")||((!("+_+"))&&("+l+")))":"XNOR"===this.getFieldValue("OP")?o+="(("+l+")&&("+_+")||((!("+_+"))&&(!("+l+"))))":"IMPLIES"===this.getFieldValue("OP")?o+="((!("+l+"))||("+_+"))":o+="("+l+") "+e+" ("+_+")",[o,t]},Blockly.Blocks.logic_operation={category:RoboBlocks.locales.getKey("LANG_CATEGORY_LOGIC"),helpUrl:RoboBlocks.getHelpUrl("logic_operation"),examples:["logic_operation_example.bly"],tags:["logic"],category_colour:RoboBlocks.LANG_COLOUR_LOGIC,colour:RoboBlocks.LANG_COLOUR_LOGIC,keys:["LANG_LOGIC_OPERATION_AND","LANG_LOGIC_OPERATION_OR","LANG_LOGIC_OPERATION_XOR","LANG_LOGIC_OPERATION_XNOR","LANG_LOGIC_OPERATION_IMPLIES","LANG_LOGIC_OPERATION_TOOLTIP_AND","LANG_LOGIC_OPERATION_TOOLTIP_OR","LANG_LOGIC_OPERATION_TOOLTIP_XOR","LANG_LOGIC_OPERATION_TOOLTIP_XNOR","LANG_LOGIC_OPERATION_TOOLTIP_IMPLIES"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LOGIC),this.setOutput(!0,Boolean),this.appendValueInput("A").setCheck(Boolean),this.appendValueInput("B").setCheck(Boolean).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_AND")||"AND","AND"],[RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_OR")||"OR","OR"],[RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_XOR")||"XOR","XOR"],[RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_XNOR")||"XNOR","XNOR"],[RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_IMPLIES")||"IMPLIES","IMPLIES"]]),"OP"),this.setInputsInline(!0);var o=this;this.setTooltip(function(){var e=o.getFieldValue("OP");return Blockly.Blocks.logic_operation.TOOLTIPS[e]})}},Blockly.Blocks.logic_operation.TOOLTIPS={AND:RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_TOOLTIP_AND"),OR:RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_TOOLTIP_OR"),XOR:RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_TOOLTIP_XOR"),XNOR:RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_TOOLTIP_XNOR"),IMPLIES:RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_TOOLTIP_IMPLIES")},Blockly.Arduino.logic_negate=function(){var o=Blockly.Arduino.ORDER_UNARY_PREFIX,e=Blockly.Arduino.valueToCode(this,"BOOL",o)||"false",t="",l=RoboBlocks.findPinMode(e);return t+=l.code,e=l.pin,t+=JST.logic_negate({argument0:e}),[t,o]},Blockly.Blocks.logic_negate={category:RoboBlocks.locales.getKey("LANG_CATEGORY_LOGIC"),helpUrl:RoboBlocks.getHelpUrl("logic_negate"),examples:["logic_negate_example.bly"],tags:["logic"],category_colour:RoboBlocks.LANG_COLOUR_LOGIC,colour:RoboBlocks.LANG_COLOUR_LOGIC,keys:["LANG_LOGIC_NEGATE_INPUT_NOT","LANG_LOGIC_NEGATE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LOGIC),this.setOutput(!0,Boolean),this.appendValueInput("BOOL").setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_LOGIC_NEGATE_INPUT_NOT")),this.setTooltip(RoboBlocks.locales.getKey("LANG_LOGIC_NEGATE_TOOLTIP"))}},Blockly.Arduino.math_arithmetic=function(){var o=this.getFieldValue("OP"),e=Blockly.Arduino.math_arithmetic.OPERATORS[o],t=e[0],l=e[1],_=Blockly.Arduino.valueToCode(this,"A",l)||"",s=Blockly.Arduino.valueToCode(this,"B",l)||"",n="",i=RoboBlocks.findPinMode(_);return n+=i.code,_=i.pin,i=RoboBlocks.findPinMode(s),n+=i.code,s=i.pin,t?(n+=JST.math_arithmetic({argument0:_,argument1:s,operator:t}),[n,l]):(n=JST.math_arithmetic_pow({argument0:_,argument1:s}),[n,Blockly.Arduino.ORDER_UNARY_POSTFIX])},Blockly.Arduino.math_arithmetic.OPERATORS={ADD:[" + ",Blockly.Arduino.ORDER_ADDITIVE],MINUS:[" - ",Blockly.Arduino.ORDER_ADDITIVE],MULTIPLY:[" * ",Blockly.Arduino.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",Blockly.Arduino.ORDER_MULTIPLICATIVE],POWER:[null,Blockly.Arduino.ORDER_NONE]},Blockly.Blocks.math_arithmetic={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("math_arithmetic"),examples:["math_arithmetic_example.bly"],tags:["math"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_MATH_ARITHMETIC_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_MATH),this.setOutput(!0,Number),this.appendValueInput("A").setCheck(Number),this.appendValueInput("B").setCheck(Number).appendField(new Blockly.FieldDropdown(this.OPERATORS),"OP"),this.setInputsInline(!0);this.setTooltip(RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP"))}},Blockly.Blocks.math_arithmetic.OPERATORS=[["+","ADD"],["-","MINUS"],["×","MULTIPLY"],["÷","DIVIDE"],["^","POWER"]],Blockly.Blocks.math_arithmetic.TOOLTIPS={ADD:RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP_ADD"),MINUS:RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP_MINUS"),MULTIPLY:RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP_MULTIPLY"),DIVIDE:RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP_DIVIDE"),POWER:RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP_POWER")},Blockly.Arduino.math_modulo=function(){var o=Blockly.Arduino.valueToCode(this,"DIVIDEND",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"",e=Blockly.Arduino.valueToCode(this,"DIVISOR",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"",t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,t+=JST.math_modulo({argument0:o,argument1:e}),[t,Blockly.Arduino.ORDER_MULTIPLICATIVE]},Blockly.Blocks.math_modulo={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("math_modulo"),examples:["math_arithmetic_example.bly"],tags:["math"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_MATH_MODULO_TOOLTIP"],init:function(){this.setColour(this.colour),this.setOutput(!0,Number),this.appendValueInput("DIVIDEND").setCheck(Number),this.appendValueInput("DIVISOR").setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendField("%"),this.setInputsInline(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_MATH_MODULO_TOOLTIP"))}},Blockly.Arduino.math_number=function(){var o=window.parseFloat(this.getFieldValue("NUM"));return[o,o<0?Blockly.Arduino.ORDER_UNARY_PREFIX:Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.math_number={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("math_number"),examples:["math_number_example.bly"],tags:["math"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_MATH_NUMBER_TOOLTIP"],init:function(){this.setColour(this.colour),this.appendDummyInput().appendField(new Blockly.FieldTextInput("0",Blockly.Blocks.math_number.validator),"NUM"),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_MATH_NUMBER_TOOLTIP"))}},Blockly.Blocks.math_number.validator=function(o){var e=window.parseFloat(o||0);return window.isNaN(e)?null:String(e)},Blockly.Arduino.math_random=function(){var o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(this,"DMAX",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,Blockly.Arduino.definitions_.define_random_bitOut=JST.math_random_bitOut({}),Blockly.Arduino.definitions_.define_random_seedOut=JST.math_random_seedOut({}),Blockly.Arduino.setups_.setup_randomseed="unsigned long seed =seedOut(31);\n  randomSeed(seed);\n",t+=JST.math_random({value_num:o,value_dmax:e}),[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.math_random={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("math_random"),examples:["math_random_example.bly"],tags:["math"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_ADVANCED_MATH_RANDOM","LANG_ADVANCED_MATH_RANDOM_AND","LANG_ADVANCED_MATH_RANDOM_TOOLTIP"],init:function(){this.setColour(this.colour),this.appendValueInput("NUM",Number).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_RANDOM")).setCheck(Number),this.appendValueInput("DMAX",Number).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_RANDOM_AND")).setCheck(Number),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_RANDOM_TOOLTIP"))}},Blockly.Arduino.math_to_number=function(){var o=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_NONE),e="";return e+="("+(this.getFieldValue("CAST")||"")+")("+o+")",[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.math_to_number={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),tags:["math"],helpUrl:RoboBlocks.getHelpUrl("math_to_number"),examples:["math_to_number_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_ADVANCED_MATH_CAST","LANG_VARIABLES_TYPE_INTEGER","LANG_VARIABLES_TYPE_INTEGER_LONG","LANG_VARIABLES_TYPE_BYTE","LANG_VARIABLES_TYPE_FLOAT"],init:function(){this.setColour(this.colour),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_CAST")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER"),"int"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER_LONG"),"long"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BYTE"),"byte"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_FLOAT"),"float"]]),"CAST"),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_CAST_TOOLTIP"))}},Blockly.Arduino.math_sinusoid=function(){var o=Blockly.Arduino.valueToCode(this,"AMPLITUDE",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(this,"FREQ",Blockly.Arduino.ORDER_NONE),t=Blockly.Arduino.valueToCode(this,"PHASE",Blockly.Arduino.ORDER_NONE),l=Blockly.Arduino.valueToCode(this,"OFFSET",Blockly.Arduino.ORDER_NONE);return["("+o+")*sin((6.28318530717959e-06)*(("+e+")*("+Blockly.Arduino.valueToCode(this,"TIME",Blockly.Arduino.ORDER_NONE)+"))+0.017453292519943*("+t+"))+("+l+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.math_sinusoid={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),tags:["math"],helpUrl:RoboBlocks.getHelpUrl("math_sinusoid"),examples:["math_sinusoid_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_ADVANCED_MATH_SINUSOID","LANG_ADVANCED_MATH_SINUSOID_AMPLITUDE","LANG_ADVANCED_MATH_SINUSOID_FREQ","LANG_ADVANCED_MATH_SINUSOID_PHASE","LANG_ADVANCED_MATH_SINUSOID_OFFSET","LANG_ADVANCED_MATH_SINUSOID_TIME","LANG_ADVANCED_MATH_SINUSOID_TOOLTIP"],init:function(){this.setColour(this.colour),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.appendValueInput("AMPLITUDE").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_AMPLITUDE")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.appendValueInput("FREQ").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_FREQ")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.appendValueInput("PHASE").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_PHASE")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.appendValueInput("OFFSET").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_OFFSET")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.appendValueInput("TIME").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_TIME")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_TOOLTIP"))}},Blockly.Arduino.math_single=function(){var o,e,t=this.getFieldValue("OP"),l="";if("NEG"===t)return o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_UNARY_PREFIX)||"",e=RoboBlocks.findPinMode(o),l+=e.code,"-"===(o=e.pin)[0]&&(o=" "+o),l+="-"+o,[l,Blockly.Arduino.ORDER_UNARY_PREFIX];"SIN"===t||"COS"===t||"TAN"===t?(o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"",l+=(e=RoboBlocks.findPinMode(o)).code,o=e.pin):"LOG10"===t?l="":(o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE)||"",l+=(e=RoboBlocks.findPinMode(o)).code,o=e.pin);var _=3.14159;switch(t){case"ABS":l+="abs("+o+")";break;case"ROOT":l+="sqrt("+o+")";break;case"LN":l+="log("+o+")";break;case"EXP":l+="exp("+o+")";break;case"POW10":l+="pow(10,"+o+")";break;case"SIN":l+="sin("+o+" / 180 * "+_+")";break;case"COS":l+="cos("+o+" / 180 * "+_+")";break;case"TAN":l+="tan("+o+" / 180 * "+_+")"}if(l)return[l,Blockly.Arduino.ORDER_UNARY_POSTFIX];switch(t){case"LOG10":o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE)||"",l+=(e=RoboBlocks.findPinMode(o)).code,l+="log("+(o=e.pin)+") / log(10)";break;case"ASIN":l+="asin("+o+") / "+_+" * 180";break;case"ACOS":l+="acos("+o+") / "+_+" * 180";break;case"ATAN":l+="atan("+o+") / "+_+" * 180";break;default:throw"Unknown math operator: "+t}return[l,Blockly.Arduino.ORDER_MULTIPLICATIVE]},Blockly.Blocks.math_single={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("math_single"),examples:["math_single_example.bly"],tags:["math"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_MATH_SINGLE_OP_ROOT","LANG_MATH_SINGLE_OP_ABSOLUTE","LANG_MATH_SINGLE_TOOLTIP_ROOT","LANG_MATH_SINGLE_TOOLTIP_ABS","LANG_MATH_SINGLE_TOOLTIP_NEG","LANG_MATH_SINGLE_TOOLTIP_LN","LANG_MATH_SINGLE_TOOLTIP_LOG10","LANG_MATH_SINGLE_TOOLTIP_EXP","LANG_MATH_SINGLE_TOOLTIP_POW10"],init:function(){this.setColour(this.colour),this.setOutput(!0,Number),this.appendValueInput("NUM").setCheck(Number).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_MATH_SINGLE_OP_ROOT")||"SQR ROOT","ROOT"],[RoboBlocks.locales.getKey("LANG_MATH_SINGLE_OP_ABSOLUTE")||"ABS","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]),"OP");var o=this;this.setTooltip(function(){var e=o.getFieldValue("OP");return Blockly.Blocks.math_single.TOOLTIPS[e]})}},Blockly.Blocks.math_single.TOOLTIPS={ROOT:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_ROOT"),ABS:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_ABS"),NEG:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_NEG"),LN:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_LN"),LOG10:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_LOG10"),EXP:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_EXP"),POW10:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_POW10")},Blockly.Arduino.pin_analog=function(){return[this.getFieldValue("PIN")||"",Blockly.Arduino.ORDER_NONE]},Blockly.Blocks.pin_analog={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_ANALOG"),helpUrl:RoboBlocks.getHelpUrl("pin_analog"),examples:["inout_analog_read_example.bly"],tags:["input","output"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED,keys:["LANG_VARIABLES_PIN_ANALOG","LANG_VARIABLES_PIN_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendDummyInput("").appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_ANALOG")).appendField(new Blockly.FieldDropdown(profiles.default.analog),"PIN"),this.setInputsInline(!0),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_TOOLTIP"))}},Blockly.Arduino.pin_digital=function(){return[this.getFieldValue("PIN")||"",Blockly.Arduino.ORDER_NONE]},Blockly.Blocks.pin_digital={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_DIGITAL"),helpUrl:RoboBlocks.getHelpUrl("pin_digital"),examples:["inout_digital_read_example.bly"],tags:["input","output"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL,keys:["LANG_VARIABLES_PIN_DIGITAL","LANG_VARIABLES_PIN_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL),this.appendDummyInput("").appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_DIGITAL")).appendField(new Blockly.FieldDropdown(profiles.default.digital),"PIN"),this.setInputsInline(!0),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_TOOLTIP"))}},Blockly.Arduino.pin_pwm=function(){return[this.getFieldValue("PIN")||"",Blockly.Arduino.ORDER_NONE]},Blockly.Blocks.pin_pwm={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_DIGITAL"),helpUrl:RoboBlocks.getHelpUrl("pin_pwm"),examples:["inout_analog_write_example.bly"],tags:["input","output"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL,keys:["LANG_VARIABLES_PIN_PWM","LANG_VARIABLES_PIN_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL),this.appendDummyInput("").appendField(new Blockly.FieldImage("img/blocks/pwm_signal.svg",24*options.zoom,24*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_PWM")).appendField(new Blockly.FieldDropdown(profiles.default.pwm),"PIN"),this.setInputsInline(!0),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_TOOLTIP"))}},Blockly.Arduino.serial_available=function(){var o=Blockly.Arduino.statementToCode(this,"DO");return o=o.replace(/&quot;/g,'"'),Blockly.Arduino.setups_.setup_serial=JST.serial_parseint_setups({bitrate:profiles.default.serial}),JST.serial_available({branch:o})},Blockly.Blocks.serial_available={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),helpUrl:RoboBlocks.getHelpUrl("serial_available"),tags:["serial","communication"],examples:["serial_available_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,keys:["LANG_ADVANCED_SERIAL_AVAILABLE","LANG_CONTROLS_REPEAT_INPUT_DO","LANG_ADVANCED_SERIAL_AVAILABLE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_AVAILABLE")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.appendStatementInput("DO").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_REPEAT_INPUT_DO")),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_AVAILABLE_TOOLTIP"))}},Blockly.Arduino.serial_parseint=function(){Blockly.Arduino.setups_.setup_serial=JST.serial_parseint_setups({bitrate:profiles.default.serial});return["Serial.parseInt()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.serial_parseint={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),helpUrl:RoboBlocks.getHelpUrl("serial_parseint"),tags:["serial","communication"],examples:["logic_operation_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,keys:["LANG_ADVANCED_SERIAL_PARSEINT","LANG_ADVANCED_SERIAL_PARSEINT_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PARSEINT")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PARSEINT_TOOLTIP"))}},Blockly.Arduino.serial_print=function(){var o=Blockly.Arduino.valueToCode(this,"CONTENT",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,Blockly.Arduino.setups_.setup_serial=JST.serial_print_setups({bitrate:profiles.default.serial}),e+=JST.serial_print({content:o})},Blockly.Blocks.serial_print={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),helpUrl:RoboBlocks.getHelpUrl("serial_print"),tags:["serial","communication"],examples:["serial_print_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,keys:["LANG_ADVANCED_SERIAL_PRINT","LANG_ADVANCED_SERIAL_PRINT_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendValueInput("CONTENT",String).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PRINT")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PRINT_TOOLTIP"))}},Blockly.Arduino.serial_println=function(){var o=Blockly.Arduino.valueToCode(this,"CONTENT",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,Blockly.Arduino.setups_.setup_serial=JST.serial_println_setups({bitrate:profiles.default.serial}),e+=JST.serial_println({content:o})},Blockly.Blocks.serial_println={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),helpUrl:RoboBlocks.getHelpUrl("serial_println"),tags:["serial","communication"],examples:["serial_print_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,keys:["LANG_ADVANCED_SERIAL_PRINTLN","LANG_ADVANCED_SERIAL_PRINTLN_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendValueInput("CONTENT",String).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PRINTLN")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PRINTLN_TOOLTIP"))}},Blockly.Arduino.serial_read=function(){return Blockly.Arduino.setups_.setup_serial=JST.serial_read_setups({bitrate:profiles.default.serial}),[JST.serial_read({}),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.serial_read={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),helpUrl:RoboBlocks.getHelpUrl("serial_read"),examples:["serial_read_example.bly"],tags:["serial","communication"],category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,keys:["LANG_ADVANCED_SERIAL_READ","LANG_ADVANCED_SERIAL_READ_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_READ")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setOutput(!0,String),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_READ_TOOLTIP"))}},Blockly.Arduino.serial_readstring=function(){return Blockly.Arduino.setups_.setup_serial=JST.serial_readstring_setups({bitrate:profiles.default.serial}),[JST.serial_readstring({}),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.serial_readstring={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),tags:["serial","communication"],helpUrl:RoboBlocks.getHelpUrl("serial_readstring"),examples:["serial_readstring_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,keys:["LANG_ADVANCED_SERIAL_READSTRING","LANG_ADVANCED_SERIAL_READSTRING_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_READSTRING")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setOutput(!0,String),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_READSTRING_TOOLTIP"))}},Blockly.Arduino.advanced_conversion=function(){var o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE),e="",t=RoboBlocks.findPinMode(o);e+=t.code,o=t.pin;var l=this.getFieldValue("CONV");return e+=JST.advanced_conversion({value_num:o,convertion:l}),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.advanced_conversion={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),tags:["serial","communication"],helpUrl:RoboBlocks.getHelpUrl("advanced_conversion"),examples:["advanced_conversion_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,keys:["LANG_ADVANCED_CONVERSION_CONVERT","LANG_ADVANCED_CONVERSION_DECIMAL","LANG_ADVANCED_CONVERSION_HEXADECIMAL","LANG_ADVANCED_CONVERSION_OCTAL","LANG_ADVANCED_CONVERSION_BINARY","LANG_ADVANCED_CONVERSION_VALUE","LANG_ADVANCED_CONVERSION_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_CONVERT")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_DECIMAL")||"DEC","DEC"],[RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_HEXADECIMAL")||"HEX","HEX"],[RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_OCTAL")||"OCT","OCT"],[RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_BINARY")||"BIN","BIN"]]),"CONV"),this.appendValueInput("NUM",Number).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_VALUE")).setAlign(Blockly.ALIGN_RIGHT).setCheck(Number),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_TOOLTIP"))}},Blockly.Arduino.serial_timeout=function(){var o=Blockly.Arduino.valueToCode(this,"TIMEOUT",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_.setup_serial_timeout="Serial.setTimeout("+o+");\n",""},Blockly.Blocks.serial_timeout={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),tags:["serial","communication"],helpUrl:RoboBlocks.getHelpUrl("serial_timeout"),category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,tags:["serial"],examples:["serial_read_example.bly"],keys:["LANG_ADVANCED_SERIAL_TIMEOUT","LANG_ADVANCED_SERIAL_TIMEOUT_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendValueInput("TIMEOUT",Number).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_TIMEOUT")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_TIMEOUT_TOOLTIP"))}},Blockly.Arduino.serial_special=function(){return["'"+this.getFieldValue("CHAR")+"'",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.serial_special={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("serial_special"),tags:["serial"],examples:["serial_special_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_ADVANCED_SERIAL_SPECIAL","LANG_ADVANCED_SERIAL_SPECIAL_TAB","LANG_ADVANCED_SERIAL_SPECIAL_CARRIAGE_RETURN","LANG_ADVANCED_SERIAL_SPECIAL_LINE_FEED","LANG_ADVANCED_SERIAL_SPECIAL_QUOTE","LANG_ADVANCED_SERIAL_SPECIAL_DOUBLE_QUOTE","LANG_ADVANCED_SERIAL_SPECIAL_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_TAB")||"TAB","\\t"],[RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_CARRIAGE_RETURN")||"CARRIAGE RETURN","\\r"],[RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_LINE_FEED")||"LINE FEED","\\n"],[RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_QUOTE")||"QUOTE","\\'"],[RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_DOUBLE_QUOTE")||"DOUBLE_QUOTE",'\\"']]),"CHAR"),this.setOutput(!0,String),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_TOOLTIP"))}},Blockly.Arduino.text=function(){return[Blockly.Arduino.quote_(this.getFieldValue("TEXT")),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text"),examples:["controls_setupLoop_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_TEXT_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendDummyInput().appendField('"').appendField(new Blockly.FieldTextInput(""),"TEXT").appendField('"'),this.setOutput(!0,String),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_TEXT_TOOLTIP"))}},Blockly.Arduino.text_append=function(){var o=Blockly.Arduino.valueToCode(this,"VAR",Blockly.Arduino.ORDER_NONE)||"",e=Blockly.Arduino.valueToCode(this,"TEXT",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"",t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,t+=o+" += String("+e+");\n"},Blockly.Blocks.text_append={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_append"),examples:["text_append_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_APPEND_TO","LANG_TEXT_APPEND_APPENDTEXT","LANG_TEXT_APPEND_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("VAR").appendField(RoboBlocks.locales.getKey("LANG_TEXT_APPEND_TO")),this.appendValueInput("TEXT").appendField(RoboBlocks.locales.getKey("LANG_TEXT_APPEND_APPENDTEXT")),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setInputsInline(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_APPEND_TOOLTIP"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setTitleValue(e,"VAR")},getVariables:function(){var o=Blockly.Variables.allUsedVariables,e=[];if(o.length>0)for(var t in o)e.push([o[t],o[t]]);else e.push(["",""]);return e},onchange:function(){}},Blockly.Arduino.text_equalsIgnoreCase=function(){var o=Blockly.Arduino.valueToCode(this,"STRING1",Blockly.Arduino.ORDER_NONE);o=o.replace(/&quot;/g,'"');var e=Blockly.Arduino.valueToCode(this,"STRING2",Blockly.Arduino.ORDER_NONE);e=e.replace(/&quot;/g,'"');var t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,t+=JST.text_equalsIgnoreCase({string1:o,string2:e}),[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text_equalsIgnoreCase={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_equalsIgnoreCase"),examples:["text_equalsIgnoreCase_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_EQUALSIGNORECASE_EQUAL","LANG_TEXT_EQUALSIGNORECASE_QUESTION","LANG_TEXT_EQUALSIGNORECASE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("STRING1"),this.appendValueInput("STRING2").appendField(RoboBlocks.locales.getKey("LANG_TEXT_EQUALSIGNORECASE_EQUAL")).setAlign(Blockly.ALIGN_RIGHT),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_TEXT_EQUALSIGNORECASE_QUESTION")),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_EQUALSIGNORECASE_TOOLTIP"))}},Blockly.Arduino.text_join=function(){var o,e="";if(0===this.itemCount_)return["''",Blockly.Arduino.ORDER_ATOMIC];if(1===this.itemCount_){var t=Blockly.Arduino.valueToCode(this,"ADD0",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"";return o=RoboBlocks.findPinMode(t),e+=o.code,t=o.pin,e+="String("+t+")",[e,Blockly.Arduino.ORDER_UNARY_POSTFIX]}var l=Blockly.Arduino.valueToCode(this,"ADD0",Blockly.Arduino.ORDER_NONE)||"";e=(o=RoboBlocks.findPinMode(l)).code;for(var _="String("+(l=o.pin),s=1;s<this.itemCount_;s++)l=Blockly.Arduino.valueToCode(this,"ADD"+s,Blockly.Arduino.ORDER_NONE)||"",e+=(o=RoboBlocks.findPinMode(l)).code,_+=") + String("+(l=o.pin);return e+=_+")",[e,Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Blocks.text_join={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),helpUrl:RoboBlocks.getHelpUrl("text_join"),examples:["text_join_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_JOIN_Field_CREATEWITH","LANG_TEXT_JOIN_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("ADD0").appendField(RoboBlocks.locales.getKey("LANG_TEXT_JOIN_Field_CREATEWITH")),this.appendValueInput("ADD1"),this.setOutput(!0,String),this.setMutator(new Blockly.Mutator(["text_create_join_item"])),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_JOIN_TOOLTIP")),this.itemCount_=2},mutationToDom:function(){var o=document.createElement("mutation");return o.setAttribute("items",this.itemCount_),o},domToMutation:function(o){for(var e=0;e<this.itemCount_;e++)this.removeInput("ADD"+e);for(this.itemCount_=window.parseInt(o.getAttribute("items"),10),e=0;e<this.itemCount_;e++){var t=this.appendValueInput("ADD"+e);0===e&&t.appendField(RoboBlocks.locales.getKey("LANG_TEXT_JOIN_Field_CREATEWITH"))}0===this.itemCount_&&this.appendDummyInput("EMPTY").appendField(new Blockly.FieldImage(Blockly.pathToBlockly+"media/quote0.png",12,12)).appendField(new Blockly.FieldImage(Blockly.pathToBlockly+"media/quote1.png",12,12))},decompose:function(o){var e=o.newBlock("text_create_join_container");e.initSvg();for(var t=e.getInput("STACK").connection,l=0;l<this.itemCount_;l++){var _=o.newBlock("text_create_join_item");_.initSvg(),t.connect(_.previousConnection),t=_.nextConnection}return e},compose:function(o){if(0===this.itemCount_)this.removeInput("EMPTY");else for(var e=this.itemCount_-1;e>=0;e--)this.removeInput("ADD"+e);this.itemCount_=0;for(var t=o.getInputTargetBlock("STACK");t;){var l=this.appendValueInput("ADD"+this.itemCount_);0===this.itemCount_&&l.appendField(RoboBlocks.locales.getKey("LANG_TEXT_JOIN_Field_CREATEWITH")),t.valueConnection_&&l.connection.connect(t.valueConnection_),this.itemCount_++,t=t.nextConnection&&t.nextConnection.targetBlock()}0===this.itemCount_&&this.appendDummyInput("EMPTY").appendField(new Blockly.FieldImage(Blockly.pathToBlockly+"media/quote0.png",12,12)).appendField(new Blockly.FieldImage(Blockly.pathToBlockly+"media/quote1.png",12,12))},saveConnections:function(o){for(var e=o.getInputTargetBlock("STACK"),t=0;e;){var l=this.getInput("ADD"+t);e.valueConnection_=l&&l.connection.targetConnection,t++,e=e.nextConnection&&e.nextConnection.targetBlock()}}},Blockly.Blocks.text_create_join_container={colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_CREATE_JOIN_TITLE_JOIN","LANG_TEXT_CREATE_JOIN_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_TEXT_CREATE_JOIN_TITLE_JOIN")),this.appendStatementInput("STACK").setCheck("text_join"),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_CREATE_JOIN_TOOLTIP")),this.contextMenu=!1}},Blockly.Blocks.text_create_join_item={colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM","LANG_TEXT_CREATE_JOIN_ITEM_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM")),this.setPreviousStatement(!0,"text_join"),this.setNextStatement(!0,"text_join"),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_CREATE_JOIN_ITEM_TOOLTIP")),this.contextMenu=!1}},Blockly.Arduino.text_length=function(){var o=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"",e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,e+=JST.text_length({argument0:o}),[e,Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Blocks.text_length={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_length"),examples:["text_length_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_LENGTH_INPUT_LENGTH","LANG_TEXT_LENGTH_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("VALUE").setCheck([String,Array]).appendField(RoboBlocks.locales.getKey("LANG_TEXT_LENGTH_INPUT_LENGTH")),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_LENGTH_TOOLTIP"))}},Blockly.Arduino.text_substring=function(){var o=Blockly.Arduino.valueToCode(this,"STRING1",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(this,"FROM",Blockly.Arduino.ORDER_NONE),t=Blockly.Arduino.valueToCode(this,"TO",Blockly.Arduino.ORDER_NONE),l="",_=RoboBlocks.findPinMode(o);return l+=_.code,o=_.pin,_=RoboBlocks.findPinMode(e),l+=_.code,e=_.pin,_=RoboBlocks.findPinMode(t),l+=_.code,t=_.pin,l+=JST.text_substring({string1:o,from:e,to:t}),[l,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text_substring={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_substring"),examples:["text_substring_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_SUBSTRING","LANG_TEXT_SUBSTRING_FROM","LANG_TEXT_SUBSTRING_TO","LANG_TEXT_SUBSTRING_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("STRING1").appendField(RoboBlocks.locales.getKey("LANG_TEXT_SUBSTRING")),this.appendValueInput("FROM").appendField(RoboBlocks.locales.getKey("LANG_TEXT_SUBSTRING_FROM")).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT),this.appendValueInput("TO").appendField(RoboBlocks.locales.getKey("LANG_TEXT_SUBSTRING_TO")).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_SUBSTRING_TOOLTIP"))}},Blockly.Arduino.text_search=function(){var o=Blockly.Arduino.valueToCode(this,"STRING1",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(this,"STRING2",Blockly.Arduino.ORDER_NONE),t=this.getFieldValue("POSITION"),l="",_=RoboBlocks.findPinMode(o);return l+=_.code,o=_.pin,_=RoboBlocks.findPinMode(e),l+=_.code,e=_.pin,l="FIRST"===t?e+".indexOf("+o+")":e+".lastIndexOf("+o+")",[l,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text_search={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_search"),examples:["text_search_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_SEARCH","LANG_TEXT_IN","LANG_TEXT_FIRST","LANG_TEXT_LAST","LANG_TEXT_SEARCH_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("STRING1").appendField(RoboBlocks.locales.getKey("LANG_TEXT_SEARCH")),this.appendValueInput("STRING2").appendField(RoboBlocks.locales.getKey("LANG_TEXT_IN")),this.appendDummyInput("").appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_TEXT_FIRST"),"FIRST"],[RoboBlocks.locales.getKey("LANG_TEXT_LAST"),"LAST"]]),"POSITION"),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_SEARCH_TOOLTIP"))}},Blockly.Arduino.text_contains=function(){var o=Blockly.Arduino.valueToCode(this,"STRING1",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(this,"STRING2",Blockly.Arduino.ORDER_NONE),t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,t="("+e+".indexOf("+o+")>0)",[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text_contains={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_contains"),examples:["text_contains_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_CONTAINS","LANG_TEXT_EXPRESSION","LANG_TEXT_CONTAINS_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("STRING2").appendField(RoboBlocks.locales.getKey("LANG_TEXT_CONTAINS")),this.appendValueInput("STRING1").appendField(RoboBlocks.locales.getKey("LANG_TEXT_EXPRESSION")),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_CONTAINS_TOOLTIP"))}},Blockly.Arduino.text_to_text=function(){var o=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_NONE),e=this.getFieldValue("CAST")||"",t="";return t+="char"==e?"("+e+")("+o+")":"String("+o+")",[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text_to_text={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_to_text"),examples:["text_to_text_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_CAST","LANG_VARIABLES_TYPE_STRING","LANG_VARIABLES_TYPE_CHAR"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_TEXT_CAST")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_STRING"),"String"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_CHAR"),"char"]]),"CAST"),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_SUBSTRING_TOOLTIP"))}},Blockly.Arduino.variables_get=function(){var o=this.getFieldValue("VAR")||"";return void 0!==RoboBlocks.variables[this.getFieldValue("VAR")]&&(this.var_type=RoboBlocks.variables[this.getFieldValue("VAR")][0]),[o,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.variables_get={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_get"),tags:["variables"],examples:["variables_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_VARIABLES,colour:RoboBlocks.LANG_COLOUR_VARIABLES,keys:["LANG_VARIABLES_GET","LANG_VARIABLES_GET_TOOLTIP","LANG_VARIABLES_CALL_WITHOUT_DEFINITION"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendDummyInput("DUMMY").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GET")).appendField(new Blockly.FieldDropdown(this.getVariables()),"VAR"),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_GET_TOOLTIP"))},getVariables:function(){var o=Blockly.Variables.allVariables(),e=[];if(o.length>0)for(var t in o)e.push([o[t],o[t]]);else e.push(["",""]);return e},onchange:function(){if(this.workspace){this.last_variable=this.getFieldValue("VAR"),this.last_variables||(this.last_variables=Blockly.Variables.allVariables());var o=Blockly.Variables.allVariables();for(var e in o)Blockly.Variables.allVariables()[e]!==this.last_variables[e]&&(this.getInput("DUMMY").removeField("VAR"),this.getInput("DUMMY").appendField(new Blockly.FieldDropdown(this.getVariables()),"VAR"),this.setFieldValue(this.last_variable,"VAR"),this.last_variables=Blockly.Variables.allVariables());try{this.exists()?this.setWarningText(null):this.setWarningText(RoboBlocks.locales.getKey("LANG_VARIABLES_CALL_WITHOUT_DEFINITION"))}catch(o){}}},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setTitleValue(e,"VAR")},exists:function(){for(var o in Blockly.Variables.allVariables())if(Blockly.Variables.allVariables()[o]===this.getFieldValue("VAR"))return!0;return!1}},Blockly.Arduino.variables_set=function(){var o=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"",e=this.getFieldValue("VAR")||"",t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,t+=JST.variables_set({varName:e,varValue:o})},Blockly.Blocks.variables_set={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_set"),tags:["variables"],examples:["variables_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_VARIABLES,colour:RoboBlocks.LANG_COLOUR_VARIABLES,keys:["LANG_VARIABLES_SET","LANG_VARIABLES_SET_AS","LANG_VARIABLES_SET_TOOLTIP","LANG_VARIABLES_CALL_WITHOUT_DEFINITION"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_SET")).appendField(new Blockly.FieldDropdown(this.getVariables()),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_SET_AS")).setAlign(Blockly.ALIGN_RIGHT),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_SET_TOOLTIP"))},getVariables:function(){var o=Blockly.Variables.allVariables(),e=[];if(o.length>0)for(var t in o)e.push([o[t],o[t]]);else e.push(["",""]);return e},onchange:function(){if(this.workspace){this.last_field_value=this.getFieldValue("VAR"),this.last_variables||(this.last_variables=Blockly.Variables.allVariables());var o=Blockly.Variables.allVariables();for(var e in o)Blockly.Variables.allVariables()[e]!==this.last_variables[e]&&(this.getInput("VALUE").removeField("VAR"),this.new_field=new Blockly.FieldDropdown(this.getVariables()),this.new_field.setValue(this.last_field_value),this.getInput("VALUE").insertFieldAt(1,this.new_field,"VAR"),this.last_variables=Blockly.Variables.allVariables());try{this.exists()?this.setWarningText(null):this.setWarningText(RoboBlocks.locales.getKey("LANG_VARIABLES_CALL_WITHOUT_DEFINITION"))}catch(o){}}},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setTitleValue(e,"VAR")},exists:function(){for(var o in Blockly.Variables.allVariables())if(Blockly.Variables.allVariables()[o]===this.getFieldValue("VAR"))return!0;return!1}},Blockly.Arduino.variables_local=function(){var o,e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),t=this.getFieldValue("VAR")||"",l="",_=!1,s=RoboBlocks.findPinMode(e);l+=s.code,e=s.pin;for(var n in Blockly.Arduino.definitions_)if(Blockly.Arduino.definitions_[n].search(e+" \\(")>=0){_=!0;break}if(e.search('"')>=0||e.search("substring\\(")>=0)l+=(o="String")+" "+t+"="+e+";\n";else if(_)for(n in Blockly.Arduino.definitions_)Blockly.Arduino.definitions_[n].search(e)>=0&&(l+=(o="int"===Blockly.Arduino.definitions_[n].substring(0,3)||"//b"===Blockly.Arduino.definitions_[n].substring(0,3)?"int *"===Blockly.Arduino.definitions_[n].substring(0,5)||"int _"===Blockly.Arduino.definitions_[n].substring(0,5)?"int *":"int":"Str"===Blockly.Arduino.definitions_[n].substring(0,3)?"String":"")+" "+t+"="+e+";\n");else"{"===e[0]?(l+=(o="int *")+t+"=(int*)malloc(3*sizeof(int));\n",l+=t+"[0]="+(e=(e=(e=e.replace("{","")).replace("}","")).split(","))[0]+";\n"+t+"[1]="+e[1]+";\n"+t+"[2]="+e[2]+";\n"):this.isVariable(e)?l+=(o=RoboBlocks.variables[e][0])+" "+t+"="+e+";\n":e.search("readJoystick")>=0?(l+=(o="int *")+t+"=(int*)malloc(3*sizeof(int));\n",l+=t+"="+e+";\n"):e.search("analogRead")>=0||e.search("digitalRead")>=0||e.search("Distanc")>=0||!isNaN(parseFloat(e))||e.search("random")>=0||e.search("map")>=0||e.search("\\[")>=0||e.search("abs")>=0||e.search("sqrt")>=0||e.search("log")>=0||e.search("exp")>=0||e.search("pow")>=0||e.search("\\+")?l+=(o="int")+" "+t+"="+e+";\n":l+=(o="unknown")+" "+t+"="+e+";\n";return RoboBlocks.variables[t]=[o,"local"],RoboBlocks.variables["analogRead("+t+")"]=[o,"local"],RoboBlocks.variables["digitalRead("+t+")"]=[o,"local"],l},Blockly.Blocks.variables_local={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_local"),tags:["variables"],examples:["variables_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_VARIABLES,colour:RoboBlocks.LANG_COLOUR_VARIABLES,keys:["LANG_VARIABLES_LOCAL","LANG_VARIABLES_LOCAL_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL")).appendField(new Blockly.FieldTextInput(""),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL_EQUALS")),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL_TOOLTIP"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setFieldValue(e,"VAR")},isVariable:function(o){for(var e in Blockly.Variables.allVariables())if(Blockly.Variables.allVariables()[e]===o)return!0;return!1},validName:function(o){if(o&&o.length>0){for(var e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length);for(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/([ ])/g,"_")).replace(/([áàâä])/g,"a")).replace(/([éèêë])/g,"e")).replace(/([íìîï])/g,"i")).replace(/([óòôö])/g,"o")).replace(/([úùûü])/g,"u")).replace(/([ñ])/g,"n")).replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|<>\-\&\Ç\%\=\~\{\}\¿\¡\"\@\:\;\-\"\·\|\º\ª\¨\'\·\̣\─\ç\`\´\¨\^])/g,""),e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length);for(var t in Blockly.Arduino.RESERVED_WORDS_){if(o===Blockly.Arduino.RESERVED_WORDS_.split(",")[t]){this.setWarningText("Reserved word"),o="";break}this.setWarningText(null)}}return o},onchange:function(){if(this.last_variable!==this.getFieldValue("VAR")){var o=this.getFieldValue("VAR");o=this.validName(o);try{this.setFieldValue(o,"VAR")}catch(o){}this.last_variable=o}}},Blockly.Arduino.variables_local_type=function(){var o=this.getFieldValue("VAR_TYPE"),e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),t=this.getFieldValue("VAR")||"",l="",_=RoboBlocks.findPinMode(e);return l+=_.code,e=_.pin,l+=o+" "+t+"="+e+";\n",RoboBlocks.variables[t]=[o,"local"],RoboBlocks.variables["analogRead("+t+")"]=[o,"local"],RoboBlocks.variables["digitalRead("+t+")"]=[o,"local"],l},Blockly.Blocks.variables_local_type={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_local_type"),tags:["variables"],examples:["variables_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_VARIABLES,colour:RoboBlocks.LANG_COLOUR_VARIABLES,keys:["LANG_VARIABLES_LOCAL","LANG_VARIABLES_LOCAL_TYPE","LANG_VARIABLES_TYPE_STRING","LANG_VARIABLES_TYPE_INTEGER","LANG_VARIABLES_TYPE_INTEGER_LONG","LANG_VARIABLES_TYPE_BYTE","LANG_VARIABLES_TYPE_BOOL","LANG_VARIABLES_TYPE_FLOAT","LANG_VARIABLES_GLOBAL_EQUALS","LANG_VARIABLES_LOCAL_TOOLTIP2"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL")).appendField(new Blockly.FieldTextInput(""),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL_TYPE")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_STRING"),"String"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER"),"int"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER_LONG"),"long"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BYTE"),"byte"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BOOL"),"bool"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_FLOAT"),"float"]]),"VAR_TYPE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_EQUALS")),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL_TOOLTIP2"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setFieldValue(e,"VAR")},isVariable:Blockly.Blocks.variables_local.isVariable,validName:Blockly.Blocks.variables_local.validName,onchange:Blockly.Blocks.variables_local.onchange},Blockly.Arduino.variables_global=function(){var o,e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),t=this.getFieldValue("VAR")||"",l=!1,_=RoboBlocks.findPinMode(e);Blockly.Arduino.setups_["pinMode"+e]=_.code,e=_.pin;for(var s in Blockly.Arduino.definitions_)if(Blockly.Arduino.definitions_[s].search(e+" \\(")>=0){l=!0;break}if(e.search('"')>=0||e.search("substring\\(")>=0)o="String",Blockly.Arduino.definitions_["declare_var"+t]=o+" "+t+"="+e+";";else if(l){for(s in Blockly.Arduino.definitions_)if(Blockly.Arduino.definitions_[s].search(e)>=0){o="int"===Blockly.Arduino.definitions_[s].substring(0,3)||"//b"===Blockly.Arduino.definitions_[s].substring(0,3)?"int *"===Blockly.Arduino.definitions_[s].substring(0,5)||"int _"===Blockly.Arduino.definitions_[s].substring(0,5)?"int *":"int":"Str"===Blockly.Arduino.definitions_[s].substring(0,3)?"String":"",Blockly.Arduino.definitions_["declare_var"+t]=o+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+e+";\n";break}}else"{"===e[0]?(o="int *",e=(e=(e=e.replace("{","")).replace("}","")).split(","),Blockly.Arduino.definitions_["declare_var"+t]=o+t+"=(int*)malloc(3*sizeof(int));\n",Blockly.Arduino.setups_["define_var"+t]=t+"[0]="+e[0]+";\n  "+t+"[1]="+e[1]+";\n  "+t+"[2]="+e[2]+";\n"):this.isVariable(e)?(o=RoboBlocks.variables[e][0],Blockly.Arduino.definitions_["declare_var"+t]=o+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+e+";\n"):e.search("readJoystick")>=0?(o="int *",Blockly.Arduino.definitions_["declare_var"+t]=o+t+"=(int*)malloc(3*sizeof(int));\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+e+";\n"):e.search("analogRead")>=0||e.search("digitalRead")>=0||e.search("Distanc")>=0||!isNaN(parseFloat(e))||e.search("random")>=0||e.search("map")>=0||e.search("\\[")>=0||e.search("abs")>=0||e.search("sqrt")>=0||e.search("log")>=0||e.search("log")>=0||e.search("exp")>=0||e.search("pow")>=0||e.search("\\+")?(o="int",isNaN(parseFloat(e))?(e.search("analogRead")>=0||e.search("digitalRead")>=0||e.search("Distanc")>=0||e.search("random")>=0||e.search("map")>=0||e.search("\\[")>=0||e.search("abs")>=0||e.search("sqrt")>=0||e.search("log")>=0||e.search("log")>=0||e.search("exp")>=0||e.search("pow")>=0||e.search("\\+"))&&(Blockly.Arduino.definitions_["declare_var"+t]=o+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+e+";\n"):Blockly.Arduino.definitions_["declare_var"+t]=o+" "+t+"="+e+";\n"):(o="unknown",Blockly.Arduino.definitions_["declare_var"+t]=o+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+e+";\n");return RoboBlocks.variables[t]=[o,"global"],RoboBlocks.variables["analogRead("+t+")"]=[o,"global"],RoboBlocks.variables["digitalRead("+t+")"]=[o,"global"],""},Blockly.Blocks.variables_global={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_global"),tags:["variables"],examples:["variables_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_VARIABLES,colour:RoboBlocks.LANG_COLOUR_VARIABLES,keys:["LANG_VARIABLES_GLOBAL","LANG_VARIABLES_GLOBAL_EQUALS","LANG_VARIABLES_GLOBAL_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL")).appendField(new Blockly.FieldTextInput(""),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_EQUALS")),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_TOOLTIP"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setFieldValue(e,"VAR")},isVariable:Blockly.Blocks.variables_local.isVariable,validName:Blockly.Blocks.variables_local.validName,onchange:Blockly.Blocks.variables_local.onchange},Blockly.Arduino.variables_global_type=function(){var o=this.getFieldValue("VAR_TYPE"),e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),t=this.getFieldValue("VAR")||"",t=this.getFieldValue("VAR")||"",l="",_=RoboBlocks.findPinMode(e);return l+=_.code,e=_.pin,Blockly.Arduino.definitions_["declare_var"+t]=o+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+e+";\n",RoboBlocks.variables[t]=[o,"global"],RoboBlocks.variables["analogRead("+t+")"]=[o,"global"],RoboBlocks.variables["digitalRead("+t+")"]=[o,"global"],""},Blockly.Blocks.variables_global_type={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_global_type"),tags:["variables"],examples:["variables_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_VARIABLES,colour:RoboBlocks.LANG_COLOUR_VARIABLES,keys:["LANG_VARIABLES_GLOBAL","LANG_VARIABLES_GLOBAL_TYPE","LANG_VARIABLES_TYPE_STRING","LANG_VARIABLES_TYPE_INTEGER","LANG_VARIABLES_TYPE_INTEGER_LONG","LANG_VARIABLES_TYPE_BYTE","LANG_VARIABLES_TYPE_BOOL","LANG_VARIABLES_TYPE_FLOAT","LANG_VARIABLES_GLOBAL_EQUALS","LANG_VARIABLES_GLOBAL_TOOLTIP2"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL")).appendField(new Blockly.FieldTextInput(""),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_TYPE")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_STRING"),"String"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER"),"int"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER_LONG"),"long"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BYTE"),"byte"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BOOL"),"bool"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_FLOAT"),"float"]]),"VAR_TYPE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_EQUALS")),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_TOOLTIP2"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setFieldValue(e,"VAR")},isVariable:Blockly.Blocks.variables_local.isVariable,onchange:Blockly.Blocks.variables_local.onchange,validName:Blockly.Blocks.variables_local.validName},Blockly.Arduino.variables_global_volatile_type=function(){var o=this.getFieldValue("VAR_TYPE"),e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),t=this.getFieldValue("VAR")||"",t=this.getFieldValue("VAR")||"",l="",_=RoboBlocks.findPinMode(e);return l+=_.code,e=_.pin,Blockly.Arduino.definitions_["declare_var"+t]="volatile "+o+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+e+";\n",RoboBlocks.variables[t]=["volatile "+o,"global"],RoboBlocks.variables["analogRead("+t+")"]=[o,"global"],RoboBlocks.variables["digitalRead("+t+")"]=[o,"global"],""},Blockly.Blocks.variables_global_volatile_type={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_global_volatile_type"),tags:["variables"],examples:["variables_global_volatile_type_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_VARIABLES,colour:RoboBlocks.LANG_COLOUR_VARIABLES,keys:["LANG_VARIABLES_GLOBAL_VOLATILE","LANG_VARIABLES_GLOBAL_TYPE","LANG_VARIABLES_TYPE_INTEGER","LANG_VARIABLES_TYPE_INTEGER_LONG","LANG_VARIABLES_TYPE_BYTE","LANG_VARIABLES_TYPE_BOOL","LANG_VARIABLES_TYPE_FLOAT","LANG_VARIABLES_GLOBAL_EQUALS","LANG_VARIABLES_GLOBAL_VOLATILE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_VOLATILE")).appendField(new Blockly.FieldTextInput(""),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_TYPE")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER"),"int"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER_LONG"),"long"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BYTE"),"byte"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BOOL"),"bool"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_FLOAT"),"float"]]),"VAR_TYPE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_EQUALS")),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_VOLATILE_TOOLTIP"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setFieldValue(e,"VAR")},isVariable:Blockly.Blocks.variables_local.isVariable,onchange:Blockly.Blocks.variables_local.onchange,validName:Blockly.Blocks.variables_local.validName},Blockly.Arduino.controls_execute=function(){var o=Blockly.Arduino.valueToCode(this,"CONTENT",Blockly.Arduino.ORDER_ATOMIC),e="";if(o=o.replace(/^"/,""),(o=o.replace(/"$/g,"")).match(/^#include /)){var t=JST.controls_execute({content:o});"define_include"in Blockly.Arduino.definitions_?Blockly.Arduino.definitions_.define_include+=t:Blockly.Arduino.definitions_.define_include=t}else e+=JST.controls_execute({content:o});return e},Blockly.Blocks.controls_execute={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_execute"),examples:["controls_execute_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_EXECUTE","LANG_CONTROLS_EXECUTE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("CONTENT",String).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_EXECUTE")),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_EXECUTE_TOOLTIP"))}},Blockly.Arduino.inout_spi_begin=function(){var o=Blockly.Arduino.valueToCode(this,"BAUDRATE",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.definitions_.include_spi="#include <SPI.h>\n","SPI.beginTransaction(SPISettings("+o+","+this.getFieldValue("ORDER")+","+this.getFieldValue("MODE")+"));\n"},Blockly.Blocks.inout_spi_begin={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","spi"],helpUrl:RoboBlocks.getHelpUrl("inout_spi_begin"),examples:["inout_spi_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_SPI_BEGIN","LANG_SPI_BAUDRATE","LANG_SPI_BEGIN_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendValueInput("BAUDRATE").appendField(RoboBlocks.locales.getKey("LANG_SPI_BEGIN")).appendField(RoboBlocks.locales.getKey("LANG_SPI_BAUDRATE")).setAlign(Blockly.ALIGN_RIGHT),this.appendDummyInput("").appendField(new Blockly.FieldDropdown([["MSB","MSBFIRST"],["LSB","LSBFIRST"]]),"ORDER").setAlign(Blockly.ALIGN_RIGHT),this.appendDummyInput("").appendField(new Blockly.FieldDropdown([["MODE0","SPI_MODE0"],["MODE1","SPI_MODE1"],["MODE2","SPI_MODE2"],["MODE3","SPI_MODE3"]]),"MODE").setAlign(Blockly.ALIGN_RIGHT),this.setOutput(!1,null),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_SPI_BEGIN_TOOLTIP"))}},Blockly.Arduino.inout_spi_transfer=function(){var o=Blockly.Arduino.valueToCode(this,"DATA",Blockly.Arduino.ORDER_ATOMIC),e=this.getFieldValue("MODE");Blockly.Arduino.definitions_.include_spi="#include <SPI.h>\n";var t="";return"1"===e?t+="SPI.transfer("+o+");\n":"2"===e&&(t+="SPI.transfer16("+o+");\n"),t},Blockly.Blocks.inout_spi_transfer={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","spi"],helpUrl:RoboBlocks.getHelpUrl("inout_spi_transfer"),examples:["inout_spi_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_SPI_TRANSFER","LANG_SPI_TRANSFER_ONE_BYTE","LANG_SPI_TRANSFER_TWO_BYTES","LANG_SPI_TRANSFER_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendValueInput("DATA").appendField(RoboBlocks.locales.getKey("LANG_SPI_TRANSFER")).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT),this.appendDummyInput("").appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_SPI_TRANSFER_ONE_BYTE"),"1"],[RoboBlocks.locales.getKey("LANG_SPI_TRANSFER_TWO_BYTES"),"2"]]),"MODE").setAlign(Blockly.ALIGN_RIGHT),this.setOutput(!1,null),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setInputsInline(!1),this.setTooltip(RoboBlocks.locales.getKey("LANG_SPI_TRANSFER_TOOLTIP"))}},Blockly.Arduino.inout_spi_transfer_recv=function(){var o=Blockly.Arduino.valueToCode(this,"DATA",Blockly.Arduino.ORDER_ATOMIC),e=this.getFieldValue("MODE");Blockly.Arduino.definitions_.include_spi="#include <SPI.h>\n";var t="";return"1"===e?t+="SPI.transfer("+o+")":"2"===e&&(t+="SPI.transfer16("+o+")"),[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.inout_spi_transfer_recv={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","spi"],helpUrl:RoboBlocks.getHelpUrl("inout_spi_transfer_recv"),examples:["inout_spi_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_SPI_TRANSFER","LANG_SPI_TRANSFER_ONE_BYTE","LANG_SPI_TRANSFER_TWO_BYTES","LANG_SPI_TRANSFER_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendValueInput("DATA").appendField(RoboBlocks.locales.getKey("LANG_SPI_TRANSFER")).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT),this.appendDummyInput("").appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_SPI_TRANSFER_ONE_BYTE"),"1"],[RoboBlocks.locales.getKey("LANG_SPI_TRANSFER_TWO_BYTES"),"2"]]),"MODE").setAlign(Blockly.ALIGN_RIGHT),this.setOutput(!0,Number),this.setPreviousStatement(!1,"code"),this.setNextStatement(!1,"code"),this.setInputsInline(!1),this.setTooltip(RoboBlocks.locales.getKey("LANG_SPI_TRANSFER_TOOLTIP"))}},Blockly.Arduino.inout_spi_end=function(){Blockly.Arduino.definitions_.include_spi="#include <SPI.h>\n";return"SPI.endTransaction();\n"},Blockly.Blocks.inout_spi_end={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","spi"],helpUrl:RoboBlocks.getHelpUrl("inout_spi_end"),examples:["inout_spi_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_SPI_END","LANG_SPI_END_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_SPI_END")),this.setOutput(!1,null),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_SPI_END_TOOLTIP"))}},Blockly.Arduino.button=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,RoboBlocks.isVariable(o)?e+=JST.zum_button_setups({dropdown_pin:o,pullup:"INPUT"}):Blockly.Arduino.setups_["setup_button_"+o]=JST.zum_button_setups({dropdown_pin:o,pullup:"INPUT"}),e+=JST.bq_button({dropdown_pin:o}),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.button={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","button"],helpUrl:RoboBlocks.getHelpUrl("button"),examples:["button_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_BQ_BUTTON","LANG_BQ_BUTTON_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_BQ_BUTTON")).appendField(new Blockly.FieldImage("img/blocks/pushbutton.png",52*options.zoom,24*options.zoom)).setCheck(Number).appendField(RoboBlocks.locales.getKey("LANG_BQ_BUTTON_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT),this.setOutput(!0,Boolean),this.setTooltip(RoboBlocks.locales.getKey("LANG_BQ_BUTTON_TOOLTIP"))}},Blockly.Arduino.button_case=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);e+=t.code,o=t.pin,RoboBlocks.isVariable(o)?e+=JST.zum_button_setups({dropdown_pin:o,pullup:"INPUT"}):Blockly.Arduino.setups_["setup_button_"+o]=JST.zum_button_setups({dropdown_pin:o,pullup:"INPUT"});var l="",_="";return l+=Blockly.Arduino.statementToCode(this,"PRESSED"),_+=Blockly.Arduino.statementToCode(this,"NOT_PRESSED"),l=l.replace(/&quot;/g,'"'),_=_.replace(/&quot;/g,'"'),e+="if ("+JST.bq_button({dropdown_pin:o})+"==LOW){\n"+l+"\n}\nelse{\n"+_+"\n}\n"},Blockly.Blocks.button_case={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","button"],helpUrl:RoboBlocks.getHelpUrl("button_case"),examples:["button_case_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_BQ_BUTTON","LANG_BQ_BUTTON_PIN","LANG_BUTTON_PRESSED","LANG_BUTTON_NOT_PRESSED","LANG_BQ_BUTTON_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_BQ_BUTTON")).appendField(new Blockly.FieldImage("img/blocks/pushbutton.png",52*options.zoom,24*options.zoom)).setCheck(Number).appendField(RoboBlocks.locales.getKey("LANG_BQ_BUTTON_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT),this.setOutput(!1,null),this.appendStatementInput("PRESSED").setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_BUTTON_PRESSED")),this.appendStatementInput("NOT_PRESSED").setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_BUTTON_NOT_PRESSED")),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_BQ_BUTTON_TOOLTIP"))}},Blockly.Arduino.zum_button=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,pullup="INPUT_PULLUP",RoboBlocks.isVariable(o)?e+=JST.zum_button_setups({dropdown_pin:o,pullup:pullup}):Blockly.Arduino.setups_["setup_button_"+o]=JST.zum_button_setups({dropdown_pin:o,pullup:pullup}),e+=JST.zum_button({dropdown_pin:o}),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.zum_button={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","button"],helpUrl:RoboBlocks.getHelpUrl("zum_button"),examples:["zum_button_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_ZUM_BUTTON","LANG_ZUM_BUTTON_PIN","LANG_ZUM_BUTTON_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ZUM_BUTTON")).appendField(RoboBlocks.locales.getKey("LANG_ZUM_BUTTON_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)),this.appendDummyInput().appendField("pull-up?").appendField(new Blockly.FieldCheckbox("FALSE"),"PULLUP").setAlign(Blockly.ALIGN_RIGHT),this.setOutput(!0,Boolean),this.setTooltip(RoboBlocks.locales.getKey("LANG_ZUM_BUTTON_TOOLTIP")),this.setInputsInline(!1)}},Blockly.Arduino.joystick_dir=function(){var o=Blockly.Arduino.valueToCode(this,"PINX",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(this,"PINY",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,t="57.295779513082320876798154814105*atan2((float)(analogRead("+o+")-512),(float)(analogRead("+e+")-512))",[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.joystick_dir={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["joystick"],helpUrl:RoboBlocks.getHelpUrl("joystick_dir"),examples:["joystick_dir_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_BQ_JOYSTICK_DIR","LANG_BQ_JOYSTICK_PIN_X","LANG_BQ_JOYSTICK_PIN_Y","LANG_BQ_JOYSTICK_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_DIR")).appendField(new Blockly.FieldImage("img/blocks/joystick.png",52*options.zoom,24*options.zoom)),this.appendValueInput("PINX").appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_PIN_X")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT).setCheck(Number),this.appendValueInput("PINY").appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_PIN_Y")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT).setCheck(Number),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_TOOLTIP"))}},Blockly.Arduino.joystick_mag=function(){var o=Blockly.Arduino.valueToCode(this,"PINX",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(this,"PINY",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,t="min(100,0.1953125*sqrt(pow((float)(analogRead("+o+")-512),2)+pow((float)(analogRead("+e+")-512),2)))",[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.joystick_mag={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["joystick"],helpUrl:RoboBlocks.getHelpUrl("joystick_mag"),examples:["joystick_dir_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_BQ_JOYSTICK_MAG","LANG_BQ_JOYSTICK_PIN_X","LANG_BQ_JOYSTICK_PIN_Y","LANG_BQ_JOYSTICK_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_MAG")).appendField(new Blockly.FieldImage("img/blocks/joystick.png",52*options.zoom,24*options.zoom)),this.appendValueInput("PINX").appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_PIN_X")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT).setCheck(Number),this.appendValueInput("PINY").appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_PIN_Y")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT).setCheck(Number),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_TOOLTIP"))}},Blockly.Arduino.zum_piezo_buzzerav=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)||"",e=Blockly.Arduino.valueToCode(this,"TONE",Blockly.Arduino.ORDER_ATOMIC),t=Blockly.Arduino.valueToCode(this,"DURA",Blockly.Arduino.ORDER_ATOMIC),l="",_=RoboBlocks.findPinMode(o);return l+=_.code,o=_.pin,_=RoboBlocks.findPinMode(e),l+=_.code,e=_.pin,_=RoboBlocks.findPinMode(t),l+=_.code,t=_.pin,l+=JST.zum_piezo_buzzerav({dropdown_pin:o,Buzztone:e,delay_time:t})},Blockly.Blocks.zum_piezo_buzzerav={category:RoboBlocks.locales.getKey("LANG_CATEGORY_SOUND"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_BUZZER"),tags:["buzzer"],helpUrl:RoboBlocks.getHelpUrl("zum_piezo_buzzerav"),examples:["zum_piezo_buzzerav_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_SOUND,colour:RoboBlocks.LANG_COLOUR_SOUND_BUZZER,keys:["LANG_ZUM_PIEZO_BUZZERAV","LANG_ZUM_PIEZO_BUZZERAV_PIN","LANG_ZUM_PIEZO_BUZZERAV_TONE","LANG_ZUM_PIEZO_BUZZERAV_DURATION","LANG_ZUM_PIEZO_BUZZERAV_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_SOUND_BUZZER),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ZUM_PIEZO_BUZZERAV")).appendField(new Blockly.FieldImage("img/blocks/buzzer.svg",52*options.zoom,35*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_ZUM_PIEZO_BUZZERAV_PIN")),this.appendValueInput("TONE",Number).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_ZUM_PIEZO_BUZZERAV_TONE")),this.appendValueInput("DURA",Number).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_ZUM_PIEZO_BUZZERAV_DURATION")),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ZUM_PIEZO_BUZZERAV_TOOLTIP"))}},Blockly.Arduino.dyor_31_in_1_rele=function(){var o="",e=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),t=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ATOMIC),l=RoboBlocks.findPinMode(e);return o+=l.code,e=l.pin,RoboBlocks.isVariable(e)?o+=JST.inout_digital_write_setups({dropdown_pin:e}):Blockly.Arduino.setups_["setup_green_digital_write_"+e]=JST.inout_digital_write_setups({dropdown_pin:e}),o+=JST.inout_digital_write({dropdown_pin:e,dropdown_stat:t}),[o,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.dyor_31_in_1_rele={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","rele"],helpUrl:RoboBlocks.getHelpUrl("dyor_31_in_1_rele"),examples:["dyor_31_in_1_relay_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_RELE","LANG_RELE_VALUE","LANG_RELE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_RELE")).appendField(new Blockly.FieldImage("img/blocks/relays.png",52*options.zoom,24*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_RELE_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)).setCheck(Number),this.appendValueInput("VALUE",Boolean).setCheck(Boolean).setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_RELE_VALUE")),this.setPreviousStatement("code"),this.setNextStatement("code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_RELE_TOOLTIP"))}},Blockly.Blocks},RoboBlocks={load:function(options){RoboBlocks.locales={defaultLanguage:{},processor:""},RoboBlocks.locales.setLang=function(o){this.defaultLanguage=o},RoboBlocks.locales.getKey=function(o){return this.defaultLanguage[o]},RoboBlocks.locales.setKey=function(o,e){this.defaultLanguage[o]=e},RoboBlocks.getHelpUrl=function(o){return'<script>$(function(){var file = "doc/"+roboblocksLanguage+"/'+o+'.html"; $.ajax({url:file,async:false,type:"HEAD",error: function(){file="doc/en-GB/'+o+'.html";},success: function(){}}); $("#doc").load(file);});<\/script>'},RoboBlocks.locales.initialize=function(){return this.defaultLanguage=options.langKeys||window.langKeys||{},this.processor=options.proc||window.FacilinoProcessor||"ArduinoNano",this},RoboBlocks.locales.initialize(),RoboBlocks.variables={},RoboBlocks.isVariable=function(o){for(var e in Blockly.Variables.allUsedVariables)if(Blockly.Variables.allUsedVariables[e]===o)return!0;return void 0!==RoboBlocks.variables[o]||(o.search("digitalRead\\(")>=0||o.search("analogRead\\(")>=0)},RoboBlocks.findPinMode=function(o){var e="";o=o.split(";\n");for(var t in o)o[t].search("pinMode")>=0?e+=o[t]+";\n":o=o[t];return{code:e,pin:o}},RoboBlocks.LANG_COLOUR_DISTANCE="#D04141",RoboBlocks.LANG_COLOUR_DISTANCE_ULTRASOUND="#D04141",RoboBlocks.LANG_COLOUR_SOUND="#CC7B44",RoboBlocks.LANG_COLOUR_SOUND_BUZZER="#CC7B44",RoboBlocks.LANG_COLOUR_SOUND_VOICE="#B46B3A",RoboBlocks.LANG_COLOUR_SOUND_MIC="#9D5C30",RoboBlocks.LANG_COLOUR_SOUND_MUSIC="#854C26",RoboBlocks.LANG_COLOUR_MOVEMENT="#CECE42",RoboBlocks.LANG_COLOUR_MOVEMENT_MOTORS="#CECE42",RoboBlocks.LANG_COLOUR_MOVEMENT_ROBOTBASE="#B8B838",RoboBlocks.LANG_COLOUR_MOVEMENT_ROBOTACC="#A3A32F",RoboBlocks.LANG_COLOUR_MOVEMENT_WALK="#8D8D25",RoboBlocks.LANG_COLOUR_SCREEN="#ACCE42",RoboBlocks.LANG_COLOUR_SCREEN_LCD="#ACCE42",RoboBlocks.LANG_COLOUR_SCREEN_LEDMATRIX="#9DBD3A",RoboBlocks.LANG_COLOUR_CONTROL="#44CC44",RoboBlocks.LANG_COLOUR_CONTROL_INTERRUPTS="#3EB83E",RoboBlocks.LANG_COLOUR_CONTROL_STATEMACHINE="#39A539",RoboBlocks.LANG_COLOUR_LOGIC="#42CE91",RoboBlocks.LANG_COLOUR_MATH="#42CBCE",RoboBlocks.LANG_COLOUR_TEXT="#42A3CE",RoboBlocks.LANG_COLOUR_COMMUNICATION="#4263CE",RoboBlocks.LANG_COLOUR_COMMUNICATION_USB="#4263CE",RoboBlocks.LANG_COLOUR_COMMUNICATION_BLUETOOTH="#3B5ABD",RoboBlocks.LANG_COLOUR_COMMUNICATION_WIFI="#3551AC",RoboBlocks.LANG_COLOUR_COMMUNICATION_IOT="#2E489B",RoboBlocks.LANG_COLOUR_ADVANCED="#9142CE",RoboBlocks.LANG_COLOUR_ADVANCED_ANALOG="#9142CE",RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL="#853BBE",RoboBlocks.LANG_COLOUR_ADVANCED_OTHER="#7A34AF",RoboBlocks.LANG_COLOUR_VARIABLES="#B244CC",RoboBlocks.LANG_COLOUR_PROCEDURES="#CE42B3",RoboBlocks.LANG_COLOUR_LIGHT="#FF8A00",RoboBlocks.LANG_COLOUR_LIGHT_INFRARED="#FF8A00",RoboBlocks.LANG_COLOUR_LIGHT_COLOR="#E87E00",RoboBlocks.LANG_COLOUR_AMBIENT="#99CCFF",RoboBlocks.LANG_COLOUR_AMBIENT_TEMPERATURE="#99CCFF",RoboBlocks.LANG_COLOUR_AMBIENT_HUMIDITY="#78BBFE",RoboBlocks.LANG_COLOUR_AMBIENT_RAIN="#58ABFD",RoboBlocks.LANG_COLOUR_AMBIENT_OTHER="#389AFC",RoboBlocks.LANG_COLOUR_HTML="#BDBDBD",RoboBlocks.LANG_COLOUR_BLOCKS="#FF00FF";var profiles;$.ajax({url:"profiles.json",dataType:"text",async:!1}).done(function(o){profiles=$.parseJSON(o),"ArduinoNano"===RoboBlocks.locales.processor?profiles.default=profiles.arduinoNano:"ArduinoUno"===RoboBlocks.locales.processor?profiles.default=profiles.arduinoUno:"NodeMCU"===RoboBlocks.locales.processor?profiles.default=profiles.nodeMCU:"ESP32"===RoboBlocks.locales.processor?profiles.default=profiles.esp32_R32:profiles.default=profiles.arduinoNano}),Blockly.getBlocks=function(){var o={};for(var e in this.Blocks)if(this.Blocks.hasOwnProperty(e)&&this.Blocks[e]instanceof Object){var t=this.Blocks[e].category,l=this.Blocks[e].subcategory;this.Blocks[e].category_colour;void 0===l&&(l="root"),o[t]=o[t]||{},o[t][l]=o[t][l]||[],o[t][l].push(e)}return o},Blockly.createToolbox=function(){var o={},e={};for(var t in this.Blocks)if(this.Blocks.hasOwnProperty(t)&&this.Blocks[t]instanceof Object&&this.Blocks[t].category){var l=this.Blocks[t].category,_=this.Blocks[t].subcategory,s=this.Blocks[t].category_colour;void 0===_&&(_="root"),o[l]=o[l]||{},e[l]=e[l]||s,o[l][_]=o[l][_]||[],o[l][_].push(t)}var n='<xml id="toolbox" style="display: none">',i=function(o){n+='<block type="'+o+'"></block>'};for(l in o)if(o.hasOwnProperty(l)){n+='<category id="'+l+'" name="'+l+'" colour="'+e[l]+'">';for(_ in o[l])"root"===_&&o[l].root.forEach(i),"root"!==_&&(n+='<category id="'+_+'" name="'+_+'" colour="'+this.Blocks[o[l][_][0]].colour+'">',o[l][_].forEach(i),n+="</category>");n+="</category>"}return n+="</xml>"},Blockly.createToolboxColours=function(){var o={};for(var e in this.Blocks)if(this.Blocks.hasOwnProperty(e)&&this.Blocks[e]instanceof Object&&this.Blocks[e].category){var t=this.Blocks[e].category;o[t]=o[t]||[],void 0!==this.Blocks[e].colour&&o[t].push(this.Blocks[e].colour)}return o[t]},Blockly.exportAllBlocks=function(){var o={},e=[],t=[],l=[];for(var _ in this.Blocks)if(this.Blocks.hasOwnProperty(_)&&this.Blocks[_]instanceof Object&&this.Blocks[_].category){var s=this.Blocks[_].category;if(o[s]=o[s]||[],o[s].push(_),void 0!==this.Blocks[_]&&void 0!==this.Blocks[_].examples)for(example in this.Blocks[_].examples)""!==this.Blocks[_].examples[example]&&(l[this.Blocks[_].examples[example]]||(l[this.Blocks[_].examples[example]]=!0,t.push(this.Blocks[_].examples[example])))}else this.Blocks.hasOwnProperty(_)&&this.Blocks[_]instanceof Object&&e.push(_);var n,i="",a="file:///C:/Users/leoaran/Dropbox/DYOR/DYOR/Facilino/src/facilino/roboblocks/html/phantom_script.bat";makeTextFile=function(o){var e=new Blob([o],{type:"text/plain"});return null!==a&&window.URL.revokeObjectURL(a),a=window.URL.createObjectURL(e)};var c=function(o){i='<block type="'+o+'" deletable="true"></block>',n=o,console.log(o),document.getElementById("startBlocks").innerHTML=i,Blockly.Xml.domToWorkspace(document.getElementById("startBlocks"),Blockly.getMainWorkspace());var e=document.getElementsByClassName("blocklyBlockCanvas")[0].getBBox(),t=e.width+20,l=e.height+20;r+="phantomjs rasterize.js file:///C:/Users/leoaran/Dropbox/DYOR/DYOR/Facilino/src/facilino/roboblocks/html/show_block.html?name="+n+" doc/"+roboblocksLanguage+"/img/"+n+".png "+t+" "+l+"\n",Blockly.getMainWorkspace().clear()},r="";for(_ in o)o.hasOwnProperty(_)&&o[_].forEach(c);for(_ in e){try{c(e[_])}catch(o){}document.getElementById("startBlocks").innerHTML="",Blockly.getMainWorkspace().clear()}for(example in t)!function(o){$.ajax({type:"GET",url:o,dataType:"xml",success:function(e){var t=(new XMLSerializer).serializeToString(e);t=(t=t.replace('<xml xmlns="http://www.w3.org/1999/xhtml">',"")).replace("</xml>",""),document.getElementById("startBlocks").innerHTML=t,Blockly.mainWorkspace.clear(),Blockly.Xml.domToWorkspace(document.getElementById("startBlocks"),Blockly.getMainWorkspace());var l=document.getElementsByClassName("blocklyBlockCanvas")[0].getBBox(),_=l.width+20,s=l.height+20,n=o;n=(n=n.replace("bly","png")).replace("doc/examples/",""),r+="phantomjs rasterize.js file:///C:/Users/leoaran/Dropbox/DYOR/DYOR/Facilino/src/facilino/roboblocks/html/show_example.html?name="+o+" doc/"+roboblocksLanguage+"/img/"+n+" "+_+" "+s+"\n"},async:!1})}("doc/examples/"+t[example]);return window.open(makeTextFile(r),"_blank"),i},this.JST=this.JST||{},this.JST.advanced_conversion=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=value_num)?"":__t)+","+(null==(__t=convertion)?"":__t);return __p},this.JST.advanced_map=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="map("+(null==(__t=num)?"":__t)+","+(null==(__t=from_min)?"":__t)+","+(null==(__t=from_max)?"":__t)+","+(null==(__t=to_min)?"":__t)+","+(null==(__t=to_max)?"":__t)+")";return __p},this.JST.base_delay=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="delay("+(null==(__t=delay_time)?"":__t)+");\n";return __p},this.JST.base_map=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="map("+(null==(__t=value_num)?"":__t)+",0,1023,0,"+(null==(__t=value_dmax)?"":__t)+")";return __p},this.JST.base_millis=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="millis()\n";return __p},this.JST.bq_bat=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Distance("+(null==(__t=trigger_pin)?"":__t)+","+(null==(__t=echo_pin)?"":__t)+")";return __p},this.JST.bq_bat_definitions_distance=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="long Distance(int trigger_pin, int echo_pin)\n{\n  long microseconds = TP_init(trigger_pin, echo_pin);\n  long distance;\n  distance = microseconds/29/2;\n  if (distance == 0){\n    distance = 999;\n  }\n  return distance;\n}\n";return __p},this.JST.bq_bat_definitions_tp_init=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="//bqBAT\nlong TP_init(int trigger_pin, int echo_pin)\n{\n  digitalWrite(trigger_pin, LOW);\n  delayMicroseconds(2);\n  digitalWrite(trigger_pin, HIGH);\n  delayMicroseconds(10);\n  digitalWrite(trigger_pin, LOW);\n  long microseconds = pulseIn(echo_pin ,HIGH);\n  return microseconds;\n}\n";return __p},this.JST.bq_bat_setups_echo=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode( "+(null==(__t=echo_pin)?"":__t)+" , INPUT );\n";return __p},this.JST.bq_bat_setups_trigger=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode( "+(null==(__t=trigger_pin)?"":__t)+" , OUTPUT );\n";return __p},this.JST.bq_bluetooth_def_definitions=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="#include <SoftwareSerial.h>";return __p},this.JST.bq_bluetooth_def_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",INPUT);\n  pinMode("+(null==(__t=NextPIN)?"":__t)+", OUTPUT);\n  _blueToothSerial.begin("+(null==(__t=baud_rate)?"":__t)+");\n  _blueToothSerial.flush();\n";return __p},this.JST.bq_button=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.bq_button_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",INPUT_PULLUP);\n";return __p},this.JST.bq_buttons=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="  adc_key_in =analogRead("+(null==(__t=dropdown_pin)?"":__t)+");\n  key = get_key(adc_key_in);\n  if (key != oldkey)\n  {\n    delay(50);\n    adc_key_in = analogRead("+(null==(__t=dropdown_pin)?"":__t)+");\n    key = get_key(adc_key_in);\n    if (key != oldkey)\n    {\n      oldkey = key;\n      if (key >=0){\n        switch(key)\n        {\n          case 0:\n           "+(null==(__t=code_btn1)?"":__t)+"\n          break;\n          case 1:\n           "+(null==(__t=code_btn2)?"":__t)+"\n          break;\n          case 2:\n           "+(null==(__t=code_btn3)?"":__t)+"\n          break;\n          case 3:\n           "+(null==(__t=code_btn4)?"":__t)+"\n          break;  \n          case 4:\n           "+(null==(__t=code_btn5)?"":__t)+"\n          break;\n        }      \n      }\n    }\n  }\n";return __p},this.JST.bq_buttons_definitions=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="int get_key(unsigned int input)\n  {\n    int k;\n    for (k = 0; k < NUM_KEYS; k++)\n    {\n      if (input < adc_key_val[k])\n      {\n        return k;\n      }\n    }\n    if (k >= NUM_KEYS)k = -1;\n      return k;\n}\n";return __p},this.JST.bq_buttons_definitions_variables=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="//bqButtons\nint adc_key_val[5] ={20,50, 100, 200, 600 };\nint NUM_KEYS = 5;\nint adc_key_in;\nint key=-1;\nint oldkey=-1;\n";return __p},this.JST.bq_infrared=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.bq_infrared_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode( "+(null==(__t=dropdown_pin)?"":__t)+" , INPUT);\n";return __p},this.JST.bq_joystick=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="readJoystick_"+(null==(__t=name)?"":__t)+"()";return __p},this.JST.bq_joystick_definitions=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="int * readJoystick_"+(null==(__t=name)?"":__t)+"(){\n  _internal_readJoystick_array_"+(null==(__t=name)?"":__t)+"[0]=analogRead("+(null==(__t=pinx)?"":__t)+");\n  _internal_readJoystick_array_"+(null==(__t=name)?"":__t)+"[1]=analogRead("+(null==(__t=piny)?"":__t)+");\n  _internal_readJoystick_array_"+(null==(__t=name)?"":__t)+"[2]=digitalRead("+(null==(__t=pinbutton)?"":__t)+");\n  return _internal_readJoystick_array_"+(null==(__t=name)?"":__t)+";\n}";return __p},this.JST.bq_joystick_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=pinbutton)?"":__t)+",INPUT_PULLUP);\n";return __p},this.JST.bq_led=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalWrite("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=dropdown_stat)?"":__t)+");\n";return __p},this.JST.bq_led_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",OUTPUT);\n";return __p},this.JST.bq_photoresistor=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="analogRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.bq_piezo_buzzer=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="tone("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=dropdown_stat)?"":__t)+","+(null==(__t=delay_time)?"":__t)+");\ndelay("+(null==(__t=delay_time)?"":__t)+");\n";return __p},this.JST.bq_piezo_buzzerav=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="tone("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=Buzztone)?"":__t)+","+(null==(__t=delay_time)?"":__t)+");\ndelay("+(null==(__t=delay_time)?"":__t)+");\n\n";return __p},this.JST.bq_potentiometer=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="analogRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.bt_serial_available=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="if (_blueToothSerial.available()>0){\n"+(null==(__t=branch)?"":__t)+"\n}\n";return __p},this.JST.controls_doWhile=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="do {\n"+(null==(__t=branch)?"":__t)+"\n} while ("+(null==(__t=argument0)?"":__t)+");\n";return __p},this.JST.controls_execute=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=content)?"":__t)+"\n";return __p},this.JST.controls_else=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="else {\n"+(null==(__t=branch)?"":__t)+" }";return __p},this.JST.controls_elseif=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="else if ("+(null==(__t=argument)?"":__t)+") {\n"+(null==(__t=branch)?"":__t)+" }";return __p},this.JST.controls_if=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="if ("+(null==(__t=argument)?"":__t)+") {\n"+(null==(__t=branch)?"":__t)+" }";return __p},this.JST.controls_setupLoop=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=branch)?"":__t)+"\n";return __p},this.JST.controls_whileUntil=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="while ("+(null==(__t=argument0)?"":__t)+") {\n"+(null==(__t=branch)?"":__t)+" }\n";return __p},this.JST.inout_analog_read=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="analogRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.inout_analog_read_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",INPUT);\n";return __p},this.JST.inout_analog_write=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="analogWrite("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=value_num)?"":__t)+");\n";return __p},this.JST.inout_analog_write_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",OUTPUT);\n";return __p},this.JST.inout_builtin_led=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)"ArduinoNano"===RoboBlocks.locales.processor||"ArduinoUno"===RoboBlocks.locales.processor?__p+="digitalWrite(13,"+(null==(__t=dropdown_stat)?"":__t)+");\n":"ESP32"!==RoboBlocks.locales.processor&&"NodeMCU"!==RoboBlocks.locales.processor||(__p+="digitalWrite(2,"+(null==(__t=dropdown_stat)?"":__t)+");\n");return __p},this.JST.inout_builtin_led_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)"ArduinoNano"===RoboBlocks.locales.processor||"ArduinoUno"===RoboBlocks.locales.processor?__p+="pinMode(13,OUTPUT);\n":"ESP32"!==RoboBlocks.locales.processor&&"NodeMCU"!==RoboBlocks.locales.processor||(__p+="pinMode(2,OUTPUT);\n");return __p},this.JST.inout_digital_read=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.inout_digital_read_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",INPUT);\n";return __p},this.JST.inout_digital_write=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalWrite("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=dropdown_stat)?"":__t)+");\n";return __p},this.JST.inout_digital_write_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",OUTPUT);\n";return __p},this.JST.inout_highlow=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=null==(__t=bool_value)?"":__t;return __p},this.JST.lcd_clear=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="lcd.clear();\n";return __p},this.JST.lcd_def_declare=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="LiquidCrystal lcd("+(null==(__t=lcd_1)?"":__t)+", "+(null==(__t=lcd_2)?"":__t)+", "+(null==(__t=lcd_3)?"":__t)+", "+(null==(__t=lcd_4)?"":__t)+", "+(null==(__t=lcd_5)?"":__t)+", "+(null==(__t=lcd_6)?"":__t)+");\n";return __p},this.JST.lcd_def_definitions=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="#include <Wire.h>\n#include <LiquidCrystal.h>";return __p},this.JST.lcd_def_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="lcd.begin(16, 2);\nlcd.clear();\n";return __p},this.JST.lcd_print=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="lcd.print("+(null==(__t=val)?"":__t)+");\n";return __p},this.JST.lcd_print_pos=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="lcd.setCursor("+(null==(__t=ycoor)?"":__t)+","+(null==(__t=xcoor)?"":__t)+");\nlcd.print("+(null==(__t=val)?"":__t)+");\n";return __p},this.JST.lcd_setBacklight=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="lcd.setBacklight("+(null==(__t=state)?"":__t)+");\n";return __p},this.JST.logic_compare=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=argument0)?"":__t)+" "+(null==(__t=operator)?"":__t)+" "+(null==(__t=argument1)?"":__t);return __p},this.JST.logic_negate=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="!"+(null==(__t=argument0)?"":__t);return __p},this.JST.logic_operation=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=argument0)?"":__t)+" "+(null==(__t=operator)?"":__t)+" "+(null==(__t=argument1)?"":__t);return __p},this.JST.math_arithmetic=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=argument0)?"":__t)+""+(null==(__t=operator)?"":__t)+(null==(__t=argument1)?"":__t);return __p},this.JST.math_arithmetic_pow=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pow("+(null==(__t=argument0)?"":__t)+","+(null==(__t=argument1)?"":__t)+")";return __p},this.JST.math_modulo=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=argument0)?"":__t)+"%"+(null==(__t=argument1)?"":__t);return __p},this.JST.math_random_bitOut=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="unsigned int bitOut(void)\n{\n  static unsigned long firstTime=1, prev=0;\n  unsigned long bit1=0, bit0=0, x=0, port=0, limit=99;\n  if (firstTime)\n  {\n    firstTime=0;\n    prev=analogRead(port);\n  }\n  while (limit--)\n  {\n    x=analogRead(port);\n    bit1=(prev!=x?1:0);\n    prev=x;\n    x=analogRead(port);\n    bit0=(prev!=x?1:0);\n    prev=x;\n    if (bit1!=bit0)\n      break;\n  }\n  return bit1;\n}\n";return __p},this.JST.math_random_seedOut=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="unsigned long seedOut(unsigned int noOfBits)\n{\n  unsigned long seed=0;\n  for (int i=0;i<noOfBits;++i)\n    seed = (seed<<1) | bitOut();\n  return seed;\n}\n";return __p},this.JST.math_random=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="random("+(null==(__t=value_num)?"":__t)+","+(null==(__t=value_dmax)?"":__t)+")";return __p},this.JST.procedures_callnoreturn=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=funcName)?"":__t)+"("+(null==(__t=funcArgs)?"":__t)+");\n";return __p},this.JST.procedures_callreturn=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=funcName)?"":__t)+"("+(null==(__t=funcArgs)?"":__t)+")";return __p},this.JST.procedures_defnoreturn=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=returnType)?"":__t)+" "+(null==(__t=funcName)?"":__t)+" ("+(null==(__t=args)?"":__t)+") {\n"+(null==(__t=branch)?"":__t)+" }\n";return __p},this.JST.procedures_defreturn=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=returnType)?"":__t)+" "+(null==(__t=funcName)?"":__t)+" ("+(null==(__t=args)?"":__t)+") {\n"+(null==(__t=branch)?"":__t)+"\n"+(null==(__t=returnValue)?"":__t)+" }\n";return __p},this.JST.serial_available=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="if (Serial.available()>0){\n"+(null==(__t=branch)?"":__t)+"\n}\n";return __p},this.JST.serial_parseint=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.parseInt()\n";return __p},this.JST.serial_parseint_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.begin("+(null==(__t=bitrate)?"":__t)+");\n";return __p},this.JST.serial_print=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.print("+(null==(__t=content)?"":__t)+");\n";return __p},this.JST.serial_print_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.begin("+(null==(__t=bitrate)?"":__t)+");\n";return __p},this.JST.serial_println=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.println("+(null==(__t=content)?"":__t)+");\n";return __p},this.JST.serial_println_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.begin("+(null==(__t=bitrate)?"":__t)+");\n";return __p},this.JST.serial_read=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.read()";return __p},this.JST.serial_read_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.begin("+(null==(__t=bitrate)?"":__t)+");\n";return __p},this.JST.serial_readstring=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.readString()";return __p},this.JST.serial_readstring_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="Serial.begin("+(null==(__t=bitrate)?"":__t)+");\n";return __p},this.JST.serial_special=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=null==(__t=char)?"":__t;return __p},this.JST.servo_move=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="servos["+(null==(__t=dropdown_pin)?"":__t)+"].write("+(null==(__t=value_degree)?"":__t)+");\ndelay("+(null==(__t=delay_time)?"":__t)+");\n";return __p},this.JST.servo_move_definitions_include=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="#include <Servo.h>\n\nServo servos[13];";return __p},this.JST.servo_move_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="servos["+(null==(__t=dropdown_pin)?"":__t)+"].attach("+(null==(__t=dropdown_pin)?"":__t)+");";return __p},this.JST.text_equalsIgnoreCase=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=string1)?"":__t)+".equalsIgnoreCase("+(null==(__t=string2)?"":__t)+")";return __p},this.JST.text_length=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=argument0)?"":__t)+".length()";return __p},this.JST.text_substring=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=string1)?"":__t)+".substring("+(null==(__t=from)?"":__t)+","+(null==(__t=to)?"":__t)+")";return __p},this.JST.variables_set=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+=(null==(__t=varName)?"":__t)+"="+(null==(__t=varValue)?"":__t)+";\n";return __p},this.JST.zum_button=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.zum_button_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=pullup)?"":__t)+");\n";return __p},this.JST.zum_follower=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="if(digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")==HIGH)\n{\n  "+(null==(__t=code_btn1)?"":__t)+"\n}\nif(digitalRead("+(null==(__t=NextPIN)?"":__t)+")==HIGH)\n{\n  "+(null==(__t=code_btn2)?"":__t)+"\n}\n";return __p},this.JST.zum_follower_setups_nextpin=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode( "+(null==(__t=NextPIN)?"":__t)+" , INPUT);\n";return __p},this.JST.zum_follower_setups_pin=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode( "+(null==(__t=dropdown_pin)?"":__t)+" , INPUT);\n";return __p},this.JST.zum_infrared=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.zum_infrared_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode( "+(null==(__t=dropdown_pin)?"":__t)+" , INPUT);\n";return __p},this.JST.zum_led=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="digitalWrite("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=dropdown_stat)?"":__t)+");\n";return __p},this.JST.zum_led_setups=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="pinMode("+(null==(__t=dropdown_pin)?"":__t)+",OUTPUT);\n";return __p},this.JST.zum_photoresistor=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="analogRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p},this.JST.zum_piezo_buzzer=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="tone("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=dropdown_stat)?"":__t)+","+(null==(__t=delay_time)?"":__t)+");\ndelay("+(null==(__t=delay_time)?"":__t)+");\n";return __p},this.JST.zum_piezo_buzzerav=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="tone("+(null==(__t=dropdown_pin)?"":__t)+","+(null==(__t=Buzztone)?"":__t)+","+(null==(__t=delay_time)?"":__t)+");\ndelay("+(null==(__t=delay_time)?"":__t)+");\n\n";return __p},this.JST.zum_potentiometer=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="analogRead("+(null==(__t=dropdown_pin)?"":__t)+")";return __p};var JST=this.JST;Blockly.Arduino.procedures_callnoreturn=function(){var o,e=this.getFieldValue("PROCEDURES"),t=[],l="";try{for(var _=0;_<this.getVariables(e).length;_++)t[_]=Blockly.Arduino.valueToCode(this,"ARG"+_,Blockly.Arduino.ORDER_NONE)||"",l+=(o=RoboBlocks.findPinMode(t[_])).code,t[_]=o.pin}catch(o){}var s=t.join(", ");return l+=JST.procedures_callnoreturn({funcName:e,funcArgs:s})},Blockly.Blocks.procedures_callnoreturn={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_callnoreturn"),examples:["procedures_callnoreturn_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_PROCEDURES,colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_PROCEDURES_CALLNORETURN_TOOLTIP","LANG_PROCEDURES_DEFNORETURN_PROCEDURE","LANG_PROCEDURES_CALL_WITHOUT_DEFINITION"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.appendDummyInput("DUMMY").appendField(new Blockly.FieldDropdown(this.getProcedures()),"PROCEDURES"),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_CALLNORETURN_TOOLTIP")),this.arguments_=this.getVariables(this.getFieldValue("PROCEDURES")),this.quarkConnections_=null,this.quarkArguments_=null,this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES")),this.setInputsInline(!1)},validName:function(o){if(o&&o.length>0){for(var e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length);for(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/([ ])/g,"_")).replace(/([áàâä])/g,"a")).replace(/([éèêë])/g,"e")).replace(/([íìîï])/g,"i")).replace(/([óòôö])/g,"o")).replace(/([úùûü])/g,"u")).replace(/([ñ])/g,"n")).replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|<>\-\&\Ç\%\=\~\{\}\¿\¡\"\@\:\;\-\"\·\|\º\ª\¨\'\·\?\?\ç\`\´\¨\^])/g,""),e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length)}return o},getProcedures:function(){var o=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),e=[];if(o[0].length>0)for(var t in o[0]){var l=o[0][t][0];l=this.validName(l),e.push([l,l])}else e.push([RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFNORETURN_PROCEDURE"),RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFNORETURN_PROCEDURE")]);return e},maxVariableNumber:function(){var o=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),e=[],t=0;if(o[0].length>0||o[1].length>0){for(var l in o[0])o[0][l][1].length>t&&(t=o[0][l][1].length);return t}e.push(["",""])},getVariables:function(o){try{var e=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),t=[];if(e[0].length>0){for(var l in e[0])if(e[0][l][0]===o)return e[0][l][1]}else t.push(["",""])}catch(o){}},exists:function(){var o=Blockly.Procedures.allProcedures(Blockly.mainWorkspace);if(!(o[0].length>0))return!1;for(var e in o[0])if(o[0][e][0]===this.getFieldValue("PROCEDURES"))return!0},onchange:function(){if(this.workspace)if(this.getFieldValue("PROCEDURES")!==this.last_procedure&&this.getFieldValue("PROCEDURES")?(this.changeVariables(),this.last_procedure=this.getFieldValue("PROCEDURES"),this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES"))):this.getVariables(this.getFieldValue("PROCEDURES"))!==this.last_variables&&(this.addVariables(),this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES")),this.last_procedure=this.getFieldValue("PROCEDURES")),this.exists())try{this.setWarningText(null)}catch(o){}else try{this.setWarningText(RoboBlocks.locales.getKey("LANG_PROCEDURES_CALL_WITHOUT_DEFINITION"))}catch(o){}},addVariables:function(){var o=this.getVariables(this.getFieldValue("PROCEDURES")),e=0;if(o&&""!==this.getFieldValue("PROCEDURES")){if(this.last_variables||(this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES"))),o.length>=this.last_variables.length)e=o.length;else if(this.last_variables)try{e=this.last_variables.length}catch(o){}for(var t=0;t<e;t++)null===this.getInput("ARG"+t)?this.appendValueInput("ARG"+t).appendField(o[t],"ARG_NAME"+t).setAlign(Blockly.ALIGN_RIGHT):o[t]&&this.getFieldValue("ARG_NAME"+t)?this.setFieldValue(o[t],"ARG_NAME"+t):this.removeInput("ARG"+t);this.arguments_=o}},renameProcedure:function(o,e){if(this.last_procedure){var t=this.getProcedures();for(var l in t)Blockly.Names.equals(o,t[l][0])&&(this.setFieldValue(new Blockly.FieldDropdown(this.getProcedures()),"PROCEDURES"),this.addVariables());this.last_procedure===o&&(this.last_procedure=e);try{this.setFieldValue(this.last_procedure,"PROCEDURES")}catch(o){}}},changeVariables:function(){for(var o=this.getVariables(this.getFieldValue("PROCEDURES")),e=0;e<this.maxVariableNumber()&&null!==this.getInput("ARG"+e);e++)this.removeInput("ARG"+e);for(var t in o)this.appendValueInput("ARG"+t).appendField(o[t]).setAlign(Blockly.ALIGN_RIGHT);this.arguments_=o},mutationToDom:function(){var o=document.createElement("mutation");o.setAttribute("name",this.getFieldValue("PROCEDURES")),void 0===this.arguments_&&(this.arguments_=this.getVariables(this.getFieldValue("PROCEDURES"))),void 0===this.arguments_&&(this.arguments_=[]);for(var e=0;e<this.arguments_.length;e++){var t=document.createElement("arg");t.setAttribute("name",this.arguments_[e]),o.appendChild(t)}return o},domToMutation:function(o){this.xmlElement=o;var e=o.getAttribute("name");this.last_procedure=e,this.setFieldValue(e,"PROCEDURES");for(var t=0;t<o.childNodes.length;t++)this.appendValueInput("ARG"+t).appendField(o.childNodes[t].getAttribute("name"),"ARG_NAME"+t).setAlign(Blockly.ALIGN_RIGHT)}},Blockly.Arduino.procedures_callreturn=function(){for(var o,e=this.getFieldValue("PROCEDURES"),t=[],l="",_=0;_<this.getVariables(e).length;_++)t[_]=Blockly.Arduino.valueToCode(this,"ARG"+_,Blockly.Arduino.ORDER_NONE)||"null",l+=(o=RoboBlocks.findPinMode(t[_])).code,t[_]=o.pin;var s=t.join(", ");return l+=JST.procedures_callreturn({funcName:e,funcArgs:s}),[l,Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Blocks.procedures_callreturn={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_callreturn"),examples:["procedures_callreturn_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_PROCEDURES,colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_PROCEDURES_CALLRETURN_TOOLTIP","LANG_PROCEDURES_DEFRETURN_PROCEDURE","LANG_PROCEDURES_CALL_WITHOUT_DEFINITION"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.appendDummyInput("DUMMY").appendField(new Blockly.FieldDropdown(this.getProcedures()),"PROCEDURES"),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_CALLRETURN_TOOLTIP")),this.arguments_=this.getVariables(this.getFieldValue("PROCEDURES")),this.quarkConnections_=null,this.quarkArguments_=null,this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES")),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code")},validName:function(o){if(o&&o.length>0){for(var e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length);for(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/([ ])/g,"_")).replace(/([áàâä])/g,"a")).replace(/([éèêë])/g,"e")).replace(/([íìîï])/g,"i")).replace(/([óòôö])/g,"o")).replace(/([úùûü])/g,"u")).replace(/([ñ])/g,"n")).replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|<>\-\&\Ç\%\=\~\{\}\¿\¡\"\@\:\;\-\"\·\|\º\ª\¨\'\·\?\?\ç\`\´\¨\^])/g,""),e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length);for(var t in Blockly.Arduino.RESERVED_WORDS_){if(o===Blockly.Arduino.RESERVED_WORDS_.split(",")[t]){this.setWarningText("Reserved word"),o="";break}this.setWarningText(null)}}return o},getProcedures:function(){var o=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),e=[];if(o[1].length>0)for(var t in o[1]){var l=o[1][t][0];l=this.validName(l),e.push([l,l])}else e.push([RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_PROCEDURE"),RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_PROCEDURE")]);return e},maxVariableNumber:function(){var o=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),e=[],t=0;if(o[1].length>0){for(var l in o[1])o[1][l][1].length>t&&(t=o[1][l][1].length);return t}e.push(["",""])},getVariables:function(o){try{var e=Blockly.Procedures.allProcedures(Blockly.mainWorkspace),t=[];if(e[1].length>0){for(var l in e[1])if(e[1][l][0]===o)return e[1][l][1]}else t.push(["",""])}catch(o){}},exists:function(){var o=Blockly.Procedures.allProcedures(Blockly.mainWorkspace);if(!(o[1].length>0))return!1;for(var e in o[1])if(o[1][e][0]===this.getFieldValue("PROCEDURES"))return!0},onchange:function(){if(this.workspace)if(this.getFieldValue("PROCEDURES")!==this.last_procedure&&this.getFieldValue("PROCEDURES")?(this.changeVariables(),this.last_procedure=this.getFieldValue("PROCEDURES"),this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES"))):this.getVariables(this.getFieldValue("PROCEDURES"))!==this.last_variables&&(this.addVariables(),this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES")),this.last_procedure=this.getFieldValue("PROCEDURES")),this.exists())try{this.setWarningText(null)}catch(o){}else try{this.setWarningText(RoboBlocks.locales.getKey("LANG_PROCEDURES_CALL_WITHOUT_DEFINITION"))}catch(o){}},addVariables:function(){var o=this.getVariables(this.getFieldValue("PROCEDURES")),e=0;if(o&&""!==this.getFieldValue("PROCEDURES")){if(this.last_variables||(this.last_variables=this.getVariables(this.getFieldValue("PROCEDURES"))),o.length>=this.last_variables.length)e=o.length;else if(this.last_variables)try{e=this.last_variables.length}catch(o){}for(var t=0;t<e;t++)null===this.getInput("ARG"+t)?this.appendValueInput("ARG"+t).appendField(o[t],"ARG_NAME"+t).setAlign(Blockly.ALIGN_RIGHT):o[t]&&this.getFieldValue("ARG_NAME"+t)?this.setFieldValue(o[t],"ARG_NAME"+t):this.removeInput("ARG"+t);this.arguments_=o}},renameProcedure:function(o,e){if(this.last_procedure){var t=this.getProcedures();for(var l in t)Blockly.Names.equals(o,t[l][0])&&this.setFieldValue(new Blockly.FieldDropdown(this.getProcedures()),"PROCEDURES");this.last_procedure===o&&(this.last_procedure=e);try{this.setFieldValue(this.last_procedure,"PROCEDURES")}catch(o){}}},changeVariables:function(){for(var o=this.getVariables(this.getFieldValue("PROCEDURES")),e=0;e<this.maxVariableNumber()&&null!==this.getInput("ARG"+e);e++)this.removeInput("ARG"+e);for(var t in o)this.appendValueInput("ARG"+t).appendField(o[t]).setAlign(Blockly.ALIGN_RIGHT);this.arguments_=o},mutationToDom:function(){var o=document.createElement("mutation");o.setAttribute("name",this.getFieldValue("PROCEDURES")),void 0===this.arguments_&&(this.arguments_=this.getVariables(this.getFieldValue("PROCEDURES"))),void 0===this.arguments_&&(this.arguments_=[]);for(var e=0;e<this.arguments_.length;e++){var t=document.createElement("arg");t.setAttribute("name",this.arguments_[e]),o.appendChild(t)}return o},domToMutation:function(o){this.xmlElement=o;var e=o.getAttribute("name");this.last_procedure=e,this.setFieldValue(e,"PROCEDURES");for(var t=0;t<o.childNodes.length;t++)this.appendValueInput("ARG"+t).appendField(o.childNodes[t].getAttribute("name"),"ARG_NAME"+t).setAlign(Blockly.ALIGN_RIGHT)}},Blockly.Arduino.procedures_defnoreturn=function(){var o=this.getFieldValue("NAME"),e=Blockly.Arduino.statementToCode(this,"STACK");e=e.replace(/&quot;/g,'"'),Blockly.Arduino.INFINITE_LOOP_TRAP&&(e=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+e);var t=this.paramString,l=JST.procedures_defnoreturn({returnType:"void",funcName:o,args:t,branch:e});return l=Blockly.Arduino.scrub_(this,l),Blockly.Arduino.definitions_[o]=l,null},Blockly.Blocks.procedures_defnoreturn={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_defnoreturn"),examples:["procedures_callnoreturn_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_PROCEDURES,colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_PROCEDURES_DEFNORETURN_PROCEDURE","LANG_PROCEDURES_DEFNORETURN_TOOLTIP","LANG_PROCEDURES_DEFNORETURN_DO"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES);var o=new Blockly.FieldTextInput("",Blockly.Procedures.rename);o.setSpellcheck(!1),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFNORETURN_PROCEDURE")).appendField(o,"NAME").appendField("","PARAMS"),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFNORETURN_TOOLTIP")),this.arguments_=[],this.type_arguments_=[],this.setStatements_(!0),this.setInputsInline(!1)},setStatements_:function(o){this.hasStatements_!==o&&(o?(this.appendStatementInput("STACK").appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFNORETURN_DO")).setCheck(["code","function"]),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=o)},updateParams_:function(){for(var o=!1,e={},t=0;t<this.arguments_.length;t++){if(e["arg_"+this.arguments_[t].toLowerCase()]){o=!0;break}e["arg_"+this.arguments_[t].toLowerCase()]=!0}o?this.setWarningText("Duplicate argument"):this.setWarningText(null);var l=[];for(var t in this.arguments_)try{l.push(this.type_arguments_[t]+" "+this.arguments_[t])}catch(o){}this.paramString=l.join(", "),Blockly.Events.disable();try{this.setFieldValue(this.paramString,"PARAMS")}finally{Blockly.Events.enable()}},mutationToDom:function(o){var e=document.createElement("mutation");o&&e.setAttribute("name",this.getFieldValue("NAME"));for(var t=0;t<this.arguments_.length;t++){var l=document.createElement("arg_name");l.setAttribute("name",this.arguments_[t]),o&&this.paramIds_&&l.setAttribute("paramId",this.paramIds_[t]),e.appendChild(l),l=document.createElement("arg_type");try{l.setAttribute("name",this.type_arguments_[t]),o&&this.paramIds_&&l.setAttribute("paramId",this.paramIds_[t])}catch(o){}e.appendChild(l)}return this.hasStatements_||e.setAttribute("statements","false"),e},domToMutation:function(o){this.arguments_=[];for(var e,t=0;e=o.childNodes[t];t++)if("arg_name"===e.nodeName.toLowerCase()&&this.arguments_.push(e.getAttribute("name")),"arg_type"===e.nodeName.toLowerCase())try{this.type_arguments_.push(e.getAttribute("name"))}catch(o){}this.updateParams_(),Blockly.Procedures.mutateCallers(this),this.setStatements_("false"!==o.getAttribute("statements"))},decompose:function(o){var e=o.newBlock("procedures_mutatorcontainer");e.initSvg(),this.getInput("RETURN")?e.setFieldValue(this.hasStatements_?"TRUE":"FALSE","STATEMENTS"):e.getInput("STATEMENT_INPUT").setVisible(!1);for(var t=e.getInput("STACK").connection,l=0;l<this.arguments_.length;l++){var _=o.newBlock("procedures_mutatorarg");_.initSvg(),_.setFieldValue(this.type_arguments_[l],"TYPE"),_.setFieldValue(this.arguments_[l],"NAME"),_.oldLocation=l,t.connect(_.previousConnection),t=_.nextConnection}return Blockly.Procedures.mutateCallers(this),e},compose:function(o){this.arguments_=[],this.type_arguments_=[],this.paramIds_=[];for(var e=o.getInputTargetBlock("STACK");e;)this.arguments_.push(e.getFieldValue("NAME")),this.type_arguments_.push(e.getFieldValue("TYPE")),this.paramIds_.push(e.id),e=e.nextConnection&&e.nextConnection.targetBlock();this.updateParams_(),Blockly.Procedures.mutateCallers(this);var t=o.getFieldValue("STATEMENTS");if(null!==t&&(t="TRUE"==t,this.hasStatements_!=t))if(t)this.setStatements_(!0),Blockly.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null;else{var l=this.getInput("STACK").connection;if(this.statementConnection_=l.targetConnection,this.statementConnection_){var _=l.targetBlock();_.unplug(),_.bumpNeighbours_()}this.setStatements_(!1)}},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},renameVar:function(o,e){for(var t=!1,l=0;l<this.arguments_.length;l++)Blockly.Names.equals(o,this.arguments_[l])&&(this.arguments_[l]=e,t=!0);if(t&&(this.updateParams_(),this.mutator.isVisible()))for(var _,s=this.mutator.workspace_.getAllBlocks(),l=0;_=s[l];l++)"procedures_mutatorarg"==_.type&&Blockly.Names.equals(o,_.getFieldValue("NAME"))&&_.setFieldValue(e,"NAME")},validName:function(o){if(o&&o.length>0){for(var e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length);for(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/([ ])/g,"_")).replace(/([áàâä])/g,"a")).replace(/([éèêë])/g,"e")).replace(/([íìîï])/g,"i")).replace(/([óòôö])/g,"o")).replace(/([úùûü])/g,"u")).replace(/([ñ])/g,"n")).replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|<>\-\&\Ç\%\=\~\{\}\¿\¡\"\@\:\;\-\"\·\|\º\ª\¨\'\·\?\?\ç\`\´\¨\^])/g,""),e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length);for(var t in Blockly.Arduino.RESERVED_WORDS_){if(this.reserved_words=Blockly.Arduino.RESERVED_WORDS_.split(","),o===this.reserved_words[t]){this.setWarningText("Reserved word"),o="";break}this.setWarningText(null)}}return o},customContextMenu:function(o){var e={enabled:!0},t=this.getFieldValue("NAME");e.text=Blockly.Msg.PROCEDURES_CREATE_DO.replace("%1",t);var l=goog.dom.createDom("mutation");l.setAttribute("name",t);for(n=0;n<this.arguments_.length;n++){var _=goog.dom.createDom("arg");_.setAttribute("name",this.arguments_[n]),l.appendChild(_)}var s=goog.dom.createDom("block",null,l);if(s.setAttribute("type",this.callType_),e.callback=Blockly.ContextMenu.callbackFactory(this,s),o.push(e),!this.isCollapsed())for(var n=0;n<this.arguments_.length;n++){var e={enabled:!0},t=this.arguments_[n];e.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",t);var i=goog.dom.createDom("field",null,t);i.setAttribute("name","VAR"),(s=goog.dom.createDom("block",null,i)).setAttribute("type","variables_get"),e.callback=Blockly.ContextMenu.callbackFactory(this,s),o.push(e)}},callType_:"procedures_callnoreturn",onchange:function(){if(this.last_procedure!==this.getFieldValue("NAME")){var o=this.getFieldValue("NAME");o=this.validName(o);try{this.setFieldValue(o,"NAME")}catch(o){}this.last_procedure=o}}},Blockly.Blocks.procedures_mutatorcontainer={colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_PROCEDURES_MUTATORCONTAINER_Field"],init:function(){this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_MUTATORCONTAINER_Field")),this.appendStatementInput("STACK").setCheck(["code","function"]),this.appendDummyInput("STATEMENT_INPUT").appendField(Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new Blockly.FieldCheckbox("TRUE"),"STATEMENTS"),this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.setTooltip(""),this.contextMenu=!1}},Blockly.Blocks.procedures_mutatorarg={colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_PROCEDURES_MUTATORARG_Field"],init:function(){var o=new Blockly.FieldTextInput("x",this.validator_);this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_MUTATORARG_Field")).appendField(new Blockly.FieldDropdown([["int","int"],["String","String"]]),"TYPE").appendField(o,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.setTooltip(""),this.contextMenu=!1,o.onFinishEditing_=this.createNewVar_,o.onFinishEditing_("x")},onchange:function(){if(this.last_variable!==this.getFieldValue("NAME")){var o=this.getFieldValue("NAME");o=this.validName(o);try{this.setFieldValue(o,"NAME")}catch(o){}this.last_variable=o}},validName:Blockly.Blocks.procedures_defnoreturn.validName,validator_:function(o){return(o=o.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""))||null},createNewVar_:function(o){var e=this.sourceBlock_;e&&e.workspace&&e.workspace.options&&e.workspace.options.parentWorkspace&&e.workspace.options.parentWorkspace.createVariable(o)}},Blockly.Arduino.procedures_defreturn=function(){var o=this.getFieldValue("NAME"),e=Blockly.Arduino.statementToCode(this,"STACK");e=e.replace(/&quot;/g,'"'),Blockly.Arduino.INFINITE_LOOP_TRAP&&(e=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+e);var t=Blockly.Arduino.valueToCode(this,"RETURN",Blockly.Arduino.ORDER_NONE)||"",l="";t=t.replace(/&quot;/g,'"');var _=this.getReturnType();if(t){var s=RoboBlocks.findPinMode(t);t=s.code,t+="  return "+s.pin+";\n"}var n=this.paramString;return l+=JST.procedures_defreturn({returnType:_,funcName:o,args:n,branch:e,returnValue:t}),l=Blockly.Arduino.scrub_(this,l),Blockly.Arduino.definitions_[o]=l,null},Blockly.Blocks.procedures_defreturn={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_defreturn"),examples:["procedures_callreturn_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_PROCEDURES,colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_PROCEDURES_DEFRETURN_PROCEDURE","LANG_PROCEDURES_DEFRETURN_RETURN","LANG_PROCEDURES_DEFRETURN_TOOLTIP"],init:function(){var o=new Blockly.FieldTextInput("",Blockly.Procedures.rename);o.setSpellcheck(!1),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_PROCEDURE")).appendField(o,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_RETURN")),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_TOOLTIP")),this.arguments_=[],this.setStatements_(!0),this.statementConnection_=null},isVariable:function(o){for(var e in Blockly.Variables.allUsedVariables)if(Blockly.Variables.allUsedVariables[e]===o)return!0;return!1},getReturnType:function(){var o,e=Blockly.Arduino.valueToCode(this,"RETURN",Blockly.Arduino.ORDER_NONE)||"";e=RoboBlocks.findPinMode(e).pin;var t=!1;for(var l in Blockly.Arduino.definitions_)if(Blockly.Arduino.definitions_[l].search(e+" \\(")>=0){t=!0;break}if(e||(o="void"),e.search('"')>=0)o="String";else if(t)for(l in Blockly.Arduino.definitions_)Blockly.Arduino.definitions_[l].search(e)>=0&&(o="int"===Blockly.Arduino.definitions_[l].substring(0,3)||"//b"===Blockly.Arduino.definitions_[l].substring(0,3)?"int *"===Blockly.Arduino.definitions_[l].substring(0,5)||"int _"===Blockly.Arduino.definitions_[l].substring(0,5)?"int *":"int":"Str"===Blockly.Arduino.definitions_[l].substring(0,3)?"String":"");else o=this.isVariable(e)?RoboBlocks.variables[e][0]:e.search("analogRead")>=0||e.search("digitalRead")>=0||e.search("Distanc")>=0||!isNaN(parseFloat(e))||e.search("random")>=0||e.search("map")>=0||e.search("\\[")>=0||e.search("abs")>=0||e.search("sqrt")>=0||e.search("log")>=0||e.search("log")>=0||e.search("exp")>=0||e.search("pow")>=0?"int":e.search("readJoystick")>=0||"{"===e[0]?"int *":"void";return o},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,renameVar:Blockly.Blocks.procedures_defnoreturn.renameVar,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},Blockly.Arduino.procedures_ifreturn=function(){var o=Blockly.Arduino.valueToCode(this,"CONDITION",Blockly.Arduino.ORDER_NONE)||"",e="",t=RoboBlocks.findPinMode(o);e+=t.code,e+="if ("+(o=t.pin)+") {\n";var l=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_NONE)||"";return t=RoboBlocks.findPinMode(l),e+=t.code,e+="  return ("+l+");\n",e+="}\n"},Blockly.Blocks.procedures_ifreturn={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_ifreturn"),examples:["procedures_ifreturn_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_PROCEDURES,colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_CONTROLS_IF_MSG_IF","LANG_PROCEDURES_DEFRETURN_RETURN","LANG_PROCEDURES_IFRETURN_TOOLTIP","LANG_PROCEDURES_IFRETURN_WARNING"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.appendValueInput("CONDITION").setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_IF")),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_DEFRETURN_RETURN")),this.appendValueInput("VALUE"),this.setInputsInline(!0,"function"),this.setPreviousStatement(!0,"function"),this.setNextStatement(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_IFRETURN_TOOLTIP")),this.hasReturnValue_=!0},mutationToDom:function(){var o=document.createElement("mutation");return o.setAttribute("value",Number(this.hasReturnValue_)),o},domToMutation:function(o){var e=o.getAttribute("value");this.hasReturnValue_=1===e},onchange:function(){if(this.workspace){var o=!1,e=this;do{if("procedures_defreturn"===e.type){o=!0;break}e=e.getSurroundParent()}while(e);if(o)this.setWarningText(null);else try{this.setWarningText(RoboBlocks.locales.getKey("LANG_PROCEDURES_IFRETURN_WARNING"))}catch(o){console.log("Captured error: ",o)}}}},Blockly.Arduino.procedures_return=function(){var o="",e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_NONE)||"";return o+=RoboBlocks.findPinMode(e).code,o+="  return ("+e+");\n"},Blockly.Blocks.procedures_return={category:RoboBlocks.locales.getKey("LANG_CATEGORY_PROCEDURES"),helpUrl:RoboBlocks.getHelpUrl("procedures_return"),examples:["procedures_return_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_PROCEDURES,colour:RoboBlocks.LANG_COLOUR_PROCEDURES,keys:["LANG_PROCEDURES_RETURN","LANG_PROCEDURES_RETURN_TOOLTIP","LANG_PROCEDURES_IFRETURN_WARNING"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_PROCEDURES),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_PROCEDURES_RETURN")),this.appendValueInput("VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"function"),this.setNextStatement(!0,"function"),this.setTooltip(RoboBlocks.locales.getKey("LANG_PROCEDURES_RETURN_TOOLTIP")),this.hasReturnValue_=!0},mutationToDom:function(){var o=document.createElement("mutation");return o.setAttribute("value",Number(this.hasReturnValue_)),o},domToMutation:function(o){var e=o.getAttribute("value");this.hasReturnValue_=1===e},onchange:function(){if(this.workspace){var o=!1,e=this;do{if("procedures_defreturn"===e.type){o=!0;break}e=e.getSurroundParent()}while(e);if(o)this.setWarningText(null);else try{this.setWarningText(RoboBlocks.locales.getKey("LANG_PROCEDURES_IFRETURN_WARNING"))}catch(o){console.log("Captured error: ",o)}}}},Blockly.Arduino.controls_setupLoop=function(){var o=Blockly.Arduino.statementToCode(this,"SETUP");o=o.replace(/&quot;/g,'"'),Blockly.Arduino.setups_.setup_int0_&&(o+=Blockly.Arduino.setups_.setup_int0_),Blockly.Arduino.setups_.X_SETUP=JST.controls_setupLoop({branch:o});var e=Blockly.Arduino.statementToCode(this,"LOOP");return e=e.replace(/&quot;/g,'"'),e=JST.controls_setupLoop({branch:e})},Blockly.Blocks.controls_setupLoop={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_setupLoop"),examples:["controls_setupLoop_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_SETUP_LOOP_SETUP_TITLE","LANG_CONTROLS_SETUP_LOOP_LOOP_TITLE","LANG_CONTROLS_SETUP_LOOP_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendStatementInput("SETUP").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SETUP_LOOP_SETUP_TITLE")).setCheck("code"),this.appendStatementInput("LOOP").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SETUP_LOOP_LOOP_TITLE")).setCheck("code"),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_SETUP_LOOP_TOOLTIP"))}},Blockly.Arduino.controls_doWhile=function(){var o=Blockly.Arduino.valueToCode(this,"WHILE",Blockly.Arduino.ORDER_NONE)||"";o=o.replace(/&quot;/g,'"');var e=Blockly.Arduino.statementToCode(this,"DO");e=e.replace(/&quot;/g,'"');var t="";return Blockly.Arduino.INFINITE_LOOP_TRAP&&(e=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+e),"UNTIL"===this.getFieldValue("MODE")&&(o.match(/^\w+$/)||(o="("+o+")"),o="!"+o),t+=JST.controls_doWhile({argument0:o,branch:e})},Blockly.Blocks.controls_doWhile={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_doWhile"),examples:["controls_doWhile_example1.bly","controls_doWhile_example2.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_DOWHILE_OPERATOR_DO","LANG_CONTROLS_WHILEUNTIL_OPERATOR_WHILE","LANG_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL","LANG_CONTROLS_DOWHILE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendStatementInput("DO").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_DOWHILE_OPERATOR_DO")).setCheck("code"),this.appendValueInput("WHILE").setCheck(Boolean).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_OPERATOR_WHILE"),"WHILE"],[RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL"),"UNTIL"]]),"MODE"),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_DOWHILE_TOOLTIP"))}},Blockly.Arduino.base_delay=function(){var o=Blockly.Arduino.valueToCode(this,"DELAY_TIME",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,e+=JST.base_delay({delay_time:o})},Blockly.Blocks.base_delay={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("base_delay"),examples:["base_delay_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_BASE_DELAY_WAIT","LANG_CONTROLS_BASE_DELAY_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("DELAY_TIME",Number).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_BASE_DELAY_WAIT")).setCheck(Number),this.setInputsInline(!0),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_BASE_DELAY_TOOLTIP"))}},Blockly.Arduino.advanced_map=function(){var o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(this,"FROM_MIN",Blockly.Arduino.ORDER_NONE),t=Blockly.Arduino.valueToCode(this,"FROM_MAX",Blockly.Arduino.ORDER_NONE),l=Blockly.Arduino.valueToCode(this,"TO_MIN",Blockly.Arduino.ORDER_NONE),_=Blockly.Arduino.valueToCode(this,"TO_MAX",Blockly.Arduino.ORDER_NONE),s="",n=RoboBlocks.findPinMode(o);return s+=n.code,o=n.pin,n=RoboBlocks.findPinMode(e),s+=n.code,e=n.pin,n=RoboBlocks.findPinMode(t),s+=n.code,t=n.pin,n=RoboBlocks.findPinMode(l),s+=n.code,l=n.pin,n=RoboBlocks.findPinMode(_),s+=n.code,_=n.pin,s+=JST.advanced_map({num:o,from_min:e,from_max:t,to_min:l,to_max:_}),[s,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.advanced_map={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("advanced_map"),examples:["advanced_map_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_MATH_ADVANCED_MAP_MAP","LANG_MATH_ADVANCED_MAP_FROM","LANG_MATH_ADVANCED_MAP_HYPHEN","LANG_MATH_ADVANCED_MAP_BRACKET","LANG_MATH_ADVANCED_MAP_TO","LANG_MATH_ADVANCED_MAP_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_MATH),this.appendValueInput("NUM",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_MAP")).setCheck(Number),this.appendValueInput("FROM_MIN",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_FROM")).setCheck(Number),this.appendValueInput("FROM_MAX",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_HYPHEN")).setCheck(Number),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_BRACKET")),this.appendValueInput("TO_MIN",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_TO")).setCheck(Number),this.appendValueInput("TO_MAX",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_HYPHEN")).setCheck(Number),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_BRACKET")),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_MATH_ADVANCED_MAP_TOOLTIP"))}},Blockly.Arduino.base_map=function(){var o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(this,"DMAX",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,t+=JST.base_map({value_num:o,value_dmax:e}),[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.base_map={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("base_map"),examples:["base_map_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_MATH_BASE_MAP","LANG_MATH_BASE_MAP_VALUE_TO","LANG_MATH_BASE_MAP_BRACKET","LANG_MATH_BASE_MAP_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_MATH),this.appendValueInput("NUM",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_BASE_MAP")).setCheck(Number),this.appendValueInput("DMAX",Number).appendField(RoboBlocks.locales.getKey("LANG_MATH_BASE_MAP_VALUE_TO")).setCheck(Number),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_MATH_BASE_MAP_BRACKET")),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_MATH_BASE_MAP_TOOLTIP"))}},Blockly.Arduino.base_us=function(){return["micros()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.base_us={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("base_us"),category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,examples:["base_us_example.bly"],keys:["LANG_CONTROLS_BASE_US","LANG_CONTROLS_BASE_US_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_BASE_US")),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_BASE_US_TOOLTIP"))}},Blockly.Arduino.controls_flow_statements=function(){switch(this.getFieldValue("FLOW")){case"BREAK":return"break;\n";case"CONTINUE":return"continue;\n"}throw"Unknown flow statement."},Blockly.Blocks.controls_flow_statements={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_flow_statements"),examples:["controls_flow_statements_example1.bly","controls_flow_statements_example2.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK","LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE","LANG_CONTROLS_FLOW_STATEMENTS_INPUT_OFLOOP","LANG_CONTROLS_FLOW_STATEMENTS_WARNING","LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK","LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL);var o=new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK")||"BREAK","BREAK"],[RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE")||"CONTINUE","CONTINUE"]]);this.appendDummyInput().appendField(o,"FLOW").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_INPUT_OFLOOP")),this.setPreviousStatement(!0,"code");var e=this;this.setTooltip(function(){var o=e.getFieldValue("FLOW");return Blockly.Blocks.controls_flow_statements.TOOLTIPS[o]})},onchange:function(){if(this.workspace){var o=!1,e=this;do{if("controls_repeat"===e.type||"controls_forEach"===e.type||"controls_for"===e.type||"controls_whileUntil"===e.type){o=!0;break}e=e.getSurroundParent()}while(e);if(o)this.setWarningText(null);else try{this.setWarningText(RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_WARNING"))}catch(o){console.log("Captured error: ",o)}}}},Blockly.Blocks.controls_flow_statements.TOOLTIPS={BREAK:RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK"),CONTINUE:RoboBlocks.locales.getKey("LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE")},Blockly.Arduino.controls_for=function(){var o=Blockly.Arduino.valueToCode(this,"VAR",Blockly.Arduino.ORDER_NONE)||"",e=Blockly.Arduino.valueToCode(this,"FROM",Blockly.Arduino.ORDER_ASSIGNMENT)||"",t=Blockly.Arduino.valueToCode(this,"TO",Blockly.Arduino.ORDER_ASSIGNMENT)||"",l=Blockly.Arduino.statementToCode(this,"DO");Blockly.Arduino.INFINITE_LOOP_TRAP&&(l=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+l);var _="",s=RoboBlocks.findPinMode(o);_+=s.code,o=s.pin,_+=(s=RoboBlocks.findPinMode(e)).code,e=s.pin,_+=(s=RoboBlocks.findPinMode(t)).code,t=s.pin;var n=this.getInputTargetBlock("FROM"),i=this.getInputTargetBlock("TO");if(n&&i){var a=this.getInputTargetBlock("FROM").type,c=this.getInputTargetBlock("TO").type;if("variables_get"==a&&"math_number"==c)r=!1;else if("math_number"==a&&"variables_get"==c)r=!0;else if("math_number"==a&&"math_number"==c)r=parseFloat(e)<=parseFloat(t);else var r=parseFloat(e)<=parseFloat(t);_+="for ("+o+" = "+e+"; "+o+(r?" <= ":" >= ")+t+"; "+o+(r?"++":"--")+") {\n"+l+"}\n"}return _},Blockly.Blocks.controls_for={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_for"),examples:["controls_for_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_FOR_INPUT_WITH","LANG_CONTROLS_FOR_INPUT_FROM","LANG_CONTROLS_FOR_INPUT_TO","LANG_CONTROLS_FOR_INPUT_DO"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("VAR").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_INPUT_WITH")),this.appendValueInput("FROM").setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_INPUT_FROM")),this.appendValueInput("TO").setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_INPUT_TO")),this.appendStatementInput("DO").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_INPUT_DO")).setCheck("code"),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setInputsInline(!0);var o=this;this.setTooltip(function(){return RoboBlocks.LANG_CONTROLS_FOR_TOOLTIP.replace("%1",o.getFieldValue("VAR"))})},getVars:function(){return[this.getFieldValue("VAR")]},getVariables:function(){var o=Blockly.Variables.allUsedVariables,e=[];if(o.length>0)for(var t in o)e.push([o[t],o[t]]);else e.push(["",""]);return e},isVariable:function(o){for(var e in Blockly.Variables.allUsedVariables)if(Blockly.Variables.allUsedVariables[e]===o)return!0;return!1},onchange:function(){var o=this.getInputTargetBlock("FROM"),e=this.getInputTargetBlock("TO");if(o&&e){var t=o.type,l=e.type;"variables_get"==t&&"math_number"==l?this.setWarningText(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_LOOP_WARNING1")):"math_number"==t&&"variables_get"==l?this.setWarningText(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_LOOP_WARNING2")):"math_number"==t&&"math_number"==l?this.setWarningText(null):this.setWarningText(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_LOOP_WARNING3"))}else this.setWarningText(RoboBlocks.locales.getKey("LANG_CONTROLS_FOR_LOOP_WARNING4"))},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setTitleValue(e,"VAR")}},Blockly.Arduino.controls_if=function(){var o=0,e=Blockly.Arduino.valueToCode(this,"IF"+o,Blockly.Arduino.ORDER_NONE);e=e.replace(/&quot;/g,'"');var t=Blockly.Arduino.statementToCode(this,"DO"+o),l="",_=RoboBlocks.findPinMode(e);for(l+=_.code,e=_.pin,l+=JST.controls_if({argument:e,branch:t}),o=1;o<=this.elseifCount_;o++)e=Blockly.Arduino.valueToCode(this,"IF"+o,Blockly.Arduino.ORDER_NONE),t=Blockly.Arduino.statementToCode(this,"DO"+o),l+=JST.controls_elseif({argument:e,branch:t});return this.elseCount_&&(t=Blockly.Arduino.statementToCode(this,"ELSE"),l+=JST.controls_else({argument:e,branch:t})),t=t.replace(/&quot;/g,'"'),(l=l.replace(/&quot;/g,'"'))+"\n"},Blockly.Blocks.controls_if={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_if"),examples:["controls_if_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_IF_MSG_IF","LANG_CONTROLS_IF_MSG_THEN","LANG_CONTROLS_IF_TOOLTIP_1","LANG_CONTROLS_IF_ELSEIF_Field_ELSEIF","LANG_CONTROLS_IF_MSG_THEN","LANG_CONTROLS_IF_ELSE_Field_ELSE"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("IF0").setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_IF")),this.appendStatementInput("DO0").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT).setCheck("code"),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setMutator(new Blockly.Mutator(["controls_if_elseif","controls_if_else"]));var o=this;this.setTooltip(function(){return o.elseifCount_||o.elseCount_?"":RoboBlocks.locales.getKey("LANG_CONTROLS_IF_TOOLTIP_1")}),this.elseifCount_=0,this.elseCount_=0},mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var o=document.createElement("mutation");return this.elseifCount_&&o.setAttribute("elseif",this.elseifCount_),this.elseCount_&&o.setAttribute("else",1),o},domToMutation:function(o){this.elseifCount_=window.parseInt(o.getAttribute("elseif"),10),this.elseCount_=window.parseInt(o.getAttribute("else"),10);for(var e=1;e<=this.elseifCount_;e++)this.appendValueInput("IF"+e).setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSEIF_Field_ELSEIF")),this.appendStatementInput("DO"+e).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT).setCheck("code");this.elseCount_&&(this.appendDummyInput("ELSE_LABEL").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSE_Field_ELSE")),this.appendStatementInput("ELSE").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT).setCheck("code"))},decompose:function(o){var e=o.newBlock("controls_if_if");e.initSvg();for(var t=e.getInput("STACK").connection,l=1;l<=this.elseifCount_;l++){var _=o.newBlock("controls_if_elseif");_.initSvg(),t.connect(_.previousConnection),t=_.nextConnection}if(this.elseCount_){var s=o.newBlock("controls_if_else");s.initSvg(),t.connect(s.previousConnection)}return e},compose:function(o){this.elseCount_&&(this.removeInput("ELSE_LABEL"),this.removeInput("ELSE")),this.elseCount_=0;for(var e=this.elseifCount_;e>0;e--)this.removeInput("IF"+e),this.removeInput("DO"+e);this.elseifCount_=0;for(var t=o.getInputTargetBlock("STACK");t;){switch(t.type){case"controls_if_elseif":this.elseifCount_++;var l=this.appendValueInput("IF"+this.elseifCount_).setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSEIF_Field_ELSEIF")),_=this.appendStatementInput("DO"+this.elseifCount_).setCheck("code");_.appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT),t.valueConnection_&&l.connection.connect(t.valueConnection_),t.statementConnection_&&_.connection.connect(t.statementConnection_);break;case"controls_if_else":this.elseCount_++,this.appendDummyInput("ELSE_LABEL").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSE_Field_ELSE"));var s=this.appendStatementInput("ELSE").setCheck("code");s.appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT),t.statementConnection_&&s.connection.connect(t.statementConnection_);break;default:throw"Unknown block type."}t=t.nextConnection&&t.nextConnection.targetBlock()}},saveConnections:function(o){for(var e=o.getInputTargetBlock("STACK"),t=1;e;){switch(e.type){case"controls_if_elseif":var l=this.getInput("IF"+t),_=this.getInput("DO"+t);e.valueConnection_=l&&l.connection.targetConnection,e.statementConnection_=_&&_.connection.targetConnection,t++;break;case"controls_if_else":_=this.getInput("ELSE"),e.statementConnection_=_&&_.connection.targetConnection;break;default:throw"Unknown block type."}e=e.nextConnection&&e.nextConnection.targetBlock()}}},Blockly.Blocks.controls_if_if={colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_IF_IF_Field_IF","LANG_CONTROLS_IF_IF_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_IF_Field_IF")).setAlign(Blockly.ALIGN_RIGHT),this.appendStatementInput("STACK").setCheck("if"),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_IF_TOOLTIP")),this.contextMenu=!1}},Blockly.Blocks.controls_if_elseif={colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_IF_ELSEIF_Field_ELSEIF","LANG_CONTROLS_IF_ELSEIF_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSEIF_Field_ELSEIF")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,"if"),this.setNextStatement(!0,"if"),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSEIF_TOOLTIP")),this.contextMenu=!1}},Blockly.Blocks.controls_if_else={colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_IF_ELSE_Field_ELSE","LANG_CONTROLS_IF_ELSE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSE_Field_ELSE")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,"if"),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_ELSE_TOOLTIP")),this.contextMenu=!1}};var indentSentences=function(o){var e=o.split("\n"),t="";for(var l in e)t+="  "+e[l]+"\n";return t};return Blockly.Arduino.controls_switch=function(){var o=0,e=Blockly.Arduino.valueToCode(this,"IF0",Blockly.Arduino.ORDER_NONE)||"",t=Blockly.Arduino.statementToCode(this,"DO"+o);t=indentSentences(t);var l="",_=RoboBlocks.findPinMode(e);for(l+=_.code,l+="switch ("+(e=_.pin)+")\n{",o=1;o<=this.switchCount_;o++)e=Blockly.Arduino.valueToCode(this,"SWITCH"+o,Blockly.Arduino.ORDER_NONE)||"",t=Blockly.Arduino.statementToCode(this,"DO"+o),l+=" \n  case "+e+": \n  {\n"+(t=(t=indentSentences(t)).substring(0,t.length-1))+"  break;\n  }";return this.defaultCount_&&(t=Blockly.Arduino.statementToCode(this,"DEFAULT"),l+="  \n  default:\n  {\n"+(t=(t=indentSentences(t)).substring(0,t.length-1))+"}"),l+"\n}\n"},Blockly.Blocks.controls_switch={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_switch"),examples:["controls_switch_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_SWITCH","LANG_CONTROLS_SWITCH_CASE","LANG_CONTROLS_IF_MSG_THEN","LANG_CONTROLS_SWITCH_DEFAULT"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("IF0").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setMutator(new Blockly.Mutator(["controls_switch_case","controls_switch_default"]));this.setTooltip(function(){return""}),this.defaultCount_=0},mutationToDom:function(){if(!this.switchCount_&&!this.defaultCount_)return null;var o=document.createElement("mutation");return this.switchCount_&&o.setAttribute("case",this.switchCount_),this.defaultCount_&&o.setAttribute("default",1),o},domToMutation:function(o){this.switchCount_=window.parseInt(o.getAttribute("case"),10),this.defaultCount_=window.parseInt(o.getAttribute("default"),10);for(var e=1;e<=this.switchCount_;e++)this.appendValueInput("SWITCH"+e).setCheck(Number).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_CASE")).setAlign(Blockly.ALIGN_RIGHT),this.setInputsInline(!0),this.appendStatementInput("DO"+e).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT).setCheck("code");this.defaultCount_&&this.appendStatementInput("DEFAULT").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_DEFAULT")).setAlign(Blockly.ALIGN_RIGHT).setCheck("code")},decompose:function(o){var e=o.newBlock("controls_switch_switch");e.initSvg();for(var t=e.getInput("STACK").connection,l=1;l<=this.switchCount_;l++){var _=o.newBlock("controls_switch_case");_.initSvg(),t.connect(_.previousConnection),t=_.nextConnection}if(this.defaultCount_){var s=o.newBlock("controls_switch_default");s.initSvg(),t.connect(s.previousConnection)}return e},compose:function(o){this.defaultCount_&&this.removeInput("DEFAULT"),this.defaultCount_=0;for(var e=this.switchCount_;e>0;e--)this.removeInput("SWITCH"+e),this.removeInput("DO"+e);this.switchCount_=0;for(var t=o.getInputTargetBlock("STACK");t;){switch(t.type){case"controls_switch_case":this.switchCount_++;var l;l=RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_CASE");var _=this.appendValueInput("SWITCH"+this.switchCount_).setCheck(Number).appendField(l).setAlign(Blockly.ALIGN_RIGHT);this.setInputsInline(!0);var s=this.appendStatementInput("DO"+this.switchCount_).setCheck("code");s.appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_IF_MSG_THEN")).setAlign(Blockly.ALIGN_RIGHT),t.valueConnection_&&_.connection.connect(t.valueConnection_),t.statementConnection_&&s.connection.connect(t.statementConnection_);break;case"controls_switch_default":this.defaultCount_++;var n=this.appendStatementInput("DEFAULT").setCheck("code");n.appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_DEFAULT")).setAlign(Blockly.ALIGN_RIGHT),t.statementConnection_&&n.connection.connect(t.statementConnection_);break;default:throw"Unknown block type."}t=t.nextConnection&&t.nextConnection.targetBlock()}},saveConnections:function(o){for(var e=o.getInputTargetBlock("STACK"),t=1;e;){switch(e.type){case"controls_switch_case":var l=this.getInput("SWITCH"+t),_=this.getInput("DO"+t);e.valueConnection_=l&&l.connection.targetConnection,e.statementConnection_=_&&_.connection.targetConnection,t++;break;case"controls_switch_default":_=this.getInput("DEFAULT"),e.statementConnection_=_&&_.connection.targetConnection;break;default:throw"Unknown block type."}e=e.nextConnection&&e.nextConnection.targetBlock()}}},Blockly.Blocks.controls_switch_switch={colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_SWITCH"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH")).setAlign(Blockly.ALIGN_RIGHT),this.appendStatementInput("STACK").setCheck("switch"),this.setTooltip("Switch"),this.contextMenu=!1}},Blockly.Blocks.controls_switch_case={colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_SWITCH_CASE"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_CASE")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,"switch"),this.setNextStatement(!0,"switch"),this.setTooltip("Switch case"),this.contextMenu=!1}},Blockly.Blocks.controls_switch_default={colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_SWITCH_DEFAULT"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_SWITCH_DEFAULT")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,"switch"),this.setTooltip("Switch default"),this.contextMenu=!1}},Blockly.Arduino.controls_whileUntil=function(){var o=Blockly.Arduino.valueToCode(this,"BOOL",Blockly.Arduino.ORDER_NONE)||"";o=o.replace(/&quot;/g,'"');var e=Blockly.Arduino.statementToCode(this,"DO");e=e.replace(/&quot;/g,'"');var t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,Blockly.Arduino.INFINITE_LOOP_TRAP&&(e=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+e),"UNTIL"===this.getFieldValue("MODE")&&(o.match(/^\w+$/)||(o="("+o+")"),o="!"+o),t+=JST.controls_whileUntil({argument0:o,branch:e})},Blockly.Blocks.controls_whileUntil={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_whileUntil"),examples:["controls_whileUntil_example.bly","controls_whileUntil1_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_WHILEUNTIL_OPERATOR_WHILE","LANG_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL","LANG_CONTROLS_DOWHILE_OPERATOR_DO","LANG_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE","LANG_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("BOOL").setCheck(Boolean).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_OPERATOR_WHILE"),"WHILE"],[RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL"),"UNTIL"]]),"MODE"),this.appendStatementInput("DO").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_DOWHILE_OPERATOR_DO")),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code");var o=this;this.setTooltip(function(){var e=o.getFieldValue("MODE");return Blockly.Blocks.controls_whileUntil.TOOLTIPS[e]})}},Blockly.Blocks.controls_whileUntil.TOOLTIPS={WHILE:RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE"),UNTIL:RoboBlocks.locales.getKey("LANG_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL")},Blockly.Arduino.inout_analog_read=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,RoboBlocks.isVariable(o)?e+=JST.inout_analog_read_setups({dropdown_pin:o}):Blockly.Arduino.setups_["setup_green_analog_read"+o]=JST.inout_analog_read_setups({dropdown_pin:o}),e+=JST.inout_analog_read({dropdown_pin:o}),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.inout_analog_read={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_ANALOG"),helpUrl:RoboBlocks.getHelpUrl("inout_analog_read"),examples:["inout_analog_read_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_ANALOG,keys:["LANG_ADVANCED_INOUT_ANALOG_READ","LANG_ADVANCED_INOUT_ANALOG_READ_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_ANALOG),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_ANALOG_READ")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)),this.setOutput(!0,Number),this.setInputsInline(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_ANALOG_READ_TOOLTIP"))}},Blockly.Arduino.inout_analog_write=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(o);t+=l.code,o=l.pin;var _=RoboBlocks.findPinMode(e);return t+=_.code,e=_.pin,RoboBlocks.isVariable(o)?t+=JST.inout_analog_write_setups({dropdown_pin:o,value_num:e}):Blockly.Arduino.setups_["setup_analog_write"+o]=JST.inout_analog_write_setups({dropdown_pin:o,value_num:e}),t+=JST.inout_analog_write({dropdown_pin:o,value_num:e})},Blockly.Blocks.inout_analog_write={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_ANALOG"),helpUrl:RoboBlocks.getHelpUrl("inout_analog_write"),examples:["inout_analog_write_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_ANALOG,keys:["LANG_ADVANCED_INOUT_ANALOG_WRITE","LANG_ADVANCED_INOUT_ANALOG_WRITE_VALUE","LANG_ADVANCED_INOUT_ANALOG_WRITE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_ANALOG),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_ANALOG_WRITE")).appendField(new Blockly.FieldImage("img/blocks/pwm_signal.svg",24*options.zoom,24*options.zoom)),this.appendValueInput("NUM",Number).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_ANALOG_WRITE_VALUE")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).setCheck(Number),this.setInputsInline(!0),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_ANALOG_WRITE_TOOLTIP"))}},Blockly.Arduino.inout_builtin_led=function(){var o=this.getFieldValue("STAT"),e="";return Blockly.Arduino.setups_.setup_green_led_13=JST.inout_builtin_led_setups({}),"TOGGLE"===o?e+="digitalWrite(13,!digitalRead(13));\n":e=JST.inout_builtin_led({dropdown_stat:o}),e},Blockly.Blocks.inout_builtin_led={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_DIGITAL"),helpUrl:RoboBlocks.getHelpUrl("inout_builtin_led"),examples:["inout_builtin_led_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL,keys:["LANG_ADVANCED_BUILTIN_LED","LANG_ADVANCED_BUILTIN_LED_ON","LANG_ADVANCED_BUILTIN_LED_OFF","LANG_ADVANCED_BUILTIN_LED_TOGGLE","LANG_ADVANCED_BUILTIN_LED_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED")).appendField(new Blockly.FieldImage("img/blocks/diode.png",24*options.zoom,24*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED_STATE")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED_ON")||"ON","HIGH"],[RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED_OFF")||"OFF","LOW"],[RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED_TOGGLE")||"TOGGLE","TOGGLE"]]),"STAT"),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_BUILTIN_LED_TOOLTIP"))}},Blockly.Arduino.inout_digital_read=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,RoboBlocks.isVariable(o)?e+=JST.inout_digital_read_setups({dropdown_pin:o}):Blockly.Arduino.setups_["setup_green_digital_read"+o]=JST.inout_digital_read_setups({dropdown_pin:o}),e+=JST.inout_digital_read({dropdown_pin:o}),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.inout_digital_read={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_DIGITAL"),helpUrl:RoboBlocks.getHelpUrl("inout_digital_read"),examples:["inout_digital_read_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL,keys:["LANG_ADVANCED_INOUT_DIGITAL_READ","LANG_ADVANCED_INOUT_DIGITAL_READ_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_READ")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)),this.setOutput(!0,Boolean),this.setInputsInline(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_READ_TOOLTIP"))}},Blockly.Arduino.inout_digital_write=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(this,"STAT",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,RoboBlocks.isVariable(o)?t+=JST.inout_digital_write_setups({dropdown_pin:o}):Blockly.Arduino.setups_["setup_green_digital_write_"+o]=JST.inout_digital_write_setups({dropdown_pin:o}),t+=JST.inout_digital_write({dropdown_pin:o,dropdown_stat:e})},Blockly.Blocks.inout_digital_write={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_DIGITAL"),helpUrl:RoboBlocks.getHelpUrl("inout_digital_write"),examples:["inout_digital_read_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL,keys:["LANG_ADVANCED_INOUT_DIGITAL_WRITE","LANG_ADVANCED_INOUT_DIGITAL_WRITE_PIN","LANG_ADVANCED_INOUT_DIGITAL_WRITE_STATE","LANG_ADVANCED_INOUT_DIGITAL_WRITE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_WRITE")).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_WRITE_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)),this.appendValueInput("STAT").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_WRITE_STATE")).setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,"code"),this.setInputsInline(!0),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_WRITE_TOOLTIP"))}},Blockly.Arduino.inout_digital_mode=function(){return"pinMode("+Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)+","+this.getFieldValue("MODE")+");"},Blockly.Blocks.inout_digital_mode={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_DIGITAL"),helpUrl:RoboBlocks.getHelpUrl("inout_digital_mode"),examples:["inout_digital_mode_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL,keys:["LANG_ADVANCED_INOUT_DIGITAL_MODE","LANG_ADVANCED_INOUT_DIGITAL_MODE_PIN","LANG_ADVANCED_INOUT_DIGITAL_MODE_MODE","LANG_ADVANCED_INOUT_DIGITAL_MODE_OUTPUT","LANG_ADVANCED_INOUT_DIGITAL_MODE_INPUT","LANG_ADVANCED_INOUT_DIGITAL_MODE_PULLUP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE")).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_MODE")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_OUTPUT")||"OUTPUT","OUTPUT"],[RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_INPUT")||"INPUT","INPUT"],[RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_PULLUP")||"PULLUP","INPUT_PULLUP"]]),"MODE").setAlign(Blockly.ALIGN_RIGHT),this.setPreviousStatement(!0,"code"),this.setInputsInline(!0),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_INOUT_DIGITAL_MODE_TOOLTIP"))}},Blockly.Arduino.inout_highlow=function(){var o=this.getFieldValue("BOOL");return[JST.inout_highlow({bool_value:o}),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.inout_highlow={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_DIGITAL"),helpUrl:RoboBlocks.getHelpUrl("inout_highlow"),tags:["input","output"],examples:["inout_highlow_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL,keys:["LANG_ADVANCED_HIGHLOW_HIGH","LANG_ADVANCED_HIGHLOW_LOW","LANG_ADVANCED_HIGHLOW_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL),this.appendDummyInput("").appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_ADVANCED_HIGHLOW_HIGH")||"HIGH","HIGH"],[RoboBlocks.locales.getKey("LANG_ADVANCED_HIGHLOW_LOW")||"LOW","LOW"]]),"BOOL"),this.setOutput(!0,Boolean),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_HIGHLOW_TOOLTIP"))}},Blockly.Arduino.lcd_clear=function(){return JST.lcd_clear({})},Blockly.Blocks.lcd_clear={category:RoboBlocks.locales.getKey("LANG_CATEGORY_SCREEN"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_LCD"),tags:["lcd","screen"],helpUrl:RoboBlocks.getHelpUrl("lcd_clear"),examples:["lcd_clear_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_SCREEN,colour:RoboBlocks.LANG_COLOUR_SCREEN_LCD,keys:["LANG_LCD_CLEAR","LANG_LCD_CLEAR_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_SCREEN_LCD),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_LCD_CLEAR")).appendField(new Blockly.FieldImage("img/blocks/lcd.svg",52*options.zoom,24*options.zoom)),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_LCD_CLEAR_TOOLTIP"))}},Blockly.Arduino.lcd_def=function(){var o={};return o.lcd_1=this.getFieldValue("LCD_1"),o.lcd_2=this.getFieldValue("LCD_2"),o.lcd_3=this.getFieldValue("LCD_3"),o.lcd_4=this.getFieldValue("LCD_4"),o.lcd_5=this.getFieldValue("LCD_5"),o.lcd_6=this.getFieldValue("LCD_6"),Blockly.Arduino.definitions_.define_lcd=JST.lcd_def_definitions({}),Blockly.Arduino.definitions_.declare_var_LCD=JST.lcd_def_declare(o),Blockly.Arduino.setups_.setup_lcd_=JST.lcd_def_setups({}),""},Blockly.Blocks.lcd_def={category:RoboBlocks.locales.getKey("LANG_CATEGORY_SCREEN"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_LCD"),tags:["lcd","screen"],helpUrl:RoboBlocks.getHelpUrl("lcd_def"),examples:["lcd_def_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_SCREEN,colour:RoboBlocks.LANG_COLOUR_SCREEN_LCD,keys:["LANG_LCD_DEF","LANG_LCD_PINS","LANG_LCD_DEF_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_SCREEN_LCD),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_LCD_DEF")).appendField(new Blockly.FieldImage("img/blocks/lcd.svg",52*options.zoom,24*options.zoom)),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_LCD_PINS")).appendField(new Blockly.FieldTextInput("11"),"LCD_1").appendField(new Blockly.FieldTextInput("12"),"LCD_2").appendField(new Blockly.FieldTextInput("3"),"LCD_3").appendField(new Blockly.FieldTextInput("4"),"LCD_4").appendField(new Blockly.FieldTextInput("5"),"LCD_5").appendField(new Blockly.FieldTextInput("6"),"LCD_6"),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_LCD_DEF_TOOLTIP"))}},Blockly.Arduino.lcd_print=function(){var o=Blockly.Arduino.valueToCode(this,"VAL",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(this,"XCOOR",Blockly.Arduino.ORDER_ATOMIC),t=Blockly.Arduino.valueToCode(this,"YCOOR",Blockly.Arduino.ORDER_ATOMIC),l="",_=RoboBlocks.findPinMode(e);return l+=_.code,e=_.pin,_=RoboBlocks.findPinMode(t),l+=_.code,t=_.pin,_=RoboBlocks.findPinMode(o),l+=_.code,o=_.pin,"TRUE"===this.getFieldValue("POS")?l+=JST.lcd_print_pos({val:o,xcoor:e,ycoor:t}):l+=JST.lcd_print({val:o}),l=l.replace(/&quot;/g,'"')},Blockly.Blocks.lcd_print={category:RoboBlocks.locales.getKey("LANG_CATEGORY_SCREEN"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_LCD"),tags:["lcd","screen"],helpUrl:RoboBlocks.getHelpUrl("lcd_print"),examples:["lcd_print_example1.bly","lcd_print_example2.bly"],category_colour:RoboBlocks.LANG_COLOUR_SCREEN,colour:RoboBlocks.LANG_COLOUR_SCREEN_LCD,keys:["LANG_LCD_PRINT","LANG_LCD_PRINT_POSITION","LANG_LCD_PRINT_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_SCREEN_LCD),this.appendValueInput("VAL").appendField(RoboBlocks.locales.getKey("LANG_LCD_PRINT")).appendField(new Blockly.FieldImage("img/blocks/lcd.svg",52*options.zoom,24*options.zoom)),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_LCD_PRINT_POSITION")).appendField(new Blockly.FieldCheckbox("FALSE"),"POS").setAlign(Blockly.ALIGN_RIGHT),this.last_pos=this.getFieldValue("POS"),this.getPosition(),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_LCD_PRINT_TOOLTIP"))},getPosition:function(){try{this.removeInput("XCOOR"),this.removeInput("YCOOR")}catch(o){}"TRUE"===this.getFieldValue("POS")&&(this.appendValueInput("XCOOR").appendField("row").setAlign(Blockly.ALIGN_RIGHT),this.appendValueInput("YCOOR").appendField("column").setAlign(Blockly.ALIGN_RIGHT))},onchange:function(){this.getFieldValue("POS")!==this.last_pos&&(this.getPosition(),this.last_pos=this.getFieldValue("POS"))},mutationToDom:function(){var o=document.createElement("mutation");return"TRUE"===this.getFieldValue("POS")?o.setAttribute("fixed",!0):"FALSE"===this.getFieldValue("POS")&&o.setAttribute("fixed",!1),o},domToMutation:function(o){this.setFieldValue(o.getAttribute("fixed"),"POS"),"TRUE"===this.getFieldValue("POS")&&(this.appendValueInput("XCOOR").appendField("row").setAlign(Blockly.ALIGN_RIGHT),this.appendValueInput("YCOOR").appendField("column").setAlign(Blockly.ALIGN_RIGHT))}},Blockly.Arduino.lcd_setBacklight=function(){var o=this.getFieldValue("STATE");return JST.lcd_setBacklight({state:o})},Blockly.Blocks.lcd_setBacklight={category:RoboBlocks.locales.getKey("LANG_CATEGORY_SCREEN"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_LCD"),helpUrl:RoboBlocks.getHelpUrl("lcd_setBacklight"),tags:["lcd","screen"],examples:["lcd_setBacklight_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_SCREEN,colour:RoboBlocks.LANG_COLOUR_SCREEN_LCD,keys:["LANG_LCD_SETBACKLIGHT","LANG_LCD_SETBACKLIGHT_CLOSE","LANG_LCD_SETBACKLIGHT_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_SCREEN_LCD),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_LCD_SETBACKLIGHT")).appendField(new Blockly.FieldDropdown([["LOW","LOW"],["HIGH","HIGH"]]),"STATE").appendField(RoboBlocks.locales.getKey("LANG_LCD_SETBACKLIGHT_CLOSE")).appendField(new Blockly.FieldImage("img/blocks/lcd.svg",52*options.zoom,24*options.zoom)),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_LCD_SETBACKLIGHT_TOOLTIP"))}},Blockly.Arduino.logic_boolean=function(){return["TRUE"===this.getFieldValue("BOOL")?"true":"false",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.logic_boolean={category:RoboBlocks.locales.getKey("LANG_CATEGORY_LOGIC"),helpUrl:RoboBlocks.getHelpUrl("logic_boolean"),examples:["logic_boolean_example.bly"],tags:["logic"],category_colour:RoboBlocks.LANG_COLOUR_LOGIC,colour:RoboBlocks.LANG_COLOUR_LOGIC,keys:["LANG_LOGIC_BOOLEAN_TRUE","LANG_LOGIC_BOOLEAN_FALSE"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LOGIC),this.setOutput(!0,Boolean),this.appendDummyInput().appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_LOGIC_BOOLEAN_TRUE"),"TRUE"],[RoboBlocks.locales.getKey("LANG_LOGIC_BOOLEAN_FALSE"),"FALSE"]]),"BOOL"),this.setTooltip(RoboBlocks.locales.getKey("LANG_LOGIC_BOOLEAN_TOOLTIP"))}},Blockly.Arduino.logic_compare=function(){var o=this.getFieldValue("OP"),e=Blockly.Arduino.logic_compare.OPERATORS[o],t="=="===e||"!="===e?Blockly.Arduino.ORDER_EQUALITY:Blockly.Arduino.ORDER_RELATIONAL,l=Blockly.Arduino.valueToCode(this,"A",t)||"",_=Blockly.Arduino.valueToCode(this,"B",t)||"",s="",n=RoboBlocks.findPinMode(l);return s+=n.code,l=n.pin,n=RoboBlocks.findPinMode(_),s+=n.code,_=n.pin,s+=JST.logic_compare({argument0:l,argument1:_,operator:e}),[s,t]},Blockly.Arduino.logic_compare.OPERATORS={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="},Blockly.Blocks.logic_compare={category:RoboBlocks.locales.getKey("LANG_CATEGORY_LOGIC"),helpUrl:RoboBlocks.getHelpUrl("logic_compare"),examples:["logic_compare_example.bly"],tags:["logic"],category_colour:RoboBlocks.LANG_COLOUR_LOGIC,colour:RoboBlocks.LANG_COLOUR_LOGIC,keys:["LANG_LOGIC_COMPARE_TOOLTIP_EQ","LANG_LOGIC_COMPARE_TOOLTIP_NEQ","LANG_LOGIC_COMPARE_TOOLTIP_LT","LANG_LOGIC_COMPARE_TOOLTIP_LTE","LANG_LOGIC_COMPARE_TOOLTIP_GT","LANG_LOGIC_COMPARE_TOOLTIP_GTE"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LOGIC),this.setOutput(!0,Boolean),this.appendValueInput("A"),this.appendValueInput("B").appendField(new Blockly.FieldDropdown(this.OPERATORS),"OP"),this.setInputsInline(!0);var o=this;this.setTooltip(function(){var e=o.getFieldValue("OP");return Blockly.Blocks.logic_compare.TOOLTIPS[e]})}},Blockly.Blocks.logic_compare.OPERATORS=[["=","EQ"],["≠","NEQ"],["<","LT"],["≤","LTE"],[">","GT"],["≥","GTE"]],Blockly.Blocks.logic_compare.TOOLTIPS={EQ:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_EQ"),NEQ:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_NEQ"),LT:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_LT"),LTE:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_LTE"),GT:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_GT"),GTE:RoboBlocks.locales.getKey("LANG_LOGIC_COMPARE_TOOLTIP_GTE")},Blockly.Arduino.logic_operation=function(){var o="",e="AND"===this.getFieldValue("OP")?"&&":"OR"===this.getFieldValue("OP")?"||":"",t="&&"===e?Blockly.Arduino.ORDER_LOGICAL_AND:"||"===e?Blockly.Arduino.ORDER_LOGICAL_OR:Blockly.Arduino.ORDER_NONE,l=Blockly.Arduino.valueToCode(this,"A",t)||"",_=Blockly.Arduino.valueToCode(this,"B",t)||"",s=RoboBlocks.findPinMode(l);return o+=s.code,l=s.pin,s=RoboBlocks.findPinMode(_),o+=s.code,_=s.pin,"XOR"===this.getFieldValue("OP")?o+="((!("+l+"))&&("+_+")||((!("+_+"))&&("+l+")))":"XNOR"===this.getFieldValue("OP")?o+="(("+l+")&&("+_+")||((!("+_+"))&&(!("+l+"))))":"IMPLIES"===this.getFieldValue("OP")?o+="((!("+l+"))||("+_+"))":o+="("+l+") "+e+" ("+_+")",[o,t]},Blockly.Blocks.logic_operation={category:RoboBlocks.locales.getKey("LANG_CATEGORY_LOGIC"),helpUrl:RoboBlocks.getHelpUrl("logic_operation"),examples:["logic_operation_example.bly"],tags:["logic"],category_colour:RoboBlocks.LANG_COLOUR_LOGIC,colour:RoboBlocks.LANG_COLOUR_LOGIC,keys:["LANG_LOGIC_OPERATION_AND","LANG_LOGIC_OPERATION_OR","LANG_LOGIC_OPERATION_XOR","LANG_LOGIC_OPERATION_XNOR","LANG_LOGIC_OPERATION_IMPLIES","LANG_LOGIC_OPERATION_TOOLTIP_AND","LANG_LOGIC_OPERATION_TOOLTIP_OR","LANG_LOGIC_OPERATION_TOOLTIP_XOR","LANG_LOGIC_OPERATION_TOOLTIP_XNOR","LANG_LOGIC_OPERATION_TOOLTIP_IMPLIES"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LOGIC),this.setOutput(!0,Boolean),this.appendValueInput("A").setCheck(Boolean),this.appendValueInput("B").setCheck(Boolean).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_AND")||"AND","AND"],[RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_OR")||"OR","OR"],[RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_XOR")||"XOR","XOR"],[RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_XNOR")||"XNOR","XNOR"],[RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_IMPLIES")||"IMPLIES","IMPLIES"]]),"OP"),this.setInputsInline(!0);var o=this;this.setTooltip(function(){var e=o.getFieldValue("OP");return Blockly.Blocks.logic_operation.TOOLTIPS[e]})}},Blockly.Blocks.logic_operation.TOOLTIPS={AND:RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_TOOLTIP_AND"),OR:RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_TOOLTIP_OR"),XOR:RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_TOOLTIP_XOR"),XNOR:RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_TOOLTIP_XNOR"),IMPLIES:RoboBlocks.locales.getKey("LANG_LOGIC_OPERATION_TOOLTIP_IMPLIES")},Blockly.Arduino.logic_negate=function(){var o=Blockly.Arduino.ORDER_UNARY_PREFIX,e=Blockly.Arduino.valueToCode(this,"BOOL",o)||"false",t="",l=RoboBlocks.findPinMode(e);return t+=l.code,e=l.pin,t+=JST.logic_negate({argument0:e}),[t,o]},Blockly.Blocks.logic_negate={category:RoboBlocks.locales.getKey("LANG_CATEGORY_LOGIC"),helpUrl:RoboBlocks.getHelpUrl("logic_negate"),examples:["logic_negate_example.bly"],tags:["logic"],category_colour:RoboBlocks.LANG_COLOUR_LOGIC,colour:RoboBlocks.LANG_COLOUR_LOGIC,keys:["LANG_LOGIC_NEGATE_INPUT_NOT","LANG_LOGIC_NEGATE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_LOGIC),this.setOutput(!0,Boolean),this.appendValueInput("BOOL").setCheck(Boolean).appendField(RoboBlocks.locales.getKey("LANG_LOGIC_NEGATE_INPUT_NOT")),this.setTooltip(RoboBlocks.locales.getKey("LANG_LOGIC_NEGATE_TOOLTIP"))}},Blockly.Arduino.math_arithmetic=function(){var o=this.getFieldValue("OP"),e=Blockly.Arduino.math_arithmetic.OPERATORS[o],t=e[0],l=e[1],_=Blockly.Arduino.valueToCode(this,"A",l)||"",s=Blockly.Arduino.valueToCode(this,"B",l)||"",n="",i=RoboBlocks.findPinMode(_);return n+=i.code,_=i.pin,i=RoboBlocks.findPinMode(s),n+=i.code,s=i.pin,t?(n+=JST.math_arithmetic({argument0:_,argument1:s,operator:t}),[n,l]):(n=JST.math_arithmetic_pow({argument0:_,argument1:s}),[n,Blockly.Arduino.ORDER_UNARY_POSTFIX])},Blockly.Arduino.math_arithmetic.OPERATORS={ADD:[" + ",Blockly.Arduino.ORDER_ADDITIVE],MINUS:[" - ",Blockly.Arduino.ORDER_ADDITIVE],MULTIPLY:[" * ",Blockly.Arduino.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",Blockly.Arduino.ORDER_MULTIPLICATIVE],POWER:[null,Blockly.Arduino.ORDER_NONE]},Blockly.Blocks.math_arithmetic={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("math_arithmetic"),examples:["math_arithmetic_example.bly"],tags:["math"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_MATH_ARITHMETIC_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_MATH),this.setOutput(!0,Number),this.appendValueInput("A").setCheck(Number),this.appendValueInput("B").setCheck(Number).appendField(new Blockly.FieldDropdown(this.OPERATORS),"OP"),this.setInputsInline(!0);this.setTooltip(RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP"))}},Blockly.Blocks.math_arithmetic.OPERATORS=[["+","ADD"],["-","MINUS"],["×","MULTIPLY"],["÷","DIVIDE"],["^","POWER"]],Blockly.Blocks.math_arithmetic.TOOLTIPS={ADD:RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP_ADD"),MINUS:RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP_MINUS"),MULTIPLY:RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP_MULTIPLY"),DIVIDE:RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP_DIVIDE"),POWER:RoboBlocks.locales.getKey("LANG_MATH_ARITHMETIC_TOOLTIP_POWER")},Blockly.Arduino.math_modulo=function(){var o=Blockly.Arduino.valueToCode(this,"DIVIDEND",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"",e=Blockly.Arduino.valueToCode(this,"DIVISOR",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"",t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,t+=JST.math_modulo({argument0:o,argument1:e}),[t,Blockly.Arduino.ORDER_MULTIPLICATIVE]},Blockly.Blocks.math_modulo={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("math_modulo"),examples:["math_arithmetic_example.bly"],tags:["math"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_MATH_MODULO_TOOLTIP"],init:function(){this.setColour(this.colour),this.setOutput(!0,Number),this.appendValueInput("DIVIDEND").setCheck(Number),this.appendValueInput("DIVISOR").setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendField("%"),this.setInputsInline(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_MATH_MODULO_TOOLTIP"))}},Blockly.Arduino.math_number=function(){var o=window.parseFloat(this.getFieldValue("NUM"));return[o,o<0?Blockly.Arduino.ORDER_UNARY_PREFIX:Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.math_number={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("math_number"),examples:["math_number_example.bly"],tags:["math"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_MATH_NUMBER_TOOLTIP"],init:function(){this.setColour(this.colour),this.appendDummyInput().appendField(new Blockly.FieldTextInput("0",Blockly.Blocks.math_number.validator),"NUM"),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_MATH_NUMBER_TOOLTIP"))}},Blockly.Blocks.math_number.validator=function(o){var e=window.parseFloat(o||0);return window.isNaN(e)?null:String(e)},Blockly.Arduino.math_random=function(){var o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(this,"DMAX",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,Blockly.Arduino.definitions_.define_random_bitOut=JST.math_random_bitOut({}),Blockly.Arduino.definitions_.define_random_seedOut=JST.math_random_seedOut({}),Blockly.Arduino.setups_.setup_randomseed="unsigned long seed =seedOut(31);\n  randomSeed(seed);\n",t+=JST.math_random({value_num:o,value_dmax:e}),[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.math_random={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("math_random"),examples:["math_random_example.bly"],tags:["math"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_ADVANCED_MATH_RANDOM","LANG_ADVANCED_MATH_RANDOM_AND","LANG_ADVANCED_MATH_RANDOM_TOOLTIP"],init:function(){this.setColour(this.colour),this.appendValueInput("NUM",Number).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_RANDOM")).setCheck(Number),this.appendValueInput("DMAX",Number).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_RANDOM_AND")).setCheck(Number),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_RANDOM_TOOLTIP"))}},Blockly.Arduino.math_to_number=function(){var o=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_NONE),e="";return e+="("+(this.getFieldValue("CAST")||"")+")("+o+")",[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.math_to_number={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),tags:["math"],helpUrl:RoboBlocks.getHelpUrl("math_to_number"),examples:["math_to_number_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_ADVANCED_MATH_CAST","LANG_VARIABLES_TYPE_INTEGER","LANG_VARIABLES_TYPE_INTEGER_LONG","LANG_VARIABLES_TYPE_BYTE","LANG_VARIABLES_TYPE_FLOAT"],init:function(){this.setColour(this.colour),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_CAST")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER"),"int"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER_LONG"),"long"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BYTE"),"byte"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_FLOAT"),"float"]]),"CAST"),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_CAST_TOOLTIP"))}},Blockly.Arduino.math_sinusoid=function(){var o=Blockly.Arduino.valueToCode(this,"AMPLITUDE",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(this,"FREQ",Blockly.Arduino.ORDER_NONE),t=Blockly.Arduino.valueToCode(this,"PHASE",Blockly.Arduino.ORDER_NONE),l=Blockly.Arduino.valueToCode(this,"OFFSET",Blockly.Arduino.ORDER_NONE);return["("+o+")*sin((6.28318530717959e-06)*(("+e+")*("+Blockly.Arduino.valueToCode(this,"TIME",Blockly.Arduino.ORDER_NONE)+"))+0.017453292519943*("+t+"))+("+l+")",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.math_sinusoid={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),tags:["math"],helpUrl:RoboBlocks.getHelpUrl("math_sinusoid"),examples:["math_sinusoid_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_ADVANCED_MATH_SINUSOID","LANG_ADVANCED_MATH_SINUSOID_AMPLITUDE","LANG_ADVANCED_MATH_SINUSOID_FREQ","LANG_ADVANCED_MATH_SINUSOID_PHASE","LANG_ADVANCED_MATH_SINUSOID_OFFSET","LANG_ADVANCED_MATH_SINUSOID_TIME","LANG_ADVANCED_MATH_SINUSOID_TOOLTIP"],init:function(){this.setColour(this.colour),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.appendValueInput("AMPLITUDE").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_AMPLITUDE")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.appendValueInput("FREQ").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_FREQ")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.appendValueInput("PHASE").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_PHASE")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.appendValueInput("OFFSET").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_OFFSET")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.appendValueInput("TIME").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_TIME")).setAlign(Blockly.Blocks.ALIGN_RIGHT),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_MATH_SINUSOID_TOOLTIP"))}},Blockly.Arduino.math_single=function(){var o,e,t=this.getFieldValue("OP"),l="";if("NEG"===t)return o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_UNARY_PREFIX)||"",e=RoboBlocks.findPinMode(o),l+=e.code,"-"===(o=e.pin)[0]&&(o=" "+o),l+="-"+o,[l,Blockly.Arduino.ORDER_UNARY_PREFIX];"SIN"===t||"COS"===t||"TAN"===t?(o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"",l+=(e=RoboBlocks.findPinMode(o)).code,o=e.pin):"LOG10"===t?l="":(o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE)||"",l+=(e=RoboBlocks.findPinMode(o)).code,o=e.pin);var _=3.14159;switch(t){case"ABS":l+="abs("+o+")";break;case"ROOT":l+="sqrt("+o+")";break;case"LN":l+="log("+o+")";break;case"EXP":l+="exp("+o+")";break;case"POW10":l+="pow(10,"+o+")";break;case"SIN":l+="sin("+o+" / 180 * "+_+")";break;case"COS":l+="cos("+o+" / 180 * "+_+")";break;case"TAN":l+="tan("+o+" / 180 * "+_+")"}if(l)return[l,Blockly.Arduino.ORDER_UNARY_POSTFIX];switch(t){case"LOG10":o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE)||"",l+=(e=RoboBlocks.findPinMode(o)).code,l+="log("+(o=e.pin)+") / log(10)";break;case"ASIN":l+="asin("+o+") / "+_+" * 180";break;case"ACOS":l+="acos("+o+") / "+_+" * 180";break;case"ATAN":l+="atan("+o+") / "+_+" * 180";break;default:throw"Unknown math operator: "+t}return[l,Blockly.Arduino.ORDER_MULTIPLICATIVE]},Blockly.Blocks.math_single={category:RoboBlocks.locales.getKey("LANG_CATEGORY_MATH"),helpUrl:RoboBlocks.getHelpUrl("math_single"),examples:["math_single_example.bly"],tags:["math"],category_colour:RoboBlocks.LANG_COLOUR_MATH,colour:RoboBlocks.LANG_COLOUR_MATH,keys:["LANG_MATH_SINGLE_OP_ROOT","LANG_MATH_SINGLE_OP_ABSOLUTE","LANG_MATH_SINGLE_TOOLTIP_ROOT","LANG_MATH_SINGLE_TOOLTIP_ABS","LANG_MATH_SINGLE_TOOLTIP_NEG","LANG_MATH_SINGLE_TOOLTIP_LN","LANG_MATH_SINGLE_TOOLTIP_LOG10","LANG_MATH_SINGLE_TOOLTIP_EXP","LANG_MATH_SINGLE_TOOLTIP_POW10"],init:function(){this.setColour(this.colour),this.setOutput(!0,Number),this.appendValueInput("NUM").setCheck(Number).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_MATH_SINGLE_OP_ROOT")||"SQR ROOT","ROOT"],[RoboBlocks.locales.getKey("LANG_MATH_SINGLE_OP_ABSOLUTE")||"ABS","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]),"OP");var o=this;this.setTooltip(function(){var e=o.getFieldValue("OP");return Blockly.Blocks.math_single.TOOLTIPS[e]})}},Blockly.Blocks.math_single.TOOLTIPS={ROOT:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_ROOT"),ABS:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_ABS"),NEG:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_NEG"),LN:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_LN"),LOG10:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_LOG10"),EXP:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_EXP"),POW10:RoboBlocks.locales.getKey("LANG_MATH_SINGLE_TOOLTIP_POW10")},Blockly.Arduino.pin_analog=function(){return[this.getFieldValue("PIN")||"",Blockly.Arduino.ORDER_NONE]},Blockly.Blocks.pin_analog={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_ANALOG"),helpUrl:RoboBlocks.getHelpUrl("pin_analog"),examples:["inout_analog_read_example.bly"],tags:["input","output"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED,keys:["LANG_VARIABLES_PIN_ANALOG","LANG_VARIABLES_PIN_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED),this.appendDummyInput("").appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_ANALOG")).appendField(new Blockly.FieldDropdown(profiles.default.analog),"PIN"),this.setInputsInline(!0),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_TOOLTIP"))}},Blockly.Arduino.pin_digital=function(){return[this.getFieldValue("PIN")||"",Blockly.Arduino.ORDER_NONE]},Blockly.Blocks.pin_digital={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_DIGITAL"),helpUrl:RoboBlocks.getHelpUrl("pin_digital"),examples:["inout_digital_read_example.bly"],tags:["input","output"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL,keys:["LANG_VARIABLES_PIN_DIGITAL","LANG_VARIABLES_PIN_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL),this.appendDummyInput("").appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_DIGITAL")).appendField(new Blockly.FieldDropdown(profiles.default.digital),"PIN"),this.setInputsInline(!0),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_TOOLTIP"))}},Blockly.Arduino.pin_pwm=function(){return[this.getFieldValue("PIN")||"",Blockly.Arduino.ORDER_NONE]},Blockly.Blocks.pin_pwm={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_DIGITAL"),helpUrl:RoboBlocks.getHelpUrl("pin_pwm"),examples:["inout_analog_write_example.bly"],tags:["input","output"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL,keys:["LANG_VARIABLES_PIN_PWM","LANG_VARIABLES_PIN_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_DIGITAL),this.appendDummyInput("").appendField(new Blockly.FieldImage("img/blocks/pwm_signal.svg",24*options.zoom,24*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_PWM")).appendField(new Blockly.FieldDropdown(profiles.default.pwm),"PIN"),this.setInputsInline(!0),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_PIN_TOOLTIP"))}},Blockly.Arduino.serial_available=function(){var o=Blockly.Arduino.statementToCode(this,"DO");return o=o.replace(/&quot;/g,'"'),Blockly.Arduino.setups_.setup_serial=JST.serial_parseint_setups({bitrate:profiles.default.serial}),JST.serial_available({branch:o})},Blockly.Blocks.serial_available={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),helpUrl:RoboBlocks.getHelpUrl("serial_available"),tags:["serial","communication"],examples:["serial_available_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,keys:["LANG_ADVANCED_SERIAL_AVAILABLE","LANG_CONTROLS_REPEAT_INPUT_DO","LANG_ADVANCED_SERIAL_AVAILABLE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_AVAILABLE")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.appendStatementInput("DO").appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_REPEAT_INPUT_DO")),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_AVAILABLE_TOOLTIP"))}},Blockly.Arduino.serial_parseint=function(){Blockly.Arduino.setups_.setup_serial=JST.serial_parseint_setups({bitrate:profiles.default.serial});return["Serial.parseInt()",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.serial_parseint={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),helpUrl:RoboBlocks.getHelpUrl("serial_parseint"),tags:["serial","communication"],examples:["logic_operation_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,keys:["LANG_ADVANCED_SERIAL_PARSEINT","LANG_ADVANCED_SERIAL_PARSEINT_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PARSEINT")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PARSEINT_TOOLTIP"))}},Blockly.Arduino.serial_print=function(){var o=Blockly.Arduino.valueToCode(this,"CONTENT",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,Blockly.Arduino.setups_.setup_serial=JST.serial_print_setups({bitrate:profiles.default.serial}),e+=JST.serial_print({content:o})},Blockly.Blocks.serial_print={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),helpUrl:RoboBlocks.getHelpUrl("serial_print"),tags:["serial","communication"],examples:["serial_print_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,keys:["LANG_ADVANCED_SERIAL_PRINT","LANG_ADVANCED_SERIAL_PRINT_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendValueInput("CONTENT",String).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PRINT")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PRINT_TOOLTIP"))}},Blockly.Arduino.serial_println=function(){var o=Blockly.Arduino.valueToCode(this,"CONTENT",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,Blockly.Arduino.setups_.setup_serial=JST.serial_println_setups({bitrate:profiles.default.serial}),e+=JST.serial_println({content:o})},Blockly.Blocks.serial_println={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),helpUrl:RoboBlocks.getHelpUrl("serial_println"),tags:["serial","communication"],examples:["serial_print_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,keys:["LANG_ADVANCED_SERIAL_PRINTLN","LANG_ADVANCED_SERIAL_PRINTLN_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendValueInput("CONTENT",String).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PRINTLN")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_PRINTLN_TOOLTIP"))}},Blockly.Arduino.serial_read=function(){return Blockly.Arduino.setups_.setup_serial=JST.serial_read_setups({bitrate:profiles.default.serial}),[JST.serial_read({}),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.serial_read={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),helpUrl:RoboBlocks.getHelpUrl("serial_read"),examples:["serial_read_example.bly"],tags:["serial","communication"],category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,keys:["LANG_ADVANCED_SERIAL_READ","LANG_ADVANCED_SERIAL_READ_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_READ")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setOutput(!0,String),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_READ_TOOLTIP"))}},Blockly.Arduino.serial_readstring=function(){return Blockly.Arduino.setups_.setup_serial=JST.serial_readstring_setups({bitrate:profiles.default.serial}),[JST.serial_readstring({}),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.serial_readstring={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),tags:["serial","communication"],helpUrl:RoboBlocks.getHelpUrl("serial_readstring"),examples:["serial_readstring_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,keys:["LANG_ADVANCED_SERIAL_READSTRING","LANG_ADVANCED_SERIAL_READSTRING_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_READSTRING")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setOutput(!0,String),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_READSTRING_TOOLTIP"))}},Blockly.Arduino.advanced_conversion=function(){var o=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE),e="",t=RoboBlocks.findPinMode(o);e+=t.code,o=t.pin;var l=this.getFieldValue("CONV");return e+=JST.advanced_conversion({value_num:o,convertion:l}),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.advanced_conversion={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),tags:["serial","communication"],helpUrl:RoboBlocks.getHelpUrl("advanced_conversion"),examples:["advanced_conversion_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,keys:["LANG_ADVANCED_CONVERSION_CONVERT","LANG_ADVANCED_CONVERSION_DECIMAL","LANG_ADVANCED_CONVERSION_HEXADECIMAL","LANG_ADVANCED_CONVERSION_OCTAL","LANG_ADVANCED_CONVERSION_BINARY","LANG_ADVANCED_CONVERSION_VALUE","LANG_ADVANCED_CONVERSION_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_CONVERT")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_DECIMAL")||"DEC","DEC"],[RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_HEXADECIMAL")||"HEX","HEX"],[RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_OCTAL")||"OCT","OCT"],[RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_BINARY")||"BIN","BIN"]]),"CONV"),this.appendValueInput("NUM",Number).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_VALUE")).setAlign(Blockly.ALIGN_RIGHT).setCheck(Number),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_CONVERSION_TOOLTIP"))}},Blockly.Arduino.serial_timeout=function(){var o=Blockly.Arduino.valueToCode(this,"TIMEOUT",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.setups_.setup_serial_timeout="Serial.setTimeout("+o+");\n",""},Blockly.Blocks.serial_timeout={category:RoboBlocks.locales.getKey("LANG_CATEGORY_COMMUNICATION"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_USB"),tags:["serial","communication"],helpUrl:RoboBlocks.getHelpUrl("serial_timeout"),category_colour:RoboBlocks.LANG_COLOUR_COMMUNICATION,colour:RoboBlocks.LANG_COLOUR_COMMUNICATION_USB,tags:["serial"],examples:["serial_read_example.bly"],keys:["LANG_ADVANCED_SERIAL_TIMEOUT","LANG_ADVANCED_SERIAL_TIMEOUT_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_COMMUNICATION_USB),this.appendValueInput("TIMEOUT",Number).appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_TIMEOUT")).appendField(new Blockly.FieldImage("img/blocks/usb.svg",52*options.zoom,24*options.zoom)),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_TIMEOUT_TOOLTIP"))}},Blockly.Arduino.serial_special=function(){return["'"+this.getFieldValue("CHAR")+"'",Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.serial_special={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("serial_special"),tags:["serial"],examples:["serial_special_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_ADVANCED_SERIAL_SPECIAL","LANG_ADVANCED_SERIAL_SPECIAL_TAB","LANG_ADVANCED_SERIAL_SPECIAL_CARRIAGE_RETURN","LANG_ADVANCED_SERIAL_SPECIAL_LINE_FEED","LANG_ADVANCED_SERIAL_SPECIAL_QUOTE","LANG_ADVANCED_SERIAL_SPECIAL_DOUBLE_QUOTE","LANG_ADVANCED_SERIAL_SPECIAL_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_TAB")||"TAB","\\t"],[RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_CARRIAGE_RETURN")||"CARRIAGE RETURN","\\r"],[RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_LINE_FEED")||"LINE FEED","\\n"],[RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_QUOTE")||"QUOTE","\\'"],[RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_DOUBLE_QUOTE")||"DOUBLE_QUOTE",'\\"']]),"CHAR"),this.setOutput(!0,String),this.setTooltip(RoboBlocks.locales.getKey("LANG_ADVANCED_SERIAL_SPECIAL_TOOLTIP"))}},Blockly.Arduino.text=function(){return[Blockly.Arduino.quote_(this.getFieldValue("TEXT")),Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text"),examples:["controls_setupLoop_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_TEXT_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendDummyInput().appendField('"').appendField(new Blockly.FieldTextInput(""),"TEXT").appendField('"'),this.setOutput(!0,String),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_TEXT_TOOLTIP"))}},Blockly.Arduino.text_append=function(){var o=Blockly.Arduino.valueToCode(this,"VAR",Blockly.Arduino.ORDER_NONE)||"",e=Blockly.Arduino.valueToCode(this,"TEXT",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"",t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,t+=o+" += String("+e+");\n"},Blockly.Blocks.text_append={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_append"),examples:["text_append_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_APPEND_TO","LANG_TEXT_APPEND_APPENDTEXT","LANG_TEXT_APPEND_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("VAR").appendField(RoboBlocks.locales.getKey("LANG_TEXT_APPEND_TO")),this.appendValueInput("TEXT").appendField(RoboBlocks.locales.getKey("LANG_TEXT_APPEND_APPENDTEXT")),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setInputsInline(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_APPEND_TOOLTIP"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setTitleValue(e,"VAR")},getVariables:function(){var o=Blockly.Variables.allUsedVariables,e=[];if(o.length>0)for(var t in o)e.push([o[t],o[t]]);else e.push(["",""]);return e},onchange:function(){}},Blockly.Arduino.text_equalsIgnoreCase=function(){var o=Blockly.Arduino.valueToCode(this,"STRING1",Blockly.Arduino.ORDER_NONE);o=o.replace(/&quot;/g,'"');var e=Blockly.Arduino.valueToCode(this,"STRING2",Blockly.Arduino.ORDER_NONE);e=e.replace(/&quot;/g,'"');var t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,t+=JST.text_equalsIgnoreCase({string1:o,string2:e}),[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text_equalsIgnoreCase={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_equalsIgnoreCase"),examples:["text_equalsIgnoreCase_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_EQUALSIGNORECASE_EQUAL","LANG_TEXT_EQUALSIGNORECASE_QUESTION","LANG_TEXT_EQUALSIGNORECASE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("STRING1"),this.appendValueInput("STRING2").appendField(RoboBlocks.locales.getKey("LANG_TEXT_EQUALSIGNORECASE_EQUAL")).setAlign(Blockly.ALIGN_RIGHT),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_TEXT_EQUALSIGNORECASE_QUESTION")),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_EQUALSIGNORECASE_TOOLTIP"))}},Blockly.Arduino.text_join=function(){var o,e="";if(0===this.itemCount_)return["''",Blockly.Arduino.ORDER_ATOMIC];if(1===this.itemCount_){var t=Blockly.Arduino.valueToCode(this,"ADD0",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"";return o=RoboBlocks.findPinMode(t),e+=o.code,t=o.pin,e+="String("+t+")",[e,Blockly.Arduino.ORDER_UNARY_POSTFIX]}var l=Blockly.Arduino.valueToCode(this,"ADD0",Blockly.Arduino.ORDER_NONE)||"";e=(o=RoboBlocks.findPinMode(l)).code;for(var _="String("+(l=o.pin),s=1;s<this.itemCount_;s++)l=Blockly.Arduino.valueToCode(this,"ADD"+s,Blockly.Arduino.ORDER_NONE)||"",e+=(o=RoboBlocks.findPinMode(l)).code,_+=") + String("+(l=o.pin);return e+=_+")",[e,Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Blocks.text_join={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),helpUrl:RoboBlocks.getHelpUrl("text_join"),examples:["text_join_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_JOIN_Field_CREATEWITH","LANG_TEXT_JOIN_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("ADD0").appendField(RoboBlocks.locales.getKey("LANG_TEXT_JOIN_Field_CREATEWITH")),this.appendValueInput("ADD1"),this.setOutput(!0,String),this.setMutator(new Blockly.Mutator(["text_create_join_item"])),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_JOIN_TOOLTIP")),this.itemCount_=2},mutationToDom:function(){var o=document.createElement("mutation");return o.setAttribute("items",this.itemCount_),o},domToMutation:function(o){for(var e=0;e<this.itemCount_;e++)this.removeInput("ADD"+e);for(this.itemCount_=window.parseInt(o.getAttribute("items"),10),e=0;e<this.itemCount_;e++){var t=this.appendValueInput("ADD"+e);0===e&&t.appendField(RoboBlocks.locales.getKey("LANG_TEXT_JOIN_Field_CREATEWITH"))}0===this.itemCount_&&this.appendDummyInput("EMPTY").appendField(new Blockly.FieldImage(Blockly.pathToBlockly+"media/quote0.png",12,12)).appendField(new Blockly.FieldImage(Blockly.pathToBlockly+"media/quote1.png",12,12))},decompose:function(o){var e=o.newBlock("text_create_join_container");e.initSvg();for(var t=e.getInput("STACK").connection,l=0;l<this.itemCount_;l++){var _=o.newBlock("text_create_join_item");_.initSvg(),t.connect(_.previousConnection),t=_.nextConnection}return e},compose:function(o){if(0===this.itemCount_)this.removeInput("EMPTY");else for(var e=this.itemCount_-1;e>=0;e--)this.removeInput("ADD"+e);this.itemCount_=0;for(var t=o.getInputTargetBlock("STACK");t;){var l=this.appendValueInput("ADD"+this.itemCount_);0===this.itemCount_&&l.appendField(RoboBlocks.locales.getKey("LANG_TEXT_JOIN_Field_CREATEWITH")),t.valueConnection_&&l.connection.connect(t.valueConnection_),this.itemCount_++,t=t.nextConnection&&t.nextConnection.targetBlock()}0===this.itemCount_&&this.appendDummyInput("EMPTY").appendField(new Blockly.FieldImage(Blockly.pathToBlockly+"media/quote0.png",12,12)).appendField(new Blockly.FieldImage(Blockly.pathToBlockly+"media/quote1.png",12,12))},saveConnections:function(o){for(var e=o.getInputTargetBlock("STACK"),t=0;e;){var l=this.getInput("ADD"+t);e.valueConnection_=l&&l.connection.targetConnection,t++,e=e.nextConnection&&e.nextConnection.targetBlock()}}},Blockly.Blocks.text_create_join_container={colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_CREATE_JOIN_TITLE_JOIN","LANG_TEXT_CREATE_JOIN_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_TEXT_CREATE_JOIN_TITLE_JOIN")),this.appendStatementInput("STACK").setCheck("text_join"),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_CREATE_JOIN_TOOLTIP")),this.contextMenu=!1}},Blockly.Blocks.text_create_join_item={colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM","LANG_TEXT_CREATE_JOIN_ITEM_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM")),this.setPreviousStatement(!0,"text_join"),this.setNextStatement(!0,"text_join"),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_CREATE_JOIN_ITEM_TOOLTIP")),this.contextMenu=!1}},Blockly.Arduino.text_length=function(){var o=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"",e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,e+=JST.text_length({argument0:o}),[e,Blockly.Arduino.ORDER_UNARY_POSTFIX]},Blockly.Blocks.text_length={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_length"),examples:["text_length_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_LENGTH_INPUT_LENGTH","LANG_TEXT_LENGTH_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("VALUE").setCheck([String,Array]).appendField(RoboBlocks.locales.getKey("LANG_TEXT_LENGTH_INPUT_LENGTH")),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_LENGTH_TOOLTIP"))}},Blockly.Arduino.text_substring=function(){var o=Blockly.Arduino.valueToCode(this,"STRING1",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(this,"FROM",Blockly.Arduino.ORDER_NONE),t=Blockly.Arduino.valueToCode(this,"TO",Blockly.Arduino.ORDER_NONE),l="",_=RoboBlocks.findPinMode(o);return l+=_.code,o=_.pin,_=RoboBlocks.findPinMode(e),l+=_.code,e=_.pin,_=RoboBlocks.findPinMode(t),l+=_.code,t=_.pin,l+=JST.text_substring({string1:o,from:e,to:t}),[l,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text_substring={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_substring"),examples:["text_substring_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_SUBSTRING","LANG_TEXT_SUBSTRING_FROM","LANG_TEXT_SUBSTRING_TO","LANG_TEXT_SUBSTRING_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("STRING1").appendField(RoboBlocks.locales.getKey("LANG_TEXT_SUBSTRING")),this.appendValueInput("FROM").appendField(RoboBlocks.locales.getKey("LANG_TEXT_SUBSTRING_FROM")).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT),this.appendValueInput("TO").appendField(RoboBlocks.locales.getKey("LANG_TEXT_SUBSTRING_TO")).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_SUBSTRING_TOOLTIP"))}},Blockly.Arduino.text_search=function(){var o=Blockly.Arduino.valueToCode(this,"STRING1",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(this,"STRING2",Blockly.Arduino.ORDER_NONE),t=this.getFieldValue("POSITION"),l="",_=RoboBlocks.findPinMode(o);return l+=_.code,o=_.pin,_=RoboBlocks.findPinMode(e),l+=_.code,e=_.pin,l="FIRST"===t?e+".indexOf("+o+")":e+".lastIndexOf("+o+")",[l,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text_search={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_search"),examples:["text_search_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_SEARCH","LANG_TEXT_IN","LANG_TEXT_FIRST","LANG_TEXT_LAST","LANG_TEXT_SEARCH_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("STRING1").appendField(RoboBlocks.locales.getKey("LANG_TEXT_SEARCH")),this.appendValueInput("STRING2").appendField(RoboBlocks.locales.getKey("LANG_TEXT_IN")),this.appendDummyInput("").appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_TEXT_FIRST"),"FIRST"],[RoboBlocks.locales.getKey("LANG_TEXT_LAST"),"LAST"]]),"POSITION"),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_SEARCH_TOOLTIP"))}},Blockly.Arduino.text_contains=function(){var o=Blockly.Arduino.valueToCode(this,"STRING1",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(this,"STRING2",Blockly.Arduino.ORDER_NONE),t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,t="("+e+".indexOf("+o+")>0)",[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text_contains={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_contains"),examples:["text_contains_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_CONTAINS","LANG_TEXT_EXPRESSION","LANG_TEXT_CONTAINS_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("STRING2").appendField(RoboBlocks.locales.getKey("LANG_TEXT_CONTAINS")),this.appendValueInput("STRING1").appendField(RoboBlocks.locales.getKey("LANG_TEXT_EXPRESSION")),this.setInputsInline(!0),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_CONTAINS_TOOLTIP"))}},Blockly.Arduino.text_to_text=function(){var o=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_NONE),e=this.getFieldValue("CAST")||"",t="";return t+="char"==e?"("+e+")("+o+")":"String("+o+")",[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.text_to_text={category:RoboBlocks.locales.getKey("LANG_CATEGORY_TEXT"),tags:["text"],helpUrl:RoboBlocks.getHelpUrl("text_to_text"),examples:["text_to_text_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_TEXT,colour:RoboBlocks.LANG_COLOUR_TEXT,keys:["LANG_TEXT_CAST","LANG_VARIABLES_TYPE_STRING","LANG_VARIABLES_TYPE_CHAR"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_TEXT),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_TEXT_CAST")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_STRING"),"String"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_CHAR"),"char"]]),"CAST"),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_TEXT_SUBSTRING_TOOLTIP"))}},Blockly.Arduino.variables_get=function(){var o=this.getFieldValue("VAR")||"";return void 0!==RoboBlocks.variables[this.getFieldValue("VAR")]&&(this.var_type=RoboBlocks.variables[this.getFieldValue("VAR")][0]),[o,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.variables_get={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_get"),tags:["variables"],examples:["variables_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_VARIABLES,colour:RoboBlocks.LANG_COLOUR_VARIABLES,keys:["LANG_VARIABLES_GET","LANG_VARIABLES_GET_TOOLTIP","LANG_VARIABLES_CALL_WITHOUT_DEFINITION"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendDummyInput("DUMMY").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GET")).appendField(new Blockly.FieldDropdown(this.getVariables()),"VAR"),this.setOutput(!0),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_GET_TOOLTIP"))},getVariables:function(){var o=Blockly.Variables.allVariables(),e=[];if(o.length>0)for(var t in o)e.push([o[t],o[t]]);else e.push(["",""]);return e},onchange:function(){if(this.workspace){this.last_variable=this.getFieldValue("VAR"),this.last_variables||(this.last_variables=Blockly.Variables.allVariables());var o=Blockly.Variables.allVariables();for(var e in o)Blockly.Variables.allVariables()[e]!==this.last_variables[e]&&(this.getInput("DUMMY").removeField("VAR"),this.getInput("DUMMY").appendField(new Blockly.FieldDropdown(this.getVariables()),"VAR"),this.setFieldValue(this.last_variable,"VAR"),this.last_variables=Blockly.Variables.allVariables());try{this.exists()?this.setWarningText(null):this.setWarningText(RoboBlocks.locales.getKey("LANG_VARIABLES_CALL_WITHOUT_DEFINITION"))}catch(o){}}},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setTitleValue(e,"VAR")},exists:function(){for(var o in Blockly.Variables.allVariables())if(Blockly.Variables.allVariables()[o]===this.getFieldValue("VAR"))return!0;return!1}},Blockly.Arduino.variables_set=function(){var o=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"",e=this.getFieldValue("VAR")||"",t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,t+=JST.variables_set({varName:e,varValue:o})},Blockly.Blocks.variables_set={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_set"),tags:["variables"],examples:["variables_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_VARIABLES,colour:RoboBlocks.LANG_COLOUR_VARIABLES,keys:["LANG_VARIABLES_SET","LANG_VARIABLES_SET_AS","LANG_VARIABLES_SET_TOOLTIP","LANG_VARIABLES_CALL_WITHOUT_DEFINITION"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_SET")).appendField(new Blockly.FieldDropdown(this.getVariables()),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_SET_AS")).setAlign(Blockly.ALIGN_RIGHT),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_SET_TOOLTIP"))},getVariables:function(){var o=Blockly.Variables.allVariables(),e=[];if(o.length>0)for(var t in o)e.push([o[t],o[t]]);else e.push(["",""]);return e},onchange:function(){if(this.workspace){this.last_field_value=this.getFieldValue("VAR"),this.last_variables||(this.last_variables=Blockly.Variables.allVariables());var o=Blockly.Variables.allVariables();for(var e in o)Blockly.Variables.allVariables()[e]!==this.last_variables[e]&&(this.getInput("VALUE").removeField("VAR"),this.new_field=new Blockly.FieldDropdown(this.getVariables()),this.new_field.setValue(this.last_field_value),this.getInput("VALUE").insertFieldAt(1,this.new_field,"VAR"),this.last_variables=Blockly.Variables.allVariables());try{this.exists()?this.setWarningText(null):this.setWarningText(RoboBlocks.locales.getKey("LANG_VARIABLES_CALL_WITHOUT_DEFINITION"))}catch(o){}}},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setTitleValue(e,"VAR")},exists:function(){for(var o in Blockly.Variables.allVariables())if(Blockly.Variables.allVariables()[o]===this.getFieldValue("VAR"))return!0;return!1}},Blockly.Arduino.variables_local=function(){var o,e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),t=this.getFieldValue("VAR")||"",l="",_=!1,s=RoboBlocks.findPinMode(e);l+=s.code,e=s.pin;for(var n in Blockly.Arduino.definitions_)if(Blockly.Arduino.definitions_[n].search(e+" \\(")>=0){_=!0;break}if(e.search('"')>=0||e.search("substring\\(")>=0)l+=(o="String")+" "+t+"="+e+";\n";else if(_)for(n in Blockly.Arduino.definitions_)Blockly.Arduino.definitions_[n].search(e)>=0&&(l+=(o="int"===Blockly.Arduino.definitions_[n].substring(0,3)||"//b"===Blockly.Arduino.definitions_[n].substring(0,3)?"int *"===Blockly.Arduino.definitions_[n].substring(0,5)||"int _"===Blockly.Arduino.definitions_[n].substring(0,5)?"int *":"int":"Str"===Blockly.Arduino.definitions_[n].substring(0,3)?"String":"")+" "+t+"="+e+";\n");else"{"===e[0]?(l+=(o="int *")+t+"=(int*)malloc(3*sizeof(int));\n",l+=t+"[0]="+(e=(e=(e=e.replace("{","")).replace("}","")).split(","))[0]+";\n"+t+"[1]="+e[1]+";\n"+t+"[2]="+e[2]+";\n"):this.isVariable(e)?l+=(o=RoboBlocks.variables[e][0])+" "+t+"="+e+";\n":e.search("readJoystick")>=0?(l+=(o="int *")+t+"=(int*)malloc(3*sizeof(int));\n",l+=t+"="+e+";\n"):e.search("analogRead")>=0||e.search("digitalRead")>=0||e.search("Distanc")>=0||!isNaN(parseFloat(e))||e.search("random")>=0||e.search("map")>=0||e.search("\\[")>=0||e.search("abs")>=0||e.search("sqrt")>=0||e.search("log")>=0||e.search("exp")>=0||e.search("pow")>=0||e.search("\\+")?l+=(o="int")+" "+t+"="+e+";\n":l+=(o="unknown")+" "+t+"="+e+";\n";return RoboBlocks.variables[t]=[o,"local"],RoboBlocks.variables["analogRead("+t+")"]=[o,"local"],RoboBlocks.variables["digitalRead("+t+")"]=[o,"local"],l},Blockly.Blocks.variables_local={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_local"),tags:["variables"],examples:["variables_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_VARIABLES,colour:RoboBlocks.LANG_COLOUR_VARIABLES,keys:["LANG_VARIABLES_LOCAL","LANG_VARIABLES_LOCAL_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL")).appendField(new Blockly.FieldTextInput(""),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL_EQUALS")),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL_TOOLTIP"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setFieldValue(e,"VAR")},isVariable:function(o){for(var e in Blockly.Variables.allVariables())if(Blockly.Variables.allVariables()[e]===o)return!0;return!1},validName:function(o){if(o&&o.length>0){for(var e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length);for(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/([ ])/g,"_")).replace(/([áàâä])/g,"a")).replace(/([éèêë])/g,"e")).replace(/([íìîï])/g,"i")).replace(/([óòôö])/g,"o")).replace(/([úùûü])/g,"u")).replace(/([ñ])/g,"n")).replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|<>\-\&\Ç\%\=\~\{\}\¿\¡\"\@\:\;\-\"\·\|\º\ª\¨\'\·\̣\─\ç\`\´\¨\^])/g,""),e=0;e<o.length&&!isNaN(parseFloat(o[e]));)o=o.substring(1,o.length);for(var t in Blockly.Arduino.RESERVED_WORDS_){if(o===Blockly.Arduino.RESERVED_WORDS_.split(",")[t]){this.setWarningText("Reserved word"),o="";break}this.setWarningText(null)}}return o},onchange:function(){if(this.last_variable!==this.getFieldValue("VAR")){var o=this.getFieldValue("VAR");o=this.validName(o);try{this.setFieldValue(o,"VAR")}catch(o){}this.last_variable=o}}},Blockly.Arduino.variables_local_type=function(){var o=this.getFieldValue("VAR_TYPE"),e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),t=this.getFieldValue("VAR")||"",l="",_=RoboBlocks.findPinMode(e);return l+=_.code,e=_.pin,l+=o+" "+t+"="+e+";\n",RoboBlocks.variables[t]=[o,"local"],RoboBlocks.variables["analogRead("+t+")"]=[o,"local"],RoboBlocks.variables["digitalRead("+t+")"]=[o,"local"],l},Blockly.Blocks.variables_local_type={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_local_type"),tags:["variables"],examples:["variables_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_VARIABLES,colour:RoboBlocks.LANG_COLOUR_VARIABLES,keys:["LANG_VARIABLES_LOCAL","LANG_VARIABLES_LOCAL_TYPE","LANG_VARIABLES_TYPE_STRING","LANG_VARIABLES_TYPE_INTEGER","LANG_VARIABLES_TYPE_INTEGER_LONG","LANG_VARIABLES_TYPE_BYTE","LANG_VARIABLES_TYPE_BOOL","LANG_VARIABLES_TYPE_FLOAT","LANG_VARIABLES_GLOBAL_EQUALS","LANG_VARIABLES_LOCAL_TOOLTIP2"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL")).appendField(new Blockly.FieldTextInput(""),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL_TYPE")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_STRING"),"String"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER"),"int"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER_LONG"),"long"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BYTE"),"byte"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BOOL"),"bool"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_FLOAT"),"float"]]),"VAR_TYPE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_EQUALS")),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_LOCAL_TOOLTIP2"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setFieldValue(e,"VAR")},isVariable:Blockly.Blocks.variables_local.isVariable,validName:Blockly.Blocks.variables_local.validName,onchange:Blockly.Blocks.variables_local.onchange},Blockly.Arduino.variables_global=function(){var o,e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),t=this.getFieldValue("VAR")||"",l=!1,_=RoboBlocks.findPinMode(e);Blockly.Arduino.setups_["pinMode"+e]=_.code,e=_.pin;for(var s in Blockly.Arduino.definitions_)if(Blockly.Arduino.definitions_[s].search(e+" \\(")>=0){l=!0;break}if(e.search('"')>=0||e.search("substring\\(")>=0)o="String",Blockly.Arduino.definitions_["declare_var"+t]=o+" "+t+"="+e+";";else if(l){for(s in Blockly.Arduino.definitions_)if(Blockly.Arduino.definitions_[s].search(e)>=0){o="int"===Blockly.Arduino.definitions_[s].substring(0,3)||"//b"===Blockly.Arduino.definitions_[s].substring(0,3)?"int *"===Blockly.Arduino.definitions_[s].substring(0,5)||"int _"===Blockly.Arduino.definitions_[s].substring(0,5)?"int *":"int":"Str"===Blockly.Arduino.definitions_[s].substring(0,3)?"String":"",Blockly.Arduino.definitions_["declare_var"+t]=o+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+e+";\n";break}}else"{"===e[0]?(o="int *",e=(e=(e=e.replace("{","")).replace("}","")).split(","),Blockly.Arduino.definitions_["declare_var"+t]=o+t+"=(int*)malloc(3*sizeof(int));\n",Blockly.Arduino.setups_["define_var"+t]=t+"[0]="+e[0]+";\n  "+t+"[1]="+e[1]+";\n  "+t+"[2]="+e[2]+";\n"):this.isVariable(e)?(o=RoboBlocks.variables[e][0],Blockly.Arduino.definitions_["declare_var"+t]=o+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+e+";\n"):e.search("readJoystick")>=0?(o="int *",Blockly.Arduino.definitions_["declare_var"+t]=o+t+"=(int*)malloc(3*sizeof(int));\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+e+";\n"):e.search("analogRead")>=0||e.search("digitalRead")>=0||e.search("Distanc")>=0||!isNaN(parseFloat(e))||e.search("random")>=0||e.search("map")>=0||e.search("\\[")>=0||e.search("abs")>=0||e.search("sqrt")>=0||e.search("log")>=0||e.search("log")>=0||e.search("exp")>=0||e.search("pow")>=0||e.search("\\+")?(o="int",isNaN(parseFloat(e))?(e.search("analogRead")>=0||e.search("digitalRead")>=0||e.search("Distanc")>=0||e.search("random")>=0||e.search("map")>=0||e.search("\\[")>=0||e.search("abs")>=0||e.search("sqrt")>=0||e.search("log")>=0||e.search("log")>=0||e.search("exp")>=0||e.search("pow")>=0||e.search("\\+"))&&(Blockly.Arduino.definitions_["declare_var"+t]=o+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+e+";\n"):Blockly.Arduino.definitions_["declare_var"+t]=o+" "+t+"="+e+";\n"):(o="unknown",Blockly.Arduino.definitions_["declare_var"+t]=o+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+e+";\n");return RoboBlocks.variables[t]=[o,"global"],RoboBlocks.variables["analogRead("+t+")"]=[o,"global"],RoboBlocks.variables["digitalRead("+t+")"]=[o,"global"],""},Blockly.Blocks.variables_global={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_global"),tags:["variables"],examples:["variables_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_VARIABLES,colour:RoboBlocks.LANG_COLOUR_VARIABLES,keys:["LANG_VARIABLES_GLOBAL","LANG_VARIABLES_GLOBAL_EQUALS","LANG_VARIABLES_GLOBAL_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL")).appendField(new Blockly.FieldTextInput(""),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_EQUALS")),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_TOOLTIP"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setFieldValue(e,"VAR")},isVariable:Blockly.Blocks.variables_local.isVariable,validName:Blockly.Blocks.variables_local.validName,onchange:Blockly.Blocks.variables_local.onchange},Blockly.Arduino.variables_global_type=function(){var o=this.getFieldValue("VAR_TYPE"),e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),t=this.getFieldValue("VAR")||"",t=this.getFieldValue("VAR")||"",l="",_=RoboBlocks.findPinMode(e);return l+=_.code,e=_.pin,Blockly.Arduino.definitions_["declare_var"+t]=o+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+e+";\n",RoboBlocks.variables[t]=[o,"global"],RoboBlocks.variables["analogRead("+t+")"]=[o,"global"],RoboBlocks.variables["digitalRead("+t+")"]=[o,"global"],""},Blockly.Blocks.variables_global_type={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_global_type"),tags:["variables"],examples:["variables_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_VARIABLES,colour:RoboBlocks.LANG_COLOUR_VARIABLES,keys:["LANG_VARIABLES_GLOBAL","LANG_VARIABLES_GLOBAL_TYPE","LANG_VARIABLES_TYPE_STRING","LANG_VARIABLES_TYPE_INTEGER","LANG_VARIABLES_TYPE_INTEGER_LONG","LANG_VARIABLES_TYPE_BYTE","LANG_VARIABLES_TYPE_BOOL","LANG_VARIABLES_TYPE_FLOAT","LANG_VARIABLES_GLOBAL_EQUALS","LANG_VARIABLES_GLOBAL_TOOLTIP2"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL")).appendField(new Blockly.FieldTextInput(""),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_TYPE")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_STRING"),"String"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER"),"int"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER_LONG"),"long"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BYTE"),"byte"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BOOL"),"bool"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_FLOAT"),"float"]]),"VAR_TYPE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_EQUALS")),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_TOOLTIP2"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setFieldValue(e,"VAR")},isVariable:Blockly.Blocks.variables_local.isVariable,onchange:Blockly.Blocks.variables_local.onchange,validName:Blockly.Blocks.variables_local.validName},Blockly.Arduino.variables_global_volatile_type=function(){var o=this.getFieldValue("VAR_TYPE"),e=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),t=this.getFieldValue("VAR")||"",t=this.getFieldValue("VAR")||"",l="",_=RoboBlocks.findPinMode(e);return l+=_.code,e=_.pin,Blockly.Arduino.definitions_["declare_var"+t]="volatile "+o+" "+t+";\n",Blockly.Arduino.setups_["define_var"+t]=t+"="+e+";\n",RoboBlocks.variables[t]=["volatile "+o,"global"],RoboBlocks.variables["analogRead("+t+")"]=[o,"global"],RoboBlocks.variables["digitalRead("+t+")"]=[o,"global"],""},Blockly.Blocks.variables_global_volatile_type={category:RoboBlocks.locales.getKey("LANG_CATEGORY_VARIABLES"),helpUrl:RoboBlocks.getHelpUrl("variables_global_volatile_type"),tags:["variables"],examples:["variables_global_volatile_type_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_VARIABLES,colour:RoboBlocks.LANG_COLOUR_VARIABLES,keys:["LANG_VARIABLES_GLOBAL_VOLATILE","LANG_VARIABLES_GLOBAL_TYPE","LANG_VARIABLES_TYPE_INTEGER","LANG_VARIABLES_TYPE_INTEGER_LONG","LANG_VARIABLES_TYPE_BYTE","LANG_VARIABLES_TYPE_BOOL","LANG_VARIABLES_TYPE_FLOAT","LANG_VARIABLES_GLOBAL_EQUALS","LANG_VARIABLES_GLOBAL_VOLATILE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_VARIABLES),this.appendValueInput("VALUE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_VOLATILE")).appendField(new Blockly.FieldTextInput(""),"VAR").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_TYPE")).appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER"),"int"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_INTEGER_LONG"),"long"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BYTE"),"byte"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_BOOL"),"bool"],[RoboBlocks.locales.getKey("LANG_VARIABLES_TYPE_FLOAT"),"float"]]),"VAR_TYPE").appendField(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_EQUALS")),this.setInputsInline(!1),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_VARIABLES_GLOBAL_VOLATILE_TOOLTIP"))},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(o,e){Blockly.Names.equals(o,this.getFieldValue("VAR"))&&this.setFieldValue(e,"VAR")},isVariable:Blockly.Blocks.variables_local.isVariable,onchange:Blockly.Blocks.variables_local.onchange,validName:Blockly.Blocks.variables_local.validName},Blockly.Arduino.controls_execute=function(){var o=Blockly.Arduino.valueToCode(this,"CONTENT",Blockly.Arduino.ORDER_ATOMIC),e="";if(o=o.replace(/^"/,""),(o=o.replace(/"$/g,"")).match(/^#include /)){var t=JST.controls_execute({content:o});"define_include"in Blockly.Arduino.definitions_?Blockly.Arduino.definitions_.define_include+=t:Blockly.Arduino.definitions_.define_include=t}else e+=JST.controls_execute({content:o});return e},Blockly.Blocks.controls_execute={category:RoboBlocks.locales.getKey("LANG_CATEGORY_CONTROLS"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_CONTROL"),helpUrl:RoboBlocks.getHelpUrl("controls_execute"),examples:["controls_execute_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_CONTROL,colour:RoboBlocks.LANG_COLOUR_CONTROL,keys:["LANG_CONTROLS_EXECUTE","LANG_CONTROLS_EXECUTE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_CONTROL),this.appendValueInput("CONTENT",String).appendField(RoboBlocks.locales.getKey("LANG_CONTROLS_EXECUTE")),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_CONTROLS_EXECUTE_TOOLTIP"))}},Blockly.Arduino.inout_spi_begin=function(){var o=Blockly.Arduino.valueToCode(this,"BAUDRATE",Blockly.Arduino.ORDER_ATOMIC);return Blockly.Arduino.definitions_.include_spi="#include <SPI.h>\n","SPI.beginTransaction(SPISettings("+o+","+this.getFieldValue("ORDER")+","+this.getFieldValue("MODE")+"));\n"},Blockly.Blocks.inout_spi_begin={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","spi"],helpUrl:RoboBlocks.getHelpUrl("inout_spi_begin"),examples:["inout_spi_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_SPI_BEGIN","LANG_SPI_BAUDRATE","LANG_SPI_BEGIN_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendValueInput("BAUDRATE").appendField(RoboBlocks.locales.getKey("LANG_SPI_BEGIN")).appendField(RoboBlocks.locales.getKey("LANG_SPI_BAUDRATE")).setAlign(Blockly.ALIGN_RIGHT),this.appendDummyInput("").appendField(new Blockly.FieldDropdown([["MSB","MSBFIRST"],["LSB","LSBFIRST"]]),"ORDER").setAlign(Blockly.ALIGN_RIGHT),this.appendDummyInput("").appendField(new Blockly.FieldDropdown([["MODE0","SPI_MODE0"],["MODE1","SPI_MODE1"],["MODE2","SPI_MODE2"],["MODE3","SPI_MODE3"]]),"MODE").setAlign(Blockly.ALIGN_RIGHT),this.setOutput(!1,null),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_SPI_BEGIN_TOOLTIP"))}},Blockly.Arduino.inout_spi_transfer=function(){var o=Blockly.Arduino.valueToCode(this,"DATA",Blockly.Arduino.ORDER_ATOMIC),e=this.getFieldValue("MODE");Blockly.Arduino.definitions_.include_spi="#include <SPI.h>\n";var t="";return"1"===e?t+="SPI.transfer("+o+");\n":"2"===e&&(t+="SPI.transfer16("+o+");\n"),t},Blockly.Blocks.inout_spi_transfer={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","spi"],helpUrl:RoboBlocks.getHelpUrl("inout_spi_transfer"),examples:["inout_spi_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_SPI_TRANSFER","LANG_SPI_TRANSFER_ONE_BYTE","LANG_SPI_TRANSFER_TWO_BYTES","LANG_SPI_TRANSFER_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendValueInput("DATA").appendField(RoboBlocks.locales.getKey("LANG_SPI_TRANSFER")).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT),this.appendDummyInput("").appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_SPI_TRANSFER_ONE_BYTE"),"1"],[RoboBlocks.locales.getKey("LANG_SPI_TRANSFER_TWO_BYTES"),"2"]]),"MODE").setAlign(Blockly.ALIGN_RIGHT),this.setOutput(!1,null),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setInputsInline(!1),this.setTooltip(RoboBlocks.locales.getKey("LANG_SPI_TRANSFER_TOOLTIP"))}},Blockly.Arduino.inout_spi_transfer_recv=function(){var o=Blockly.Arduino.valueToCode(this,"DATA",Blockly.Arduino.ORDER_ATOMIC),e=this.getFieldValue("MODE");Blockly.Arduino.definitions_.include_spi="#include <SPI.h>\n";var t="";return"1"===e?t+="SPI.transfer("+o+")":"2"===e&&(t+="SPI.transfer16("+o+")"),[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.inout_spi_transfer_recv={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","spi"],helpUrl:RoboBlocks.getHelpUrl("inout_spi_transfer_recv"),examples:["inout_spi_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_SPI_TRANSFER","LANG_SPI_TRANSFER_ONE_BYTE","LANG_SPI_TRANSFER_TWO_BYTES","LANG_SPI_TRANSFER_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendValueInput("DATA").appendField(RoboBlocks.locales.getKey("LANG_SPI_TRANSFER")).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT),this.appendDummyInput("").appendField(new Blockly.FieldDropdown([[RoboBlocks.locales.getKey("LANG_SPI_TRANSFER_ONE_BYTE"),"1"],[RoboBlocks.locales.getKey("LANG_SPI_TRANSFER_TWO_BYTES"),"2"]]),"MODE").setAlign(Blockly.ALIGN_RIGHT),this.setOutput(!0,Number),this.setPreviousStatement(!1,"code"),this.setNextStatement(!1,"code"),this.setInputsInline(!1),this.setTooltip(RoboBlocks.locales.getKey("LANG_SPI_TRANSFER_TOOLTIP"))}},Blockly.Arduino.inout_spi_end=function(){Blockly.Arduino.definitions_.include_spi="#include <SPI.h>\n";return"SPI.endTransaction();\n"},Blockly.Blocks.inout_spi_end={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","spi"],helpUrl:RoboBlocks.getHelpUrl("inout_spi_end"),examples:["inout_spi_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_SPI_END","LANG_SPI_END_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendDummyInput("").appendField(RoboBlocks.locales.getKey("LANG_SPI_END")),this.setOutput(!1,null),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_SPI_END_TOOLTIP"))}},Blockly.Arduino.button=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,RoboBlocks.isVariable(o)?e+=JST.zum_button_setups({dropdown_pin:o,pullup:"INPUT"}):Blockly.Arduino.setups_["setup_button_"+o]=JST.zum_button_setups({dropdown_pin:o,pullup:"INPUT"}),e+=JST.bq_button({dropdown_pin:o}),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.button={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","button"],helpUrl:RoboBlocks.getHelpUrl("button"),examples:["button_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_BQ_BUTTON","LANG_BQ_BUTTON_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_BQ_BUTTON")).appendField(new Blockly.FieldImage("img/blocks/pushbutton.png",52*options.zoom,24*options.zoom)).setCheck(Number).appendField(RoboBlocks.locales.getKey("LANG_BQ_BUTTON_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT),this.setOutput(!0,Boolean),this.setTooltip(RoboBlocks.locales.getKey("LANG_BQ_BUTTON_TOOLTIP"))}},Blockly.Arduino.button_case=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);e+=t.code,o=t.pin,RoboBlocks.isVariable(o)?e+=JST.zum_button_setups({dropdown_pin:o,pullup:"INPUT"}):Blockly.Arduino.setups_["setup_button_"+o]=JST.zum_button_setups({dropdown_pin:o,pullup:"INPUT"});var l="",_="";return l+=Blockly.Arduino.statementToCode(this,"PRESSED"),_+=Blockly.Arduino.statementToCode(this,"NOT_PRESSED"),l=l.replace(/&quot;/g,'"'),_=_.replace(/&quot;/g,'"'),e+="if ("+JST.bq_button({dropdown_pin:o})+"==LOW){\n"+l+"\n}\nelse{\n"+_+"\n}\n"},Blockly.Blocks.button_case={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","button"],helpUrl:RoboBlocks.getHelpUrl("button_case"),examples:["button_case_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_BQ_BUTTON","LANG_BQ_BUTTON_PIN","LANG_BUTTON_PRESSED","LANG_BUTTON_NOT_PRESSED","LANG_BQ_BUTTON_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_BQ_BUTTON")).appendField(new Blockly.FieldImage("img/blocks/pushbutton.png",52*options.zoom,24*options.zoom)).setCheck(Number).appendField(RoboBlocks.locales.getKey("LANG_BQ_BUTTON_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT),this.setOutput(!1,null),this.appendStatementInput("PRESSED").setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_BUTTON_PRESSED")),this.appendStatementInput("NOT_PRESSED").setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_BUTTON_NOT_PRESSED")),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_BQ_BUTTON_TOOLTIP"))}},Blockly.Arduino.zum_button=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),e="",t=RoboBlocks.findPinMode(o);return e+=t.code,o=t.pin,pullup="INPUT_PULLUP",RoboBlocks.isVariable(o)?e+=JST.zum_button_setups({dropdown_pin:o,pullup:pullup}):Blockly.Arduino.setups_["setup_button_"+o]=JST.zum_button_setups({dropdown_pin:o,pullup:pullup}),e+=JST.zum_button({dropdown_pin:o}),[e,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.zum_button={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","button"],helpUrl:RoboBlocks.getHelpUrl("zum_button"),examples:["zum_button_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_ZUM_BUTTON","LANG_ZUM_BUTTON_PIN","LANG_ZUM_BUTTON_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ZUM_BUTTON")).appendField(RoboBlocks.locales.getKey("LANG_ZUM_BUTTON_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)),this.appendDummyInput().appendField("pull-up?").appendField(new Blockly.FieldCheckbox("FALSE"),"PULLUP").setAlign(Blockly.ALIGN_RIGHT),this.setOutput(!0,Boolean),this.setTooltip(RoboBlocks.locales.getKey("LANG_ZUM_BUTTON_TOOLTIP")),this.setInputsInline(!1)}},Blockly.Arduino.joystick_dir=function(){var o=Blockly.Arduino.valueToCode(this,"PINX",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(this,"PINY",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,t="57.295779513082320876798154814105*atan2((float)(analogRead("+o+")-512),(float)(analogRead("+e+")-512))",[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.joystick_dir={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["joystick"],helpUrl:RoboBlocks.getHelpUrl("joystick_dir"),examples:["joystick_dir_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_BQ_JOYSTICK_DIR","LANG_BQ_JOYSTICK_PIN_X","LANG_BQ_JOYSTICK_PIN_Y","LANG_BQ_JOYSTICK_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_DIR")).appendField(new Blockly.FieldImage("img/blocks/joystick.png",52*options.zoom,24*options.zoom)),this.appendValueInput("PINX").appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_PIN_X")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT).setCheck(Number),this.appendValueInput("PINY").appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_PIN_Y")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT).setCheck(Number),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_TOOLTIP"))}},Blockly.Arduino.joystick_mag=function(){var o=Blockly.Arduino.valueToCode(this,"PINX",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(this,"PINY",Blockly.Arduino.ORDER_ATOMIC),t="",l=RoboBlocks.findPinMode(o);return t+=l.code,o=l.pin,l=RoboBlocks.findPinMode(e),t+=l.code,e=l.pin,t="min(100,0.1953125*sqrt(pow((float)(analogRead("+o+")-512),2)+pow((float)(analogRead("+e+")-512),2)))",[t,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.joystick_mag={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["joystick"],helpUrl:RoboBlocks.getHelpUrl("joystick_mag"),examples:["joystick_dir_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_BQ_JOYSTICK_MAG","LANG_BQ_JOYSTICK_PIN_X","LANG_BQ_JOYSTICK_PIN_Y","LANG_BQ_JOYSTICK_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendDummyInput().appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_MAG")).appendField(new Blockly.FieldImage("img/blocks/joystick.png",52*options.zoom,24*options.zoom)),this.appendValueInput("PINX").appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_PIN_X")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT).setCheck(Number),this.appendValueInput("PINY").appendField(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_PIN_Y")).appendField(new Blockly.FieldImage("img/blocks/analog_signal.svg",24*options.zoom,24*options.zoom)).setAlign(Blockly.ALIGN_RIGHT).setCheck(Number),this.setOutput(!0,Number),this.setTooltip(RoboBlocks.locales.getKey("LANG_BQ_JOYSTICK_TOOLTIP"))}},Blockly.Arduino.zum_piezo_buzzerav=function(){var o=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)||"",e=Blockly.Arduino.valueToCode(this,"TONE",Blockly.Arduino.ORDER_ATOMIC),t=Blockly.Arduino.valueToCode(this,"DURA",Blockly.Arduino.ORDER_ATOMIC),l="",_=RoboBlocks.findPinMode(o);return l+=_.code,o=_.pin,_=RoboBlocks.findPinMode(e),l+=_.code,e=_.pin,_=RoboBlocks.findPinMode(t),l+=_.code,t=_.pin,l+=JST.zum_piezo_buzzerav({dropdown_pin:o,Buzztone:e,delay_time:t})},Blockly.Blocks.zum_piezo_buzzerav={category:RoboBlocks.locales.getKey("LANG_CATEGORY_SOUND"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_BUZZER"),tags:["buzzer"],helpUrl:RoboBlocks.getHelpUrl("zum_piezo_buzzerav"),examples:["zum_piezo_buzzerav_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_SOUND,colour:RoboBlocks.LANG_COLOUR_SOUND_BUZZER,keys:["LANG_ZUM_PIEZO_BUZZERAV","LANG_ZUM_PIEZO_BUZZERAV_PIN","LANG_ZUM_PIEZO_BUZZERAV_TONE","LANG_ZUM_PIEZO_BUZZERAV_DURATION","LANG_ZUM_PIEZO_BUZZERAV_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_SOUND_BUZZER),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_ZUM_PIEZO_BUZZERAV")).appendField(new Blockly.FieldImage("img/blocks/buzzer.svg",52*options.zoom,35*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_ZUM_PIEZO_BUZZERAV_PIN")),this.appendValueInput("TONE",Number).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_ZUM_PIEZO_BUZZERAV_TONE")),this.appendValueInput("DURA",Number).setCheck(Number).setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_ZUM_PIEZO_BUZZERAV_DURATION")),this.setPreviousStatement(!0,"code"),this.setNextStatement(!0,"code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_ZUM_PIEZO_BUZZERAV_TOOLTIP"))}},Blockly.Arduino.dyor_31_in_1_rele=function(){var o="",e=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),t=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ATOMIC),l=RoboBlocks.findPinMode(e);return o+=l.code,e=l.pin,RoboBlocks.isVariable(e)?o+=JST.inout_digital_write_setups({dropdown_pin:e}):Blockly.Arduino.setups_["setup_green_digital_write_"+e]=JST.inout_digital_write_setups({dropdown_pin:e}),o+=JST.inout_digital_write({dropdown_pin:e,dropdown_stat:t}),[o,Blockly.Arduino.ORDER_ATOMIC]},Blockly.Blocks.dyor_31_in_1_rele={category:RoboBlocks.locales.getKey("LANG_CATEGORY_ADVANCED"),subcategory:RoboBlocks.locales.getKey("LANG_SUBCATEGORY_OTHER"),tags:["input","output","rele"],helpUrl:RoboBlocks.getHelpUrl("dyor_31_in_1_rele"),examples:["dyor_31_in_1_relay_example.bly"],category_colour:RoboBlocks.LANG_COLOUR_ADVANCED,colour:RoboBlocks.LANG_COLOUR_ADVANCED_OTHER,keys:["LANG_RELE","LANG_RELE_VALUE","LANG_RELE_TOOLTIP"],init:function(){this.setColour(RoboBlocks.LANG_COLOUR_ADVANCED_OTHER),this.appendValueInput("PIN").appendField(RoboBlocks.locales.getKey("LANG_RELE")).appendField(new Blockly.FieldImage("img/blocks/relays.png",52*options.zoom,24*options.zoom)).appendField(RoboBlocks.locales.getKey("LANG_RELE_PIN")).appendField(new Blockly.FieldImage("img/blocks/digital_signal.png",24*options.zoom,24*options.zoom)).setCheck(Number),this.appendValueInput("VALUE",Boolean).setCheck(Boolean).setAlign(Blockly.ALIGN_RIGHT).appendField(RoboBlocks.locales.getKey("LANG_RELE_VALUE")),this.setPreviousStatement("code"),this.setNextStatement("code"),this.setTooltip(RoboBlocks.locales.getKey("LANG_RELE_TOOLTIP"))}},Blockly.Blocks}};if("function"==typeof define&&define.amd)return RoboBlocks;window.RoboBlocks=RoboBlocks});