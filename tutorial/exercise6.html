<!DOCTYPE html>
<html >
<head>
  
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <link rel="shortcut icon" href="assets/images/facilino-cuadrado-fondo-transparente-128x128.png" type="image/x-icon">
  <meta name="description" content="Exercise 6">
  <title>Exercise 6</title>
  <link rel="stylesheet" href="assets/web/assets/mobirise-icons/mobirise-icons.css">
  <link rel="stylesheet" href="assets/tether/tether.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="assets/dropdown/css/style.css">
  <link rel="stylesheet" href="assets/socicon/css/styles.css">
  <link rel="stylesheet" href="assets/theme/css/style.css">
  <link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">
  <script src="assets/web/assets/jquery/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="facilino.css">
  <link rel="stylesheet" type="text/css" href="javascript/highlight/styles/default.css">
  <script src="javascript/underscore/underscore.js"></script>
    <script src="javascript/highlight/highlight.pack.js"></script>
    <script src="javascript/blockly-bq/blockly_compressed.js"></script>
    <script src="javascript/blockly-bq/blocks_compressed.js"></script>
    <script src="javascript/blockly-bq/arduino_compressed.js"></script>
    <script src="facilino.js"></script>
    <script src="roboblocks_compressed.js"></script>
  <script>
function openFunction(bly) {
    $.ajax({
        type: "GET" ,
        url: bly ,
        dataType: "xml" , async: false,
        success: function(xml) {
			var txt = new XMLSerializer().serializeToString(xml);
			Blockly.mainWorkspace.clear();
			var xmlDOM = Blockly.Xml.textToDom(txt);
			Blockly.Xml.domToWorkspace(xmlDOM,Blockly.getMainWorkspace());
        }
    });
}
function injectInstruction(block,blockDiv) {
	var instructionPreview = document.getElementById(blockDiv);
	var mainWorkspace = Blockly.inject(blockDiv, {readOnly:true, collapse: false});
	mainWorkspace.clear();
	var block = mainWorkspace.newBlock(block);
	block.initSvg();
	block.render();
	block.setMovable(false);
	block.setDeletable(false);
	block.moveBy(15, 10);
	var bbox = block.getHeightWidth();
	instructionPreview.style.height = (bbox.height+25)+ 'px';
	instructionPreview.style.width = (bbox.width+50) + 'px';
	window.dispatchEvent(new Event('resize'));
}
function injectExample(exercise,exampleDiv) {
    var instructionPreview = document.getElementById(exampleDiv);
	var mainWorkspace = Blockly.inject(exampleDiv, {readOnly:true, collapse: false});
	openFunction('exercises/'+exercise);
	var bbox = mainWorkspace.svgBlockCanvas_.getBBox();
	instructionPreview.style.height = (bbox.height+25)+ 'px';
	instructionPreview.style.width = (bbox.width+25) + 'px';
	window.dispatchEvent(new Event('resize'));
}
function showHide(el1,ex,el) {
	var y = document.getElementById(el1);
	if (y.style.display === "none") {
		y.style.display = "block";
	} else {
		y.style.display = "none";
	}
	var x = document.getElementById(el);
	if (y.style.display === "block"){
		var parent = x.parentNode;
		parent.removeChild(x);
		var div = document.createElement("div");
		div.setAttribute("id",el);
		parent.appendChild(div);
		injectExample(ex,el);
	}
}
</script>
  </head>
  
<body>
<div id="menu"></div>
<script>$(function(){$('#menu').load('menu.html');});</script>

  <section class="mbr-section content8 cid-qYnID8HJTn" id="content8-93">

    

    <div class="container">
        <div class="media-container-row title">
            <div class="col-12 col-md-8">
                <div class="mbr-section-btn align-center"><a class="btn btn-primary display-4" href="exercise5.html"><span class="mbri-left mbr-iconfont mbr-iconfont-btn"></span></a>
                    <a class="btn btn-primary display-4" href="exercise7.html"><span class="mbri-right mbr-iconfont mbr-iconfont-btn"></span></a></div>
            </div>
        </div>
    </div>
</section>

<section class="mbr-section content4 cid-qYh0wRA9Kt" id="content4-4z">

    

    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
                    Exercise 6</h2>
                <h3 class="mbr-section-subtitle align-center mbr-light mbr-fonts-style display-5">
                    Flow control instructions</h3>
                
            </div>
        </div>
    </div>
</section>

<section class="cid-qYh0wSah5G" id="image3-50">
    <figure class="mbr-figure container">
            <div class="image-block" style="width: 50%;">
                <img src="assets/images/multifunctional_shield_keyes.png" width="1400" alt="Multifunction" title="">
                
            </div>
    </figure>
</section>

<section class="mbr-section article content1 cid-qYh0wSDsTN" id="content2-51">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                <blockquote><strong>Required material. </strong>Arduino Uno, Arduino multifunctional shield.</blockquote>
            </div>
        </div>
    </div>
</section>

<section class="mbr-section article content9 cid-qYh5KdWW4b" id="content9-5u">
    <div class="container">
        <div class="inner-container" style="width: 100%;">
            <hr class="line" style="width: 25%;">
            <div class="section-text align-center mbr-fonts-style display-5">
                    Worked instructions</div>
            <hr class="line" style="width: 25%;">
        </div>
        </div>
</section>

<script>
		window.roboblocksLanguage = 'en-GB';
		window.roboblocksProcessor = 'ArduinoUno';
		window.FacilinoLanguage = window.roboblocksLanguage; 
		window.FacilinoProcessor = window.roboblocksProcessor;
		$.ajax({url: 'lang/facilino_'+window.roboblocksLanguage+'.json',dataType: "text",async: false}).done(function(text) {window.langKeys = $.parseJSON(text).langs[window.roboblocksLanguage].keys; window.langKeysEng = $.parseJSON(text).langs['en-GB'].keys;});
		RoboBlocks.load({ zoom: 1 });
		Facilino.load({ zoom: 1});
</script>

<section class="mbr-section article content1 cid-qYh5PFH3xX" id="content1-5w">
    <div class="container">
		<div class="media-container-row"><div id='blocklyInstruction2'></div><script>injectInstruction('controls_doWhile','blocklyInstruction2');</script></div>
		<div class="media-container-row"><div id='blocklyInstruction4'></div><script>injectInstruction('controls_for','blocklyInstruction4');</script></div>
		<div class="media-container-row"><div id='blocklyInstruction2a'></div><script>injectInstruction('controls_flow_statements','blocklyInstruction2a');</script></div>
		<div class="media-container-row"><div id='blocklyInstruction1'></div><script>injectInstruction('controls_if','blocklyInstruction1');</script></div>
		<div class="media-container-row"><div id='blocklyInstruction2b'></div><script>injectInstruction('base_delay','blocklyInstruction2b');</script></div>
        <div class="media-container-row"><div id='blocklyInstruction'></div><script>injectInstruction('dyor_controls_wait','blocklyInstruction');</script></div>
    </div>
</section>

<section class="mbr-section article content9 cid-qYh0wTdIZC" id="exercise6_1">
    <div class="container">
        <div class="inner-container" style="width: 100%;">
            <hr class="line" style="width: 25%;">
            <div class="section-text align-center mbr-fonts-style display-5">Exercise 6.1: Thermostat</div>
            <hr class="line" style="width: 25%;">
        </div>
        </div>
</section>

<section class="mbr-section article content11 cid-qYh0wTJYr3" id="content11-53">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text counter-container col-12 col-md-8 mbr-fonts-style display-7">
                <ol>
                    <li><strong>Using the LM35 temperature sensor</strong>, the aim is to use its analog value (connected to pin A2) so that if the analog value is below 512, then the red LED (connected to pin D12) must be turned off, while if the readings from the potentiometer are higher or equal than 512, then the LED must be turned on. <strong>Hint: </strong><i>You can use the potentiometer (connected to A0) to emulate temperature readings</i>.<button id="but611" type="button" onclick="showHide('solutions611','exercise_6_1_1.bly','exercise611');" class="btn-primary display-4"><span class="mbri-preview mbr-iconfont mbr-iconfont-btn"></span></button></li>
					<li>Now, modify previous program so that it behaves like a thermostat. The LED will turn on only if the analog value is higher or equal than 640 and the LED is off. It will turn off if the analog value is lower or equal than 384 and the LED is on. Otherwise, the LED will remain in its current state. <strong>Hint: </strong><i>Add an AND condition so that evaluates both the analog value and reads the LED pin value (compared to LOW or HIGH as convenience)</i>.<button id="but612" type="button" onclick="showHide('solutions612','exercise_6_1_2.bly','exercise612');" class="btn-primary display-4"><span class="mbri-preview mbr-iconfont mbr-iconfont-btn"></span></button></li>
                </ol>
            </div>
        </div>
    </div>
	<section class="mbr-section article content1 cid-qYh5PFH3xX" id="solutions611" style="display:none">
		<div class="container">
			<div class="media-container-row"><div id='exercise611'></div></div>
		</div>
	</section>
	<section class="mbr-section article content1 cid-qYh5PFH3xX" id="solutions612" style="display:none">
		<div class="container">
			<div class="media-container-row"><div id='exercise612'></div></div>
		</div>
	</section>
</section>

<section class="mbr-section article content9 cid-qYh0wTdIZC" id="exercise6_1">
    <div class="container">
        <div class="inner-container" style="width: 100%;">
            <hr class="line" style="width: 25%;">
            <div class="section-text align-center mbr-fonts-style display-5">Exercise 6.2: Blink LEDs conditionally and repetitively</div>
            <hr class="line" style="width: 25%;">
        </div>
        </div>
</section>


<section class="mbr-section article content11 cid-qYh0wTJYr3" id="content11-53">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text counter-container col-12 col-md-8 mbr-fonts-style display-7">
                <ol>
                    <li><strong>Blink the red LED conditionally</strong>. When the switch button SW1 (connected to pin D2) is pushed, the red LED (connected to pin D12) will start blinking. While it is blinking, if the switch button SW2 (connected to pin D3) is pushed, then the LED will stop blinking and will start waiting for SW1 being pushed agaig to repeat the sequence. The delay time while blinking the LED will be set to 500ms. <strong>Hint: </strong><i>First, wait for button SW1 being pushed. Then, in a </i>while loop<i> instruction, make the red LED blink (turn it on and off with the delay time indicated). Within the </i>while<i>  loop check if the button SW2 has been pushed. If so, then break the loop</i>.<button id="but621" type="button" onclick="showHide('solutions621','exercise_6_2_1.bly','exercise621');" class="btn-primary display-4"><span class="mbri-preview mbr-iconfont mbr-iconfont-btn"></span></button></li>
					<li>Now, modify previous program so that the blue LED (connected to pin 13) blinks the same amount of times than the red LED, but with a delay time of 250 ms.<strong>Hint: </strong><i> Count the number of blinks inside the </i>while loop<i>. Then, after the </i>while<i> loop, create a </i>for<i> loop to blink the blue LED the same amount of times.<button id="but622" type="button" onclick="showHide('solutions622','exercise_6_2_2.bly','exercise622');" class="btn-primary display-4"><span class="mbri-preview mbr-iconfont mbr-iconfont-btn"></span></button></li>
                </ol>
            </div>
        </div>
    </div>
	<section class="mbr-section article content1 cid-qYh5PFH3xX" id="solutions621" style="display:none">
		<div class="container">
			<div class="media-container-row"><div id='exercise621'></div></div>
		</div>
	</section>
	<section class="mbr-section article content1 cid-qYh5PFH3xX" id="solutions622" style="display:none">
		<div class="container">
			<div class="media-container-row"><div id='exercise622'></div></div>
		</div>
	</section>
</section>

<section class="mbr-section article content9 cid-qYh0wTdIZC" id="exercise6_3">
    <div class="container">
        <div class="inner-container" style="width: 100%;">
            <hr class="line" style="width: 25%;">
            <div class="section-text align-center mbr-fonts-style display-5">Exercise 6.3: Sound effect</div>
            <hr class="line" style="width: 25%;">
        </div>
        </div>
</section>


<section class="mbr-section article content11 cid-qYh0wTJYr3" id="content11-53">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text counter-container col-12 col-md-8 mbr-fonts-style display-7">
                <ol>
                    <li><strong>Generate a sound effect</strong>. In order to generate a sound effects we can generate sounds with increasing frequencies with an exponential factor <i>a</i> such that the frequency can be computed as <i>f=f0*a^n</i>, being <i>n</i> the number of iterations and <i>f0</i> a base frequency. <strong>Generate two consecutives sound effects</strong> using the buzzer (connected to pin D5). The first sound reproduces tones of duration 20 ms with a frequency <i>f</i> given by <i>f0=1318.19</i> Hz and <i>a=1.03</i> until <i>f>=1567.98</i> Hz. The second sound reproduces sounds of duration 10 ms and a frequency <i>f</i> given by <i>f0=1318.19</i> Hz and <i>a=1.04</i> until <i>f>=2349.32</i> Hz. <strong>Hint: </strong><i> Initialize a float variable with the base fraquency, and, in a </i>while loop<i>, reproduce the sound (with the </i>Advanced Buzzer<i> instruction, wait the amount of time indicated and increase the frequency with the specified factor</i>.<button id="but631" type="button" onclick="showHide('solutions631','exercise_6_3_1.bly','exercise631');" class="btn-primary display-4"><span class="mbri-preview mbr-iconfont mbr-iconfont-btn"></span></button></li>
					<li><strong>Push a button to generate the sound effect</strong> Now, modify previous example so that sound is reproduced every time the uses pushes a button connected to pin D2. Also, modify previous example and include a small pause between consecutive notes of 2 ms. <strong>Hint: </strong><i> Use the </i>wait until<i> instruction to reprocude the sound after the butoon is pushed. The </i>noTone<i> instruction can be used to generate the pauses</i>.<button id="but632" type="button" onclick="showHide('solutions632','exercise_6_3_2.bly','exercise632');" class="btn-primary display-4"><span class="mbri-preview mbr-iconfont mbr-iconfont-btn"></span></button></li>
                </ol>
            </div>
        </div>
    </div>
	<section class="mbr-section article content1 cid-qYh5PFH3xX" id="solutions631" style="display:none">
		<div class="container">
			<div class="media-container-row"><div id='exercise631'></div></div>
		</div>
	</section>
	<section class="mbr-section article content1 cid-qYh5PFH3xX" id="solutions632" style="display:none">
		<div class="container">
			<div class="media-container-row"><div id='exercise632'></div></div>
		</div>
	</section>
</section>


<script>
function HideButton(el)
{
	if (localStorage.getItem("solutions")===undefined || localStorage.getItem("solutions")===null)
	{
		var y = document.getElementById(el);
		y.style.display = "none";
	}
}
HideButton('but611'); HideButton('but612'); HideButton('but621'); HideButton('but622'); HideButton('but631'); HideButton('but632');
</script>
<div id="footer"></div>
<script>$(function(){$('#footer').load('footer.html');});</script>


  <script src="assets/web/assets/jquery/jquery.min.js"></script>
  <script src="assets/popper/popper.min.js"></script>
  <script src="assets/tether/tether.min.js"></script>
  <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/smoothscroll/smooth-scroll.js"></script>
  <script src="assets/dropdown/js/script.min.js"></script>
  <script src="assets/touchswipe/jquery.touch-swipe.min.js"></script>
  <script src="assets/theme/js/script.js"></script>
  
  
</body>
</html>