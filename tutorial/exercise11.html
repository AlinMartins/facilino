<!DOCTYPE html>
<html >
<head>
  
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <link rel="shortcut icon" href="assets/images/facilino-cuadrado-fondo-transparente-128x128.png" type="image/x-icon">
  <meta name="description" content="Exercise 11">
  <title>Exercise 11</title>
  <link rel="stylesheet" href="assets/web/assets/mobirise-icons/mobirise-icons.css">
  <link rel="stylesheet" href="assets/tether/tether.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="assets/dropdown/css/style.css">
  <link rel="stylesheet" href="assets/socicon/css/styles.css">
  <link rel="stylesheet" href="assets/theme/css/style.css">
  <link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">
  <script src="assets/web/assets/jquery/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="facilino.css">
  <link rel="stylesheet" type="text/css" href="javascript/highlight/styles/default.css">
  <script src="javascript/underscore/underscore.js"></script>
    <script src="javascript/highlight/highlight.pack.js"></script>
    <script src="javascript/blockly-bq/blockly_compressed.js"></script>
    <script src="javascript/blockly-bq/blocks_compressed.js"></script>
    <script src="javascript/blockly-bq/arduino_compressed.js"></script>
    <script src="facilino.js"></script>
    <script src="roboblocks_compressed.js"></script>
  <script>
function openFunction(bly) {
    $.ajax({
        type: "GET" ,
        url: bly ,
        dataType: "xml" , async: false,
        success: function(xml) {
			var txt = new XMLSerializer().serializeToString(xml);
			Blockly.mainWorkspace.clear();
			var xmlDOM = Blockly.Xml.textToDom(txt);
			Blockly.Xml.domToWorkspace(xmlDOM,Blockly.getMainWorkspace());
        }
    });
}
function injectInstruction(block,blockDiv) {
	var instructionPreview = document.getElementById(blockDiv);
	var mainWorkspace = Blockly.inject(blockDiv, {readOnly:true, collapse: false});
	mainWorkspace.clear();
	var block = mainWorkspace.newBlock(block);
	block.initSvg();
	block.render();
	block.setMovable(false);
	block.setDeletable(false);
	block.moveBy(15, 10);
	var bbox = block.getHeightWidth();
	instructionPreview.style.height = (bbox.height+25)+ 'px';
	instructionPreview.style.width = (bbox.width+25) + 'px';
	window.dispatchEvent(new Event('resize'));
}
function injectExample(exercise,exampleDiv) {
    var instructionPreview = document.getElementById(exampleDiv);
	var mainWorkspace = Blockly.inject(exampleDiv, {readOnly:true, collapse: false});
	openFunction('exercises/'+exercise);
	var bbox = mainWorkspace.svgBlockCanvas_.getBBox();
	instructionPreview.style.height = (bbox.height+25)+ 'px';
	instructionPreview.style.width = (bbox.width+25) + 'px';
	window.dispatchEvent(new Event('resize'));
}
function showHide(el1,ex,el) {
	var y = document.getElementById(el1);
	if (y.style.display === "none") {
		y.style.display = "block";
	} else {
		y.style.display = "none";
	}
	var x = document.getElementById(el);
	if (y.style.display === "block"){
		var parent = x.parentNode;
		parent.removeChild(x);
		var div = document.createElement("div");
		div.setAttribute("id",el);
		parent.appendChild(div);
		injectExample(ex,el);
	}
}
</script>
  </head>
  
<body>
<div id="menu"></div>
<script>$(function(){$('#menu').load('menu.html');});</script>

  <section class="mbr-section content8 cid-qYnID8HJTn" id="content8-93">

    

    <div class="container">
        <div class="media-container-row title">
            <div class="col-12 col-md-8">
                <div class="mbr-section-btn align-center"><a class="btn btn-primary display-4" href="exercise10.html"><span class="mbri-left mbr-iconfont mbr-iconfont-btn"></span></a>
                    <a class="btn btn-primary display-4" href="exercise12.html"><span class="mbri-right mbr-iconfont mbr-iconfont-btn"></span></a></div>
            </div>
        </div>
    </div>
</section>

<section class="mbr-section content4 cid-qYh0wRA9Kt" id="content4-4z">

    

    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
                    Exercise 11</h2>
                <h3 class="mbr-section-subtitle align-center mbr-light mbr-fonts-style display-5">
                    Two-Button User Interface</h3>
                
            </div>
        </div>
    </div>
</section>

<section class="cid-qYh0wSah5G" id="image3-50">
    <figure class="mbr-figure container">
            <div class="image-block" style="width: 50%;">
                <img src="assets/images/multifunctional_shield_keyes.png" width="1400" alt="Multifunction" title="">
                
            </div>
    </figure>
</section>

<section class="mbr-section article content1 cid-qYh0wSDsTN" id="content2-51">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                <blockquote><strong>Required material. </strong>Arduino Uno, Arduino multifunctional shield.</blockquote>
            </div>
        </div>
    </div>
</section>

<section class="mbr-section article content9 cid-qYh0wTdIZC" id="exercise9_1">
    <div class="container">
        <div class="inner-container" style="width: 100%;">
            <hr class="line" style="width: 25%;">
            <div class="section-text align-center mbr-fonts-style display-5">Preliminaries</div>
            <hr class="line" style="width: 25%;">
        </div>
        </div>
</section>

<section class="mbr-section article content1 cid-qYh5PFH3xX" id="content1-5w">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7"><strong>A two-button User-Interface</strong> uses two buttons to be used as a <strong>Next/Select button</strong> and <strong>Cancel button</strong>, respectively. Every UI has a <strong>General Menu</strong>, in which we show the main UI with whatever information or data we consider relevant. For instance, we can <strong>print data over the console</strong> or <strong>show data on a LCD screen</strong>. A two-button UI can have different menus 'menu0', 'menu1', 'menu2', etc...representing concepts such as 'temperature', 'light', 'fan', etc... Each menu has different options, for instance 'Low', 'Medium', 'High' 'ON', 'OFF' (or whatever you consider more appropriate).</div>
		</div>
    </div>
</section>

<section class="mbr-section article content1 cid-qYh5PFH3xX" id="content1-5w">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">In order to reduce the number of buttons in a UI, it is very convinient that some <strong>buttons can implement a double functionality</strong> when pressing buttons, so <strong>we can distinguish between long-press</strong> (long click) and <strong>short-press</strong> (normal click). In this sense, the Next/Select button must include this feature, so that the <strong>'Next' is implemented with a short-press</strong> and <strong>'Select' is implemented with a long-press</strong>.</div>
		</div>
    </div>
</section>

<section class="mbr-section article content1 cid-qYh5PFH3xX" id="content1-5w">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7"><strong>A two-button UI can be seen a tree</strong>, with the <strong>'General Menu' being the trunk</strong>, the <strong>'menus' are the branches</strong> and the <strong>'options' are the leaves</strong>. Every time the user moves along the tree, <strong>only one element is 'highlighted'</strong> or 'displayed' if it is shown on a screen. Usually, the <strong>names of the 'menus' and 'options' are displayed every time the user nagivates along the tree</strong>, so he knows in which part of the tree is currently positioned. </div>
		</div>
    </div>
</section>

<section class="mbr-section article content1 cid-qYh5PFH3xX" id="content1-5w">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7"><strong>To move along the tree, the user will combine actions of 'Next', 'Select' and 'Cancel' accordingly</strong>. So from the 'General Menu' (the trunk of the tree), <strong>we can iterate over the branches using the 'Next' button</strong>. Once the last brach is reached, we can jump to the first branch again simply pushing the 'Next' button. Similarly, if we are displaying the options of a menu, <strong>the 'Next' button will iterate over the different options</strong>. The 'Select' action will move from the 'General Menu' to the first menu and if selected again will move to the first option. Every time the user presses the <strong>'Cancel' button it moves back from leaves to branches or from branches to main trunk</strong>, which means that it moves from 'options' to 'menus' and 'menus' to 'General Menu'.</div>
		</div>
    </div>
</section>

<section class="mbr-section article content9 cid-qYh5KdWW4b" id="content9-5u">
    <div class="container">
        <div class="inner-container" style="width: 100%;">
            <hr class="line" style="width: 25%;">
            <div class="section-text align-center mbr-fonts-style display-5">
                    Worked instructions</div>
            <hr class="line" style="width: 25%;">
        </div>
        </div>
</section>

<script>
		window.roboblocksLanguage = 'en-GB';
		window.roboblocksProcessor = 'ArduinoUno';
		window.FacilinoLanguage = window.roboblocksLanguage; 
		window.FacilinoProcessor = window.roboblocksProcessor;
		$.ajax({url: 'lang/facilino_'+window.roboblocksLanguage+'.json',dataType: "text",async: false}).done(function(text) {window.langKeys = $.parseJSON(text).langs[window.roboblocksLanguage].keys; window.langKeysEng = $.parseJSON(text).langs['en-GB'].keys;});
		RoboBlocks.load({ zoom: 1 });
		Facilino.load({ zoom: 1});
</script>

<section class="mbr-section article content1 cid-qYh5PFH3xX" id="content1-5w">
    <div class="container">
		<div class="media-container-row"><div id='blocklyInstruction3'></div><script>injectInstruction('button_long_short','blocklyInstruction3');</script></div>
		<div class="media-container-row"><div id='blocklyInstruction0'></div><script>injectInstruction('two_buttons_ui','blocklyInstruction0');</script></div>
		<div class="media-container-row"><div id='blocklyInstruction7'></div><script>injectInstruction('two_buttons_ui_option','blocklyInstruction7');</script></div>
		<div class="media-container-row"><div id='blocklyInstruction8'></div><script>injectInstruction('dyor_task','blocklyInstruction8');</script></div>
	</div>
</section>

<section class="mbr-section article content9 cid-qYh0wTdIZC" id="exercise11_1">
    <div class="container">
        <div class="inner-container" style="width: 100%;">
            <hr class="line" style="width: 25%;">
            <div class="section-text align-center mbr-fonts-style display-5">Exercise 11.1: Long/Short Press</div>
            <hr class="line" style="width: 25%;">
        </div>
        </div>
</section>

<section class="mbr-section article content11 cid-qYh0wTJYr3" id="content11-53">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text counter-container col-12 col-md-8 mbr-fonts-style display-7">
                <ol>
                    <li><strong>Long/Short Press</strong>. Create a program that makes the red LED (connected to pin D12) and the blue LED (connected to pin D13) toggle. If the switch SW1 (connected to pin D2) is long pressed, then the red LED will toggle. Otherwise, if the button is short pressed, then the blue LED will toggle. Set the appropriate 'long pressed time' as you prefer. <strong>Hint: </strong><i>Use the 'long/short pressed' instruction to discriminate each of the cases</i>. <button id="but1111" type="button" onclick="showHide('solutions1111','exercise_11_1_1.bly','exercise1111');" class="btn-primary display-4"><span class="mbri-preview mbr-iconfont mbr-iconfont-btn"></span></button></li>
					<li><strong>Long/Short Press (delay)</strong>. Now, modify the previous code you introduce an intentional delay of varying from 100ms to 5000ms depending on the potentiometer position (connected to pin A0). You will notice that the program is not 'responsive' as before for higher delay values, because Arduino's main flow is busy. <strong>Hint: </strong><i>The delay can be introduced right before or after the button is read</i>. <button id="but1112" type="button" onclick="showHide('solutions1112','exercise_11_1_2.bly','exercise1112');" class="btn-primary display-4"><span class="mbri-preview mbr-iconfont mbr-iconfont-btn"></span></button></li>
					<li><strong>Long/Short Press (external interrupt)</strong>. Now, modify the previous code so that the code is implemented on external interrupt for pin D2. <strong>Hint: </strong><i>Move the 'long/short pressed' instruction inside the interrupt instruction. The appropriate mode for the interrupt is, in this case, 'CHANGE'</i>. <button id="but1113" type="button" onclick="showHide('solutions1113','exercise_11_1_3.bly','exercise1113');" class="btn-primary display-4"><span class="mbri-preview mbr-iconfont mbr-iconfont-btn"></span></button></li>
					<li><strong>Long/Short Press (timed-interrupt)</strong>. Now, modify the previous code so that the code is implemented on timed-interrupt (task). <strong>Hint: </strong><i>Move the 'long/short pressed' instruction inside the 'always do' section of the 'Multi-task' instruction</i>. <button id="but1113" type="button" onclick="showHide('solutions1114','exercise_11_1_4.bly','exercise1114');" class="btn-primary display-4"><span class="mbri-preview mbr-iconfont mbr-iconfont-btn"></span></button></li>
				</ol>
            </div>
        </div>
    </div>
	<section class="mbr-section article content1 cid-qYh5PFH3xX" id="solutions1111" style="display:none">
		<div class="container">
			<div class="media-container-row"><div id='exercise1111'></div></div>
		</div>
	</section>
	<section class="mbr-section article content1 cid-qYh5PFH3xX" id="solutions1112" style="display:none">
		<div class="container">
			<div class="media-container-row"><div id='exercise1112'></div></div>
		</div>
	</section>
	<section class="mbr-section article content1 cid-qYh5PFH3xX" id="solutions1113" style="display:none">
		<div class="container">
			<div class="media-container-row"><div id='exercise1113'></div></div>
		</div>
	</section>
	<section class="mbr-section article content1 cid-qYh5PFH3xX" id="solutions1114" style="display:none">
		<div class="container">
			<div class="media-container-row"><div id='exercise1114'></div></div>
		</div>
	</section>
</section>

<section class="mbr-section article content9 cid-qYh0wTdIZC" id="exercise11_2">
    <div class="container">
        <div class="inner-container" style="width: 100%;">
            <hr class="line" style="width: 25%;">
            <div class="section-text align-center mbr-fonts-style display-5">Exercise 11.2: Two buttons UI</div>
            <hr class="line" style="width: 25%;">
        </div>
    </div>
</section>

<section class="mbr-section article content11 cid-qYh0wTJYr3" id="content11-53">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text counter-container col-12 col-md-8 mbr-fonts-style display-7">
                <ol>
                    <li><strong>Two buttons UI</strong>. Implement a user-interface (UI) with two buttons. The button SW1 (connected to pin D2) will be used as a Next/Select button, while the button SW2 (connected to pin D3) will be used as a Cancel button. Create 3 diferent menus: 'menu0', 'menu1' and 'menu2'. Each menu has different options, so for instance, let's create 2 options in 'menu0', 3 options in 'menu1' and 2 options in 'menu2'. Display over the console, the names of the menus, i.e.: "Menu0" and options "Menu0, Option0" and also if an option is selected "Menu0, Option0 selected!". The 'General Menu' must be refreshed every 5000ms, in which we will display the message 'General' every time we are refreshing this menu. <strong>Hint: </strong> <i>Use the 'Two Buttons UI' instruction togeter with the 'Options' instruction to create the appropriate tree structure</i>.<button id="but1121" type="button" onclick="showHide('solutions1121','exercise_11_2_1.bly','exercise1121');" class="btn-primary display-4"><span class="mbri-preview mbr-iconfont mbr-iconfont-btn"></span></button></li>
					<li>Now, modify the previous program so the UI is indeed implemented on a task every 20ms. <strong>Hint: </strong><i> Move the previous instructions to a 'Multi-task' instruction and create a task to run every 20ms</i>. <button id="but1122" type="button" onclick="showHide('solutions1122','exercise_11_2_2.bly','exercise1122');" class="btn-primary display-4"><span class="mbri-preview mbr-iconfont mbr-iconfont-btn"></span></button></li>
					<li>Now, modify the previous program so that the user also receives a sound indication so he can directly know if it navigating over a branch (menus) or a leaves (options). Also create a sound when an option is selected. <strong>Hint: </strong><i>Add predefined sounds such as 'Mode1', 'Mode2', 'Mode3' for each of the cases, i.e.: 'Mode1' when a menu is 'highlighted', 'Mode2' when an option is 'highlighted' and 'Mode3' when an option is selected.</i><button id="but1123" type="button" onclick="showHide('solutions1123','exercise_11_2_3.bly','exercise1123');" class="btn-primary display-4"><span class="mbri-preview mbr-iconfont mbr-iconfont-btn"></span></button></li>
				</ol>
            </div>
        </div>
    </div>
	<section class="mbr-section article content1 cid-qYh5PFH3xX" id="solutions1121" style="display:none">
		<div class="container">
			<div class="media-container-row"><div id='exercise1121'></div></div>
		</div>
	</section>
	<section class="mbr-section article content1 cid-qYh5PFH3xX" id="solutions1122" style="display:none">
		<div class="container">
			<div class="media-container-row"><div id='exercise1122'></div></div>
		</div>
	</section>
	<section class="mbr-section article content1 cid-qYh5PFH3xX" id="solutions1123" style="display:none">
		<div class="container">
			<div class="media-container-row"><div id='exercise1123'></div></div>
		</div>
	</section>
</section>


<script>
function HideButton(el)
{
	if (localStorage.getItem("solutions")===undefined || localStorage.getItem("solutions")===null)
	{
		var y = document.getElementById(el);
		y.style.display = "none";
	}
}
HideButton('but1111'); HideButton('but1112'); HideButton('but1113'); HideButton('but1114'); HideButton('but1121'); HideButton('but1122'); HideButton('but1123');
</script>

<div id="footer"></div>
<script>$(function(){$('#footer').load('footer.html');});</script>

  <script src="assets/web/assets/jquery/jquery.min.js"></script>
  <script src="assets/popper/popper.min.js"></script>
  <script src="assets/tether/tether.min.js"></script>
  <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/smoothscroll/smooth-scroll.js"></script>
  <script src="assets/dropdown/js/script.min.js"></script>
  <script src="assets/touchswipe/jquery.touch-swipe.min.js"></script>
  <script src="assets/theme/js/script.js"></script>
  
  
</body>
</html>